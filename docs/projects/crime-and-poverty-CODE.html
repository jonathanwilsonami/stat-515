<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Crime And Poverty Redesign Project CODE – Stat 515</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-139760d7c2b45b71cf6fb5fb69731804.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>
<link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
      


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Stat 515</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../projects/index.html">
 <span class="dropdown-text">All Projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../projects/crime-and-poverty.html">
 <span class="dropdown-text">Mid Term Redesign</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../projects/crime-and-poverty-CODE.html">
 <span class="dropdown-text">Mid Term Redesign - CODE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../projects/power.html">
 <span class="dropdown-text">Final Project</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#loading-libs-and-data" id="toc-loading-libs-and-data" class="nav-link active" data-scroll-target="#loading-libs-and-data">Loading Libs and data</a></li>
  <li><a href="#original-graphic-redesign" id="toc-original-graphic-redesign" class="nav-link" data-scroll-target="#original-graphic-redesign">Original Graphic Redesign</a></li>
  <li><a href="#alternative-data-visualization---using-bar-charts" id="toc-alternative-data-visualization---using-bar-charts" class="nav-link" data-scroll-target="#alternative-data-visualization---using-bar-charts">Alternative Data Visualization - Using Bar Charts</a></li>
  <li><a href="#alternative-data-visualization---using-poverty-as-dependent-variable" id="toc-alternative-data-visualization---using-poverty-as-dependent-variable" class="nav-link" data-scroll-target="#alternative-data-visualization---using-poverty-as-dependent-variable">Alternative Data Visualization - Using Poverty as Dependent Variable</a></li>
  <li><a href="#comparing-crime-and-poverty-by-state-on-usa-map" id="toc-comparing-crime-and-poverty-by-state-on-usa-map" class="nav-link" data-scroll-target="#comparing-crime-and-poverty-by-state-on-usa-map">Comparing Crime and Poverty by State on USA Map</a></li>
  <li><a href="#comparing-crime-and-poverty-by-u.s.-county" id="toc-comparing-crime-and-poverty-by-u.s.-county" class="nav-link" data-scroll-target="#comparing-crime-and-poverty-by-u.s.-county">Comparing Crime and Poverty by U.S. County</a></li>
  <li><a href="#zooming-in-on-south-carolina" id="toc-zooming-in-on-south-carolina" class="nav-link" data-scroll-target="#zooming-in-on-south-carolina">Zooming in on South Carolina</a></li>
  <li><a href="#interactive-plot-of-south-carolina-to-look-at-individual-counties" id="toc-interactive-plot-of-south-carolina-to-look-at-individual-counties" class="nav-link" data-scroll-target="#interactive-plot-of-south-carolina-to-look-at-individual-counties">Interactive Plot of South Carolina to Look at Individual Counties</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Crime And Poverty Redesign Project CODE</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="loading-libs-and-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-libs-and-data">Loading Libs and data</h2>
<p>The following code fetches the data, sets project variables, and creates several helper functions for making charts looker clearer and cleaner. The entire project uses ggplot2, dplyr, tidyr, tidyverse, maps, mapproj, patchwork, scales, plotly, viridisLite, grid, stringr, tibble libraries. Much of the helpfer functions for the maps leverage this site<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># See renv.lock </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># library(sf)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># library(stringr)</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapproj)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="do">##################################</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Sources </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="do">##################################</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>state <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/crime_plus_poverty_2023.csv"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>county <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/crime_poverty_by_county_2023.csv"</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="do">##################################</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Cleaning </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="do">##################################</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Droping rows where census data was not available for 2023 source county data </span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="st">"no_population"</span> <span class="sc">%in%</span> <span class="fu">names</span>(county)) {</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  county <span class="ot">&lt;-</span> county <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(no_population <span class="sc">!=</span> <span class="st">"true"</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>county <span class="ot">&lt;-</span> county <span class="sc">%&gt;%</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">poverty_rate =</span> <span class="fu">as.numeric</span>(poverty_rate),</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">property_crime_per_100k =</span> <span class="fu">as.numeric</span>(property_crime_per_100k),</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">violent_crime_per_100k =</span> <span class="fu">as.numeric</span>(violent_crime_per_100k)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="do">##################################</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Useful functions &amp; Vars</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="do">##################################</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>county_metric_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"poverty_rate"</span>,</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">"property_crime_per_100k"</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>            <span class="st">"violent_crime_per_100k"</span>)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Create geometries for mapping </span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>us_counties <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">map_data</span>(<span class="st">"county"</span>)  <span class="co"># long/lat + region (state), subregion (county)</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>county_key  <span class="ot">&lt;-</span> maps<span class="sc">::</span>county.fips <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">polyname =</span> <span class="fu">str_to_lower</span>(polyname))</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>counties_poly <span class="ot">&lt;-</span> us_counties <span class="sc">%&gt;%</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">polyname =</span> <span class="fu">paste</span>(region, subregion, <span class="at">sep =</span> <span class="st">","</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(county_key, <span class="at">by =</span> <span class="st">"polyname"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">fips =</span> fips) <span class="sc">%&gt;%</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(fips))</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Function for creating maps</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>build_county_map <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(long, lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">color =</span> <span class="st">"gray85"</span>, <span class="at">linewidth =</span> <span class="fl">0.1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_quickmap</span>() <span class="sc">+</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">8</span>)</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper to compute sensible upper limits (95th percentile) for crime and poverty rates </span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>p95 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x[<span class="fu">is.finite</span>(x)]</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">length</span>(x)) <span class="fu">return</span>(<span class="cn">NA_real_</span>)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>(<span class="fu">quantile</span>(x, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Derive county FIPS given a data frame</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Uses: fips OR state+county codes OR state_abbr+county name</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>derive_fips <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">county_key =</span> <span class="cn">NULL</span>, <span class="at">keep_unmatched =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">is.data.frame</span>(df))</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>  finish <span class="ot">&lt;-</span> <span class="cf">function</span>(out) <span class="fu">invisible</span>(<span class="cf">if</span> (keep_unmatched) out <span class="cf">else</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(out, <span class="sc">!</span><span class="fu">is.na</span>(.data<span class="sc">$</span>fips)))</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># county crosswalk (polyname = "state,county" lowercase)</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(county_key)) {</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>    county_key <span class="ot">&lt;-</span> maps<span class="sc">::</span>county.fips <span class="sc">|&gt;</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">polyname =</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(polyname))</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Already has FIPS</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">"fips"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    out <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(df, <span class="at">fips =</span> stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="fu">as.character</span>(.data<span class="sc">$</span>fips), <span class="dv">5</span>, <span class="st">"0"</span>))</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">finish</span>(out))</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>  <span class="co"># state + county numeric/string codes</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">all</span>(<span class="fu">c</span>(<span class="st">"state"</span>, <span class="st">"county"</span>) <span class="sc">%in%</span> <span class="fu">names</span>(df))) {</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    out <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>      df,</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>      <span class="at">fips =</span> <span class="fu">paste0</span>(</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="fu">as.character</span>(.data<span class="sc">$</span>state),  <span class="dv">2</span>, <span class="st">"0"</span>),</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="fu">as.character</span>(.data<span class="sc">$</span>county), <span class="dv">3</span>, <span class="st">"0"</span>)</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">finish</span>(out))</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>  <span class="co"># state_abbr + county name (match via polyname)</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>  county_col <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"county_name"</span>, <span class="st">"county"</span>)[<span class="fu">c</span>(<span class="st">"county_name"</span>, <span class="st">"county"</span>) <span class="sc">%in%</span> <span class="fu">names</span>(df)][<span class="dv">1</span>]</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(county_col) <span class="sc">&amp;&amp;</span> <span class="st">"state_abbr"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    states_lookup <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_abbr =</span> <span class="fu">c</span>(state.abb, <span class="st">"DC"</span>),</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>      <span class="at">state_name =</span> <span class="fu">c</span>(state.name, <span class="st">"District of Columbia"</span>)</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">state_name_lower =</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(state_name))</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>    norm_county <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>      x <span class="sc">|&gt;</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_to_lower</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s+(county|parish|borough|census area|municipality|city)$"</span>, <span class="st">""</span>) <span class="sc">|&gt;</span> <span class="co"># Regex to extract county name</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"^st</span><span class="sc">\\</span><span class="st">.?</span><span class="sc">\\</span><span class="st">s"</span>, <span class="st">"saint "</span>)</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>    out <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">left_join</span>(states_lookup, <span class="at">by =</span> <span class="st">"state_abbr"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">polyname =</span> <span class="fu">paste</span>(.data<span class="sc">$</span>state_name_lower, <span class="fu">norm_county</span>(.data[[county_col]]), <span class="at">sep =</span> <span class="st">","</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">left_join</span>(county_key, <span class="at">by =</span> <span class="st">"polyname"</span>)  <span class="co"># adds fips</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">finish</span>(out))</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"derive_fips(): need one of: 'fips'; 'state'+'county'; or 'state_abbr'+county name."</span>)</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a><span class="co"># Used to make the color scale look better </span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>scale_fill_binned_left <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>  x, <span class="co"># numeric vector used to size bins </span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>  step, <span class="co"># bin width </span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_cap =</span> <span class="cn">NULL</span>,</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_cap =</span> <span class="cn">NULL</span>,</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_fmt =</span> <span class="fu">label_percent</span>(<span class="at">accuracy =</span> <span class="dv">1</span>),</span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="cn">NULL</span>, <span class="co"># legend title</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>  <span class="at">option =</span> <span class="st">"mako"</span>, <span class="at">begin =</span> <span class="fl">0.15</span>, <span class="at">end =</span> <span class="fl">0.90</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="co"># colormap or palette</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>  <span class="at">bar_width_mm =</span> <span class="dv">200</span>, <span class="at">bar_height_mm =</span> <span class="dv">12</span>,</span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>  <span class="at">title_size =</span> <span class="dv">13</span>, <span class="at">label_size =</span> <span class="dv">12</span>,</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_separators =</span> <span class="cn">TRUE</span>  <span class="co"># draw white separators at bin edges</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(x), <span class="fu">is.numeric</span>(step), step <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>  <span class="co"># compute "nice" upper bound from p95, then clamp to caps if provided</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>  upper_raw <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(<span class="fu">p95</span>(x) <span class="sc">/</span> step) <span class="sc">*</span> step</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(min_cap)) upper_raw <span class="ot">&lt;-</span> <span class="fu">max</span>(min_cap, upper_raw)</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(max_cap)) upper_raw <span class="ot">&lt;-</span> <span class="fu">min</span>(max_cap, upper_raw)</span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>  brks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, upper_raw, <span class="at">by =</span> step)</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>  labs <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">label_fmt</span>(<span class="fu">head</span>(brks, <span class="sc">-</span><span class="dv">1</span>)), <span class="st">"–"</span>, <span class="fu">label_fmt</span>(<span class="fu">tail</span>(brks, <span class="sc">-</span><span class="dv">1</span>)))</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>  labs <span class="ot">&lt;-</span> <span class="fu">c</span>(labs, <span class="st">""</span>)</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_b</span>(</span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> option, <span class="at">begin =</span> begin, <span class="at">end =</span> end, <span class="at">direction =</span> direction,</span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">range</span>(brks),</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> brks,</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> labs,</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">oob =</span> scales<span class="sc">::</span>squish, <span class="at">na.value =</span> <span class="st">"gray95"</span>,</span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> name <span class="sc">%||%</span> <span class="st">""</span>,</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide =</span> <span class="fu">guide_colorsteps</span>(</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>      <span class="at">title.position =</span> <span class="st">"top"</span>,</span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.position =</span> <span class="st">"top"</span>, <span class="co"># labels above bar</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.theme  =</span> <span class="fu">element_text</span>(<span class="at">size =</span> label_size, <span class="at">hjust =</span> <span class="dv">0</span>),  <span class="co"># left-justify</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>      <span class="at">ticks =</span> show_separators,</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>      <span class="at">ticks.colour =</span> <span class="cf">if</span> (show_separators) <span class="st">"white"</span> <span class="cf">else</span> <span class="cn">NULL</span>,</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">ticks.linewidth =</span> <span class="cf">if</span> (show_separators) <span class="dv">2</span> <span class="cf">else</span> <span class="cn">NULL</span>,</span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.limits =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>      <span class="at">barwidth  =</span> grid<span class="sc">::</span><span class="fu">unit</span>(bar_width_mm,  <span class="st">"mm"</span>),</span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>      <span class="at">barheight =</span> grid<span class="sc">::</span><span class="fu">unit</span>(bar_height_mm, <span class="st">"mm"</span>),</span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>      <span class="at">title.theme =</span> <span class="fu">element_text</span>(<span class="at">size =</span> title_size, <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">4</span>))</span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">%||%</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) <span class="cf">if</span> (<span class="fu">is.null</span>(a)) b <span class="cf">else</span> a</span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a><span class="co"># Formtter for plotly maps </span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>apply_plotly_binned_colorbar <span class="ot">&lt;-</span> <span class="cf">function</span>(p, brks, labs, <span class="at">palette =</span> <span class="st">"mako"</span>,</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">begin =</span> <span class="fl">0.15</span>, <span class="at">end =</span> <span class="fl">0.90</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">title =</span> <span class="st">"Legend"</span>, <span class="at">horizontal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">thickness =</span> <span class="dv">28</span>, <span class="at">len =</span> <span class="dv">1</span>, <span class="at">show_separators =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">title_font_size =</span> <span class="dv">13</span>, <span class="at">tick_font_size =</span> <span class="dv">12</span>) {</span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> viridisLite<span class="sc">::</span><span class="fu">mako</span>(<span class="fu">length</span>(brks) <span class="sc">-</span> <span class="dv">1</span>, <span class="at">begin =</span> begin, <span class="at">end =</span> end, <span class="at">direction =</span> direction)</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>  <span class="co"># invisible heatmap solely to carry the colorbar</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>    plotly<span class="sc">::</span><span class="fu">add_heatmap</span>(</span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>      <span class="at">z =</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="fu">min</span>(brks), <span class="fu">max</span>(brks), <span class="at">length.out =</span> <span class="dv">2</span>), <span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>      <span class="at">showscale =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>      <span class="at">colors =</span> cols,</span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>      <span class="at">hoverinfo =</span> <span class="st">"skip"</span>,</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>      <span class="at">opacity =</span> <span class="dv">0</span>,</span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>      <span class="at">xaxis =</span> <span class="st">"x2"</span>, <span class="at">yaxis =</span> <span class="st">"y2"</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>    plotly<span class="sc">::</span><span class="fu">layout</span>(</span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>      <span class="at">xaxis2 =</span> <span class="fu">list</span>(<span class="at">visible =</span> <span class="cn">FALSE</span>, <span class="at">domain =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.001</span>), <span class="at">anchor =</span> <span class="st">"y2"</span>, <span class="at">overlaying =</span> <span class="st">"x"</span>),</span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>      <span class="at">yaxis2 =</span> <span class="fu">list</span>(<span class="at">visible =</span> <span class="cn">FALSE</span>, <span class="at">domain =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.001</span>), <span class="at">anchor =</span> <span class="st">"x2"</span>, <span class="at">overlaying =</span> <span class="st">"y"</span>)</span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>  idx <span class="ot">&lt;-</span> <span class="fu">length</span>(p<span class="sc">$</span>x<span class="sc">$</span>data)</span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>  p<span class="sc">$</span>x<span class="sc">$</span>data[[idx]]<span class="sc">$</span>colorbar <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>    <span class="at">title    =</span> <span class="fu">list</span>(<span class="at">text =</span> title, <span class="at">side =</span> <span class="st">"top"</span>, <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> title_font_size)),</span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>    <span class="at">tickmode =</span> <span class="st">"array"</span>,</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>    <span class="at">tickvals =</span> brks,</span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>    <span class="at">ticktext =</span> <span class="fu">c</span>(labs, <span class="st">""</span>),  <span class="co"># empty label on rightmost edge</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>    <span class="at">ticks    =</span> <span class="cf">if</span> (show_separators) <span class="st">"outside"</span> <span class="cf">else</span> <span class="st">""</span>,</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>    <span class="at">tickcolor =</span> <span class="cf">if</span> (show_separators) <span class="st">"white"</span> <span class="cf">else</span> <span class="cn">NULL</span>,</span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>    <span class="at">tickwidth =</span> <span class="cf">if</span> (show_separators) <span class="dv">2</span> <span class="cf">else</span> <span class="cn">NULL</span>,</span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>    <span class="at">tickfont =</span> <span class="fu">list</span>(<span class="at">size =</span> tick_font_size),</span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>    <span class="at">len =</span> len,</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>    <span class="at">thickness =</span> thickness</span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (horizontal) {</span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>    p<span class="sc">$</span>x<span class="sc">$</span>data[[idx]]<span class="sc">$</span>colorbar<span class="sc">$</span>orientation <span class="ot">&lt;-</span> <span class="st">"h"</span></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>    p<span class="sc">$</span>x<span class="sc">$</span>data[[idx]]<span class="sc">$</span>colorbar<span class="sc">$</span>x <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a>    p<span class="sc">$</span>x<span class="sc">$</span>data[[idx]]<span class="sc">$</span>colorbar<span class="sc">$</span>xanchor <span class="ot">&lt;-</span> <span class="st">"center"</span></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>    p<span class="sc">$</span>x<span class="sc">$</span>data[[idx]]<span class="sc">$</span>colorbar<span class="sc">$</span>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">0.22</span></span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>  p</span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="original-graphic-redesign" class="level2">
<h2 class="anchored" data-anchor-id="original-graphic-redesign">Original Graphic Redesign</h2>
<p>This code loads U.S. state-level data on crime and poverty, then creates two interactive scatterplots using ggplot2 and plotly that visualize the relationship between property crime and violent crime, with poverty rate shown as color. The first plot includes all states, while the second excludes Washington D.C. to adjust the axis scales for better comparison. (Utilized assistance from ChatGPT<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> when creating all graphs that contain a legend tracking poverty percentage.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load state data to be used for all state-level visualizations</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">#####PLOT 1#####</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#create plot with all 3 variables (recreate original graph)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>dataviz1a <span class="ot">=</span> <span class="fu">ggplot</span>(state, <span class="fu">aes</span>(<span class="at">x=</span>crime_rate_per_100k_property,<span class="at">y=</span>crime_rate_per_100k_violent,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                              <span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">"State: "</span>, state_abbr,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"&lt;br&gt;Poverty: "</span>, poverty_rate_pct, <span class="st">"%"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"&lt;br&gt;Property Crime: "</span>, crime_rate_per_100k_property,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"&lt;br&gt;Violent Crime: "</span>, crime_rate_per_100k_violent)))<span class="sc">+</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill=</span>poverty_rate_pct), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">stroke =</span> <span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty Percentage"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"goldenrod1"</span>, <span class="st">"darkred"</span>),</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">median</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>, </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="st">"%"</span>))<span class="sc">+</span> <span class="co">#used AI to help create code to add percent symbols in legend</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2023 Property Crime vs Violent Crime by State in Relation to Poverty"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Property Crime Incidents per 100k Residents"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Violent Crime Incidents per 100k Residents"</span>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>dataviz1a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#convert previous plot to an interactive plotly plot</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">###DISPLAY THIS PLOT ON WEBSITE###</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(dataviz1a, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-de823d52c1bd8858aed8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-de823d52c1bd8858aed8">{"x":{"data":[{"x":[1906.5838021505142,1692.4252045818826,2227.2806099098616,1883.9660766612337,2326.6329002912935,2946.2315464959397,1577.7225105994289,4334.641192862151,1957.8637257847249,1076.7677251937862,1711.7972093601843,2195.1895915236023,1415.7762197989152,837.47046661977288,1626.5024575509401,1445.8193357552002,1979.2576007117043,1576.4156500198624,2436.600696715102,1140.1721284560413,2170.5422091943487,1143.5658390424455,1562.637456573063,1723.7446006084092,2134.9204248569595,986.80473111110359,1847.61460860231,2042.3716839412259,1966.6397083398178,1394.1716930881291,916.44116417769931,1474.5166772308341,2760.1589314268876,2565.732132481116,1846.8142194128357,1688.9453403569594,2183.3458976018692,2626.7327261242731,1543.0789350426176,1130.3311611169001,2242.0725199611802,1550.3884401262676,2391.0932859083905,2249.3663882476194,1643.8962189567708,1683.5255191265232,1819.7150729615855,2912.9591136687113,1237.5496006990409,1121.7064174261936,1395.4117491957122],"y":[734.24542477154546,388.94243832005998,615.11240225678125,425.81799469920912,516.39934133009422,487.32392928418182,153.54519658429669,1155.8650430356479,396.06934847706634,227.90953284737517,330.63060539056818,243.80930614338135,266.01151729152815,240.69514018748671,291.78412309659626,325.12901476625785,414.07261982209428,231.21175284800296,542.74950374408388,324.792230809871,444.38310211572241,104.17547333924664,455.54260270804951,263.719486956499,463.86824347224314,128.78909000608908,444.20433399363702,386.11079091847341,281.53167518362704,169.88655864220152,115.33079325047396,216.79415243463967,705.55262061388464,435.2922318619888,394.72253538053025,296.02233509687608,420.41785731200957,334.15553326697153,264.76500003896098,168.61898496480717,476.76072916346811,332.74666655063862,638.29467778593357,411.24401585257937,232.9321123293972,242.42464573692203,215.14709698145381,360.4944655491957,297.38003419075261,255.24399868705831,180.2906223193969],"text":["State: AK<br>Poverty: 10.3656334910073%<br>Property Crime: 1906.58380215051<br>Violent Crime: 734.245424771545","State: AL<br>Poverty: 15.5853878749139%<br>Property Crime: 1692.42520458188<br>Violent Crime: 388.94243832006","State: AR<br>Poverty: 15.6566425912592%<br>Property Crime: 2227.28060990986<br>Violent Crime: 615.112402256781","State: AZ<br>Poverty: 12.4470984773572%<br>Property Crime: 1883.96607666123<br>Violent Crime: 425.817994699209","State: CA<br>Poverty: 11.9966658026944%<br>Property Crime: 2326.63290029129<br>Violent Crime: 516.399341330094","State: CO<br>Poverty: 9.31902685963835%<br>Property Crime: 2946.23154649594<br>Violent Crime: 487.323929284182","State: CT<br>Poverty: 10.279072514333%<br>Property Crime: 1577.72251059943<br>Violent Crime: 153.545196584297","State: DC<br>Poverty: 14.0225856817741%<br>Property Crime: 4334.64119286215<br>Violent Crime: 1155.86504303565","State: DE<br>Poverty: 10.5287669981391%<br>Property Crime: 1957.86372578472<br>Violent Crime: 396.069348477066","State: FL<br>Poverty: 12.3287514690964%<br>Property Crime: 1076.76772519379<br>Violent Crime: 227.909532847375","State: GA<br>Poverty: 13.5744049504526%<br>Property Crime: 1711.79720936018<br>Violent Crime: 330.630605390568","State: HI<br>Poverty: 10.1481410507589%<br>Property Crime: 2195.1895915236<br>Violent Crime: 243.809306143381","State: IA<br>Poverty: 11.2982079152821%<br>Property Crime: 1415.77621979892<br>Violent Crime: 266.011517291528","State: ID<br>Poverty: 10.1099994674413%<br>Property Crime: 837.470466619773<br>Violent Crime: 240.695140187487","State: IL<br>Poverty: 11.6279318096971%<br>Property Crime: 1626.50245755094<br>Violent Crime: 291.784123096596","State: IN<br>Poverty: 12.3107804326873%<br>Property Crime: 1445.8193357552<br>Violent Crime: 325.129014766258","State: KS<br>Poverty: 11.1979468632458%<br>Property Crime: 1979.2576007117<br>Violent Crime: 414.072619822094","State: KY<br>Poverty: 16.368982517828%<br>Property Crime: 1576.41565001986<br>Violent Crime: 231.211752848003","State: LA<br>Poverty: 18.8876691473407%<br>Property Crime: 2436.6006967151<br>Violent Crime: 542.749503744084","State: MA<br>Poverty: 10.4231744216984%<br>Property Crime: 1140.17212845604<br>Violent Crime: 324.792230809871","State: MD<br>Poverty: 9.49234252516878%<br>Property Crime: 2170.54220919435<br>Violent Crime: 444.383102115722","State: ME<br>Poverty: 10.3628242717028%<br>Property Crime: 1143.56583904245<br>Violent Crime: 104.175473339247","State: MI<br>Poverty: 13.5005339708761%<br>Property Crime: 1562.63745657306<br>Violent Crime: 455.54260270805","State: MN<br>Poverty: 9.2667659556062%<br>Property Crime: 1723.74460060841<br>Violent Crime: 263.719486956499","State: MO<br>Poverty: 11.951723143389%<br>Property Crime: 2134.92042485696<br>Violent Crime: 463.868243472243","State: MS<br>Poverty: 18.0239160415401%<br>Property Crime: 986.804731111104<br>Violent Crime: 128.789090006089","State: MT<br>Poverty: 11.7172140248383%<br>Property Crime: 1847.61460860231<br>Violent Crime: 444.204333993637","State: NC<br>Poverty: 12.7896603053059%<br>Property Crime: 2042.37168394123<br>Violent Crime: 386.110790918473","State: ND<br>Poverty: 9.77964314851506%<br>Property Crime: 1966.63970833982<br>Violent Crime: 281.531675183627","State: NE<br>Poverty: 10.4624426794018%<br>Property Crime: 1394.17169308813<br>Violent Crime: 169.886558642202","State: NH<br>Poverty: 7.18765779306944%<br>Property Crime: 916.441164177699<br>Violent Crime: 115.330793250474","State: NJ<br>Poverty: 9.71099567349875%<br>Property Crime: 1474.51667723083<br>Violent Crime: 216.79415243464","State: NM<br>Poverty: 17.7661875287936%<br>Property Crime: 2760.15893142689<br>Violent Crime: 705.552620613885","State: NV<br>Poverty: 11.9658937825887%<br>Property Crime: 2565.73213248112<br>Violent Crime: 435.292231861989","State: NY<br>Poverty: 14.1750420813818%<br>Property Crime: 1846.81421941284<br>Violent Crime: 394.72253538053","State: OH<br>Poverty: 13.309476977862%<br>Property Crime: 1688.94534035696<br>Violent Crime: 296.022335096876","State: OK<br>Poverty: 15.9221165581774%<br>Property Crime: 2183.34589760187<br>Violent Crime: 420.41785731201","State: OR<br>Poverty: 12.1788366314317%<br>Property Crime: 2626.73272612427<br>Violent Crime: 334.155533266972","State: PA<br>Poverty: 11.9734117585306%<br>Property Crime: 1543.07893504262<br>Violent Crime: 264.765000038961","State: RI<br>Poverty: 10.8411222037766%<br>Property Crime: 1130.3311611169<br>Violent Crime: 168.618984964807","State: SC<br>Poverty: 13.8930911023307%<br>Property Crime: 2242.07251996118<br>Violent Crime: 476.760729163468","State: SD<br>Poverty: 11.7509847303652%<br>Property Crime: 1550.38844012627<br>Violent Crime: 332.746666550639","State: TN<br>Poverty: 14.0392149885544%<br>Property Crime: 2391.09328590839<br>Violent Crime: 638.294677785934","State: TX<br>Poverty: 13.6731726286092%<br>Property Crime: 2249.36638824762<br>Violent Crime: 411.244015852579","State: UT<br>Poverty: 9.0465566922885%<br>Property Crime: 1643.89621895677<br>Violent Crime: 232.932112329397","State: VA<br>Poverty: 10.202009210198%<br>Property Crime: 1683.52551912652<br>Violent Crime: 242.424645736922","State: VT<br>Poverty: 9.67583323990582%<br>Property Crime: 1819.71507296159<br>Violent Crime: 215.147096981454","State: WA<br>Poverty: 10.3456713755034%<br>Property Crime: 2912.95911366871<br>Violent Crime: 360.494465549196","State: WI<br>Poverty: 10.6697657395623%<br>Property Crime: 1237.54960069904<br>Violent Crime: 297.380034190753","State: WV<br>Poverty: 16.6523711186422%<br>Property Crime: 1121.70641742619<br>Violent Crime: 255.243998687058","State: WY<br>Poverty: 11.2619696407181%<br>Property Crime: 1395.41174919571<br>Violent Crime: 180.290622319397"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":["rgba(255,227,167,1)","rgba(227,150,25,1)","rgba(225,147,25,1)","rgba(255,210,108,1)","rgba(255,213,121,1)","rgba(255,236,196,1)","rgba(255,228,169,1)","rgba(255,197,57,1)","rgba(255,226,162,1)","rgba(255,211,112,1)","rgba(255,200,73,1)","rgba(255,229,173,1)","rgba(255,219,141,1)","rgba(255,229,174,1)","rgba(255,216,132,1)","rgba(255,211,112,1)","rgba(255,220,144,1)","rgba(206,120,18,1)","rgba(139,0,0,1)","rgba(255,227,165,1)","rgba(255,235,191,1)","rgba(255,227,167,1)","rgba(255,201,76,1)","rgba(255,237,197,1)","rgba(255,214,123,1)","rgba(162,54,5,1)","rgba(255,216,129,1)","rgba(255,207,98,1)","rgba(255,232,183,1)","rgba(255,226,164,1)","rgba(255,255,255,1)","rgba(255,233,185,1)","rgba(169,65,6,1)","rgba(255,214,122,1)","rgba(255,195,51,1)","rgba(255,202,82,1)","rgba(218,137,22,1)","rgba(255,212,116,1)","rgba(255,213,122,1)","rgba(255,223,154,1)","rgba(255,198,62,1)","rgba(255,215,128,1)","rgba(255,196,56,1)","rgba(255,199,70,1)","rgba(255,239,203,1)","rgba(255,229,171,1)","rgba(255,233,186,1)","rgba(255,227,167,1)","rgba(255,224,159,1)","rgba(199,109,15,1)","rgba(255,219,142,1)"],"opacity":1,"size":13.228346456692915,"symbol":"circle","line":{"width":0.75590551181102372,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1000],"y":[300],"name":"c25d5d2bfc3a17f0991dc0de8ac5cba9","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FFFFFF"],[0.003344481605351167,"#FFFFFE"],[0.0066889632107023341,"#FFFEFD"],[0.010033444816053502,"#FFFEFC"],[0.013377926421404668,"#FFFEFB"],[0.016722408026755835,"#FFFDFA"],[0.020066889632107003,"#FFFDF8"],[0.023411371237458168,"#FFFDF7"],[0.026755852842809336,"#FFFCF6"],[0.030100334448160505,"#FFFCF5"],[0.03344481605351167,"#FFFBF4"],[0.036789297658862838,"#FFFBF3"],[0.040133779264214083,"#FFFBF2"],[0.043478260869565244,"#FFFAF1"],[0.046822742474916412,"#FFFAF0"],[0.050167224080267581,"#FFFAEF"],[0.053511705685618749,"#FFF9EE"],[0.056856187290969917,"#FFF9EC"],[0.060200668896321079,"#FFF9EB"],[0.063545150501672254,"#FFF8EA"],[0.066889632107023422,"#FFF8E9"],[0.07023411371237466,"#FFF8E8"],[0.073578595317725828,"#FFF7E7"],[0.076923076923076997,"#FFF7E6"],[0.080267558528428165,"#FFF7E5"],[0.083612040133779333,"#FFF6E4"],[0.086956521739130488,"#FFF6E3"],[0.090301003344481656,"#FFF6E2"],[0.093645484949832825,"#FFF5E0"],[0.096989966555183993,"#FFF5DF"],[0.10033444816053516,"#FFF5DE"],[0.10367892976588633,"#FFF4DD"],[0.1070234113712375,"#FFF4DC"],[0.11036789297658867,"#FFF4DB"],[0.11371237458193983,"#FFF3DA"],[0.117056856187291,"#FFF3D9"],[0.12040133779264216,"#FFF2D8"],[0.12374581939799333,"#FFF2D7"],[0.12709030100334451,"#FFF2D6"],[0.13043478260869568,"#FFF1D5"],[0.13377926421404684,"#FFF1D3"],[0.13712374581939801,"#FFF1D2"],[0.14046822742474915,"#FFF0D1"],[0.14381270903010032,"#FFF0D0"],[0.14715719063545149,"#FFF0CF"],[0.15050167224080266,"#FFEFCE"],[0.15384615384615383,"#FFEFCD"],[0.157190635451505,"#FFEFCC"],[0.16053511705685616,"#FFEECB"],[0.16387959866220733,"#FFEECA"],[0.1672240802675585,"#FFEEC9"],[0.17056856187290967,"#FFEDC8"],[0.17391304347826084,"#FFEDC6"],[0.17725752508361201,"#FFEDC5"],[0.18060200668896317,"#FFECC4"],[0.18394648829431434,"#FFECC3"],[0.18729096989966551,"#FFECC2"],[0.19063545150501668,"#FFEBC1"],[0.19397993311036785,"#FFEBC0"],[0.19732441471571902,"#FFEBBF"],[0.20066889632107018,"#FFEABE"],[0.20401337792642135,"#FFEABD"],[0.20735785953177252,"#FFEABC"],[0.21070234113712366,"#FFE9BB"],[0.21404682274247483,"#FFE9BA"],[0.217391304347826,"#FFE9B8"],[0.22073578595317717,"#FFE8B7"],[0.22408026755852833,"#FFE8B6"],[0.2274247491638795,"#FFE8B5"],[0.23076923076923067,"#FFE7B4"],[0.23411371237458201,"#FFE7B3"],[0.23745819397993317,"#FFE7B2"],[0.24080267558528431,"#FFE6B1"],[0.24414715719063548,"#FFE6B0"],[0.24749163879598665,"#FFE6AF"],[0.25083612040133785,"#FFE5AE"],[0.25418060200668902,"#FFE5AD"],[0.25752508361204018,"#FFE5AB"],[0.26086956521739135,"#FFE4AA"],[0.26421404682274252,"#FFE4A9"],[0.26755852842809369,"#FFE4A8"],[0.27090301003344486,"#FFE3A7"],[0.27424749163879603,"#FFE3A6"],[0.27759197324414714,"#FFE2A5"],[0.28093645484949831,"#FFE2A4"],[0.28428093645484948,"#FFE2A3"],[0.28762541806020064,"#FFE1A2"],[0.29096989966555181,"#FFE1A1"],[0.29431438127090298,"#FFE1A0"],[0.29765886287625415,"#FFE09E"],[0.30100334448160532,"#FFE09D"],[0.30434782608695649,"#FFE09C"],[0.30769230769230765,"#FFDF9B"],[0.31103678929765882,"#FFDF9A"],[0.31438127090300999,"#FFDF99"],[0.31772575250836116,"#FFDE98"],[0.32107023411371233,"#FFDE97"],[0.3244147157190635,"#FFDE96"],[0.32775919732441466,"#FFDD95"],[0.33110367892976583,"#FFDD94"],[0.334448160535117,"#FFDD93"],[0.33779264214046817,"#FFDC91"],[0.3411371237458195,"#FFDC90"],[0.34448160535117067,"#FFDC8F"],[0.34782608695652184,"#FFDC8E"],[0.35117056856187301,"#FFDB8D"],[0.35451505016722418,"#FFDB8C"],[0.35785953177257535,"#FFDB8B"],[0.36120401337792651,"#FFDA8A"],[0.36454849498327768,"#FFDA89"],[0.36789297658862885,"#FFDA88"],[0.37123745819398002,"#FFD986"],[0.37458193979933119,"#FFD985"],[0.37792642140468236,"#FFD984"],[0.38127090301003347,"#FFD883"],[0.38461538461538464,"#FFD882"],[0.38795986622073581,"#FFD881"],[0.39130434782608697,"#FFD780"],[0.39464882943143814,"#FFD77F"],[0.39799331103678931,"#FFD77E"],[0.40133779264214048,"#FFD67C"],[0.40468227424749165,"#FFD67B"],[0.40802675585284282,"#FFD67A"],[0.41137123745819398,"#FFD579"],[0.41471571906354515,"#FFD578"],[0.41806020066889632,"#FFD577"],[0.42140468227424749,"#FFD476"],[0.42474916387959866,"#FFD475"],[0.42809364548494983,"#FFD474"],[0.43143812709030099,"#FFD372"],[0.43478260869565216,"#FFD371"],[0.43812709030100333,"#FFD370"],[0.4414715719063545,"#FFD26F"],[0.44481605351170567,"#FFD26E"],[0.44816053511705684,"#FFD26D"],[0.451505016722408,"#FFD16C"],[0.45484949832775917,"#FFD16A"],[0.45819397993311034,"#FFD169"],[0.46153846153846151,"#FFD068"],[0.46488294314381268,"#FFD067"],[0.46822742474916385,"#FFD066"],[0.47157190635451501,"#FFCF65"],[0.47491638795986618,"#FFCF63"],[0.47826086956521735,"#FFCF62"],[0.48160535117056852,"#FFCE61"],[0.48494983277591969,"#FFCE60"],[0.48829431438127086,"#FFCE5F"],[0.49163879598662202,"#FFCD5D"],[0.49498327759197319,"#FFCD5C"],[0.49832775919732436,"#FFCD5B"],[0.50167224080267547,"#FFCC5A"],[0.50501672240802664,"#FFCC59"],[0.50836120401337781,"#FFCC57"],[0.51170568561872898,"#FFCC56"],[0.51505016722408015,"#FFCB55"],[0.51839464882943131,"#FFCB54"],[0.52173913043478248,"#FFCB52"],[0.52508361204013365,"#FFCA51"],[0.52842809364548482,"#FFCA50"],[0.53177257525083599,"#FFCA4F"],[0.53511705685618738,"#FFC94D"],[0.53846153846153855,"#FFC94C"],[0.54180602006688972,"#FFC94B"],[0.54515050167224088,"#FFC849"],[0.54849498327759205,"#FFC848"],[0.55183946488294311,"#FFC847"],[0.55518394648829428,"#FFC745"],[0.55852842809364545,"#FFC744"],[0.56187290969899661,"#FFC743"],[0.56521739130434778,"#FFC641"],[0.56856187290969895,"#FFC640"],[0.57190635451505012,"#FFC63E"],[0.57525083612040129,"#FFC53D"],[0.57859531772575246,"#FFC53B"],[0.58193979933110362,"#FFC53A"],[0.58528428093645479,"#FFC438"],[0.58862876254180596,"#FFC437"],[0.59197324414715713,"#FFC435"],[0.5953177257525083,"#FFC434"],[0.59866220735785947,"#FFC332"],[0.60200668896321063,"#FFC330"],[0.6053511705685618,"#FFC32E"],[0.60869565217391319,"#FFC22D"],[0.61204013377926436,"#FFC22B"],[0.61538461538461553,"#FFC229"],[0.6187290969899667,"#FFC127"],[0.62207357859531787,"#FFC125"],[0.62541806020066903,"#FEC025"],[0.6287625418060202,"#FDBE24"],[0.63210702341137137,"#FCBC24"],[0.63545150501672254,"#FBBB23"],[0.63879598662207371,"#FAB923"],[0.64214046822742488,"#F9B823"],[0.64548494983277604,"#F8B622"],[0.64882943143812721,"#F7B522"],[0.65217391304347838,"#F6B321"],[0.65551839464882944,"#F5B221"],[0.65886287625418061,"#F4B020"],[0.66220735785953178,"#F3AF20"],[0.66555183946488294,"#F2AD20"],[0.66889632107023411,"#F1AC1F"],[0.67224080267558528,"#F0AA1F"],[0.67558528428093645,"#EFA91E"],[0.67892976588628762,"#EEA71E"],[0.68227424749163879,"#EDA61E"],[0.68561872909698995,"#ECA41D"],[0.68896321070234112,"#EBA31D"],[0.69230769230769229,"#EAA11C"],[0.69565217391304346,"#E9A01C"],[0.69899665551839463,"#E89E1C"],[0.7023411371237458,"#E79D1B"],[0.70568561872909696,"#E69B1B"],[0.70903010033444813,"#E59A1A"],[0.7123745819397993,"#E4981A"],[0.71571906354515047,"#E3971A"],[0.71906354515050164,"#E29519"],[0.72240802675585281,"#E19419"],[0.72575250836120397,"#E09218"],[0.72909698996655514,"#DF9118"],[0.73244147157190631,"#DE8F18"],[0.73578595317725748,"#DD8E17"],[0.73913043478260865,"#DC8C17"],[0.74247491638795982,"#DB8B17"],[0.74581939799331098,"#DA8916"],[0.74916387959866215,"#D98816"],[0.75250836120401332,"#D88615"],[0.75585284280936449,"#D78515"],[0.75919732441471566,"#D68315"],[0.76254180602006683,"#D58214"],[0.76588628762541799,"#D48014"],[0.76923076923076916,"#D37F14"],[0.77257525083612033,"#D27D13"],[0.7759197324414715,"#D17C13"],[0.77926421404682267,"#D07A12"],[0.78260869565217384,"#CF7912"],[0.78595317725752534,"#CE7712"],[0.78929765886287651,"#CD7611"],[0.79264214046822767,"#CC7411"],[0.79598662207357884,"#CB7311"],[0.79933110367893001,"#CA7110"],[0.80267558528428118,"#C97010"],[0.80602006688963235,"#C86E10"],[0.80936454849498352,"#C76D0F"],[0.81270903010033468,"#C66B0F"],[0.81605351170568585,"#C56A0E"],[0.81939799331103702,"#C4680E"],[0.82274247491638819,"#C3670E"],[0.82608695652173936,"#C2650D"],[0.82943143812709053,"#C1640D"],[0.83277591973244169,"#C0620D"],[0.83612040133779286,"#BE610C"],[0.83946488294314403,"#BD5F0C"],[0.8428093645484952,"#BC5E0C"],[0.84615384615384637,"#BB5C0B"],[0.84949832775919754,"#BA5B0B"],[0.8528428093645487,"#B9590B"],[0.85618729096989987,"#B8580A"],[0.85953177257525104,"#B7560A"],[0.8628762541806021,"#B6540A"],[0.86622073578595327,"#B55309"],[0.86956521739130443,"#B45109"],[0.8729096989966556,"#B35009"],[0.87625418060200677,"#B24E08"],[0.87959866220735794,"#B14D08"],[0.88294314381270911,"#B04B08"],[0.88628762541806028,"#AF4A08"],[0.88963210702341144,"#AE4807"],[0.89297658862876261,"#AD4607"],[0.89632107023411378,"#AC4507"],[0.89966555183946495,"#AB4307"],[0.90301003344481612,"#AA4206"],[0.90635451505016729,"#A94006"],[0.90969899665551845,"#A83E06"],[0.91304347826086962,"#A73D06"],[0.91638795986622079,"#A63B06"],[0.91973244147157196,"#A43905"],[0.92307692307692313,"#A33805"],[0.9264214046822743,"#A23605"],[0.92976588628762546,"#A13405"],[0.93311036789297663,"#A03305"],[0.9364548494983278,"#9F3105"],[0.93979933110367897,"#9E2F04"],[0.94314381270903014,"#9D2D04"],[0.94648829431438131,"#9C2B04"],[0.94983277591973247,"#9B2904"],[0.95317725752508364,"#9A2804"],[0.95652173913043481,"#992604"],[0.95986622073578598,"#982404"],[0.96321070234113715,"#972103"],[0.96655518394648832,"#961F03"],[0.96989966555183948,"#951D03"],[0.97324414715719065,"#941B03"],[0.97658862876254182,"#921802"],[0.97993311036789299,"#911602"],[0.98327759197324416,"#901302"],[0.98662207357859533,"#8F1002"],[0.98996655518394649,"#8E0C01"],[0.99331103678929766,"#8D0801"],[0.99665551839464883,"#8C0400"],[1,"#8B0000"]],"colorbar":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"thickness":23.039999999999996,"title":"Poverty Percentage","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickmode":"array","ticktext":["7.5%","10%","12.5%","15%","17.5%"],"tickvals":[0.02827356958451302,0.24123632587765492,0.4541990821707968,0.66716183846393884,0.88012459475708071],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":40.840182648401829,"r":7.3059360730593621,"b":37.260273972602747,"l":48.949771689497723},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"2023 Property Crime vs Violent Crime by State in Relation to Poverty","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[662.61193030765401,4509.4997291742702],"tickmode":"array","ticktext":["1000","2000","3000","4000"],"tickvals":[1000,2000,3000,4000],"categoryorder":"array","categoryarray":["1000","2000","3000","4000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Property Crime Incidents per 100k Residents","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[51.590994854426569,1208.4495215204679],"tickmode":"array","ticktext":["300","600","900","1200"],"tickvals":[300,600,900,1200],"categoryorder":"array","categoryarray":["300","600","900","1200"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Violent Crime Incidents per 100k Residents","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Poverty Percentage","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"a3111e83a50e":{"x":{},"y":{},"text":{},"fill":{},"type":"scatter"}},"cur_data":"a3111e83a50e","visdat":{"a3111e83a50e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">#####PLOT 2#####</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#create previous plot excluding the outlier data point (DC)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>dataviz1b <span class="ot">=</span> <span class="fu">ggplot</span>(state, <span class="fu">aes</span>(<span class="at">x=</span>crime_rate_per_100k_property,<span class="at">y=</span>crime_rate_per_100k_violent,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">"State: "</span>, state_abbr,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">"&lt;br&gt;Poverty: "</span>, poverty_rate_pct, <span class="st">"%"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">"&lt;br&gt;Property Crime: "</span>, crime_rate_per_100k_property,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">"&lt;br&gt;Violent Crime: "</span>, crime_rate_per_100k_violent))) <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill=</span>poverty_rate_pct), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">stroke =</span> <span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty Percentage"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"goldenrod1"</span>, <span class="st">"darkred"</span>),</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">median</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="st">"%"</span>))<span class="sc">+</span> <span class="co">#used AI to help create code to add percent symbols in legend</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">800</span>,<span class="dv">3000</span>)<span class="sc">+</span> </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">100</span>,<span class="dv">800</span>)<span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2023 Property Crime vs Violent Crime by State in Relation to Poverty</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="st">(D.C. Excluded)"</span>,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Property Crime Incidents per 100k Residents"</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Violent Crime Incidents per 100k Residents"</span>)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>dataviz1b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#convert previous plot to an interactive plotly plot</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="do">###DISPLAY THIS PLOT ON WEBSITE###</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(dataviz1b, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-bc0777b70ab0262a9fca" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-bc0777b70ab0262a9fca">{"x":{"data":[{"x":[1906.5838021505142,1692.4252045818826,2227.2806099098616,1883.9660766612337,2326.6329002912935,2946.2315464959397,1577.7225105994289,null,1957.8637257847249,1076.7677251937862,1711.7972093601843,2195.1895915236023,1415.7762197989152,837.47046661977288,1626.5024575509401,1445.8193357552002,1979.2576007117043,1576.4156500198624,2436.600696715102,1140.1721284560413,2170.5422091943487,1143.5658390424455,1562.637456573063,1723.7446006084092,2134.9204248569595,986.80473111110359,1847.61460860231,2042.3716839412259,1966.6397083398178,1394.1716930881291,916.44116417769931,1474.5166772308341,2760.1589314268876,2565.732132481116,1846.8142194128357,1688.9453403569594,2183.3458976018692,2626.7327261242731,1543.0789350426176,1130.3311611169001,2242.0725199611802,1550.3884401262676,2391.0932859083905,2249.3663882476194,1643.8962189567708,1683.5255191265232,1819.7150729615855,2912.9591136687113,1237.5496006990409,1121.7064174261936,1395.4117491957122],"y":[734.24542477154546,388.94243832005998,615.11240225678125,425.81799469920912,516.39934133009422,487.32392928418182,153.54519658429669,null,396.06934847706634,227.90953284737517,330.63060539056818,243.80930614338135,266.01151729152815,240.69514018748671,291.78412309659626,325.12901476625785,414.07261982209428,231.21175284800296,542.74950374408388,324.792230809871,444.38310211572241,104.17547333924664,455.54260270804951,263.719486956499,463.86824347224314,128.78909000608908,444.20433399363702,386.11079091847341,281.53167518362704,169.88655864220152,115.33079325047396,216.79415243463967,705.55262061388464,435.2922318619888,394.72253538053025,296.02233509687608,420.41785731200957,334.15553326697153,264.76500003896098,168.61898496480717,476.76072916346811,332.74666655063862,638.29467778593357,411.24401585257937,232.9321123293972,242.42464573692203,215.14709698145381,360.4944655491957,297.38003419075261,255.24399868705831,180.2906223193969],"text":["State: AK<br>Poverty: 10.3656334910073%<br>Property Crime: 1906.58380215051<br>Violent Crime: 734.245424771545","State: AL<br>Poverty: 15.5853878749139%<br>Property Crime: 1692.42520458188<br>Violent Crime: 388.94243832006","State: AR<br>Poverty: 15.6566425912592%<br>Property Crime: 2227.28060990986<br>Violent Crime: 615.112402256781","State: AZ<br>Poverty: 12.4470984773572%<br>Property Crime: 1883.96607666123<br>Violent Crime: 425.817994699209","State: CA<br>Poverty: 11.9966658026944%<br>Property Crime: 2326.63290029129<br>Violent Crime: 516.399341330094","State: CO<br>Poverty: 9.31902685963835%<br>Property Crime: 2946.23154649594<br>Violent Crime: 487.323929284182","State: CT<br>Poverty: 10.279072514333%<br>Property Crime: 1577.72251059943<br>Violent Crime: 153.545196584297","State: DC<br>Poverty: 14.0225856817741%<br>Property Crime: 4334.64119286215<br>Violent Crime: 1155.86504303565","State: DE<br>Poverty: 10.5287669981391%<br>Property Crime: 1957.86372578472<br>Violent Crime: 396.069348477066","State: FL<br>Poverty: 12.3287514690964%<br>Property Crime: 1076.76772519379<br>Violent Crime: 227.909532847375","State: GA<br>Poverty: 13.5744049504526%<br>Property Crime: 1711.79720936018<br>Violent Crime: 330.630605390568","State: HI<br>Poverty: 10.1481410507589%<br>Property Crime: 2195.1895915236<br>Violent Crime: 243.809306143381","State: IA<br>Poverty: 11.2982079152821%<br>Property Crime: 1415.77621979892<br>Violent Crime: 266.011517291528","State: ID<br>Poverty: 10.1099994674413%<br>Property Crime: 837.470466619773<br>Violent Crime: 240.695140187487","State: IL<br>Poverty: 11.6279318096971%<br>Property Crime: 1626.50245755094<br>Violent Crime: 291.784123096596","State: IN<br>Poverty: 12.3107804326873%<br>Property Crime: 1445.8193357552<br>Violent Crime: 325.129014766258","State: KS<br>Poverty: 11.1979468632458%<br>Property Crime: 1979.2576007117<br>Violent Crime: 414.072619822094","State: KY<br>Poverty: 16.368982517828%<br>Property Crime: 1576.41565001986<br>Violent Crime: 231.211752848003","State: LA<br>Poverty: 18.8876691473407%<br>Property Crime: 2436.6006967151<br>Violent Crime: 542.749503744084","State: MA<br>Poverty: 10.4231744216984%<br>Property Crime: 1140.17212845604<br>Violent Crime: 324.792230809871","State: MD<br>Poverty: 9.49234252516878%<br>Property Crime: 2170.54220919435<br>Violent Crime: 444.383102115722","State: ME<br>Poverty: 10.3628242717028%<br>Property Crime: 1143.56583904245<br>Violent Crime: 104.175473339247","State: MI<br>Poverty: 13.5005339708761%<br>Property Crime: 1562.63745657306<br>Violent Crime: 455.54260270805","State: MN<br>Poverty: 9.2667659556062%<br>Property Crime: 1723.74460060841<br>Violent Crime: 263.719486956499","State: MO<br>Poverty: 11.951723143389%<br>Property Crime: 2134.92042485696<br>Violent Crime: 463.868243472243","State: MS<br>Poverty: 18.0239160415401%<br>Property Crime: 986.804731111104<br>Violent Crime: 128.789090006089","State: MT<br>Poverty: 11.7172140248383%<br>Property Crime: 1847.61460860231<br>Violent Crime: 444.204333993637","State: NC<br>Poverty: 12.7896603053059%<br>Property Crime: 2042.37168394123<br>Violent Crime: 386.110790918473","State: ND<br>Poverty: 9.77964314851506%<br>Property Crime: 1966.63970833982<br>Violent Crime: 281.531675183627","State: NE<br>Poverty: 10.4624426794018%<br>Property Crime: 1394.17169308813<br>Violent Crime: 169.886558642202","State: NH<br>Poverty: 7.18765779306944%<br>Property Crime: 916.441164177699<br>Violent Crime: 115.330793250474","State: NJ<br>Poverty: 9.71099567349875%<br>Property Crime: 1474.51667723083<br>Violent Crime: 216.79415243464","State: NM<br>Poverty: 17.7661875287936%<br>Property Crime: 2760.15893142689<br>Violent Crime: 705.552620613885","State: NV<br>Poverty: 11.9658937825887%<br>Property Crime: 2565.73213248112<br>Violent Crime: 435.292231861989","State: NY<br>Poverty: 14.1750420813818%<br>Property Crime: 1846.81421941284<br>Violent Crime: 394.72253538053","State: OH<br>Poverty: 13.309476977862%<br>Property Crime: 1688.94534035696<br>Violent Crime: 296.022335096876","State: OK<br>Poverty: 15.9221165581774%<br>Property Crime: 2183.34589760187<br>Violent Crime: 420.41785731201","State: OR<br>Poverty: 12.1788366314317%<br>Property Crime: 2626.73272612427<br>Violent Crime: 334.155533266972","State: PA<br>Poverty: 11.9734117585306%<br>Property Crime: 1543.07893504262<br>Violent Crime: 264.765000038961","State: RI<br>Poverty: 10.8411222037766%<br>Property Crime: 1130.3311611169<br>Violent Crime: 168.618984964807","State: SC<br>Poverty: 13.8930911023307%<br>Property Crime: 2242.07251996118<br>Violent Crime: 476.760729163468","State: SD<br>Poverty: 11.7509847303652%<br>Property Crime: 1550.38844012627<br>Violent Crime: 332.746666550639","State: TN<br>Poverty: 14.0392149885544%<br>Property Crime: 2391.09328590839<br>Violent Crime: 638.294677785934","State: TX<br>Poverty: 13.6731726286092%<br>Property Crime: 2249.36638824762<br>Violent Crime: 411.244015852579","State: UT<br>Poverty: 9.0465566922885%<br>Property Crime: 1643.89621895677<br>Violent Crime: 232.932112329397","State: VA<br>Poverty: 10.202009210198%<br>Property Crime: 1683.52551912652<br>Violent Crime: 242.424645736922","State: VT<br>Poverty: 9.67583323990582%<br>Property Crime: 1819.71507296159<br>Violent Crime: 215.147096981454","State: WA<br>Poverty: 10.3456713755034%<br>Property Crime: 2912.95911366871<br>Violent Crime: 360.494465549196","State: WI<br>Poverty: 10.6697657395623%<br>Property Crime: 1237.54960069904<br>Violent Crime: 297.380034190753","State: WV<br>Poverty: 16.6523711186422%<br>Property Crime: 1121.70641742619<br>Violent Crime: 255.243998687058","State: WY<br>Poverty: 11.2619696407181%<br>Property Crime: 1395.41174919571<br>Violent Crime: 180.290622319397"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":["rgba(255,227,167,1)","rgba(227,150,25,1)","rgba(225,147,25,1)","rgba(255,210,108,1)","rgba(255,213,121,1)","rgba(255,236,196,1)","rgba(255,228,169,1)","rgba(255,197,57,1)","rgba(255,226,162,1)","rgba(255,211,112,1)","rgba(255,200,73,1)","rgba(255,229,173,1)","rgba(255,219,141,1)","rgba(255,229,174,1)","rgba(255,216,132,1)","rgba(255,211,112,1)","rgba(255,220,144,1)","rgba(206,120,18,1)","rgba(139,0,0,1)","rgba(255,227,165,1)","rgba(255,235,191,1)","rgba(255,227,167,1)","rgba(255,201,76,1)","rgba(255,237,197,1)","rgba(255,214,123,1)","rgba(162,54,5,1)","rgba(255,216,129,1)","rgba(255,207,98,1)","rgba(255,232,183,1)","rgba(255,226,164,1)","rgba(255,255,255,1)","rgba(255,233,185,1)","rgba(169,65,6,1)","rgba(255,214,122,1)","rgba(255,195,51,1)","rgba(255,202,82,1)","rgba(218,137,22,1)","rgba(255,212,116,1)","rgba(255,213,122,1)","rgba(255,223,154,1)","rgba(255,198,62,1)","rgba(255,215,128,1)","rgba(255,196,56,1)","rgba(255,199,70,1)","rgba(255,239,203,1)","rgba(255,229,171,1)","rgba(255,233,186,1)","rgba(255,227,167,1)","rgba(255,224,159,1)","rgba(199,109,15,1)","rgba(255,219,142,1)"],"opacity":1,"size":13.228346456692915,"symbol":"circle","line":{"width":0.75590551181102372,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1000],"y":[200],"name":"c25d5d2bfc3a17f0991dc0de8ac5cba9","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FFFFFF"],[0.003344481605351167,"#FFFFFE"],[0.0066889632107023341,"#FFFEFD"],[0.010033444816053502,"#FFFEFC"],[0.013377926421404668,"#FFFEFB"],[0.016722408026755835,"#FFFDFA"],[0.020066889632107003,"#FFFDF8"],[0.023411371237458168,"#FFFDF7"],[0.026755852842809336,"#FFFCF6"],[0.030100334448160505,"#FFFCF5"],[0.03344481605351167,"#FFFBF4"],[0.036789297658862838,"#FFFBF3"],[0.040133779264214083,"#FFFBF2"],[0.043478260869565244,"#FFFAF1"],[0.046822742474916412,"#FFFAF0"],[0.050167224080267581,"#FFFAEF"],[0.053511705685618749,"#FFF9EE"],[0.056856187290969917,"#FFF9EC"],[0.060200668896321079,"#FFF9EB"],[0.063545150501672254,"#FFF8EA"],[0.066889632107023422,"#FFF8E9"],[0.07023411371237466,"#FFF8E8"],[0.073578595317725828,"#FFF7E7"],[0.076923076923076997,"#FFF7E6"],[0.080267558528428165,"#FFF7E5"],[0.083612040133779333,"#FFF6E4"],[0.086956521739130488,"#FFF6E3"],[0.090301003344481656,"#FFF6E2"],[0.093645484949832825,"#FFF5E0"],[0.096989966555183993,"#FFF5DF"],[0.10033444816053516,"#FFF5DE"],[0.10367892976588633,"#FFF4DD"],[0.1070234113712375,"#FFF4DC"],[0.11036789297658867,"#FFF4DB"],[0.11371237458193983,"#FFF3DA"],[0.117056856187291,"#FFF3D9"],[0.12040133779264216,"#FFF2D8"],[0.12374581939799333,"#FFF2D7"],[0.12709030100334451,"#FFF2D6"],[0.13043478260869568,"#FFF1D5"],[0.13377926421404684,"#FFF1D3"],[0.13712374581939801,"#FFF1D2"],[0.14046822742474915,"#FFF0D1"],[0.14381270903010032,"#FFF0D0"],[0.14715719063545149,"#FFF0CF"],[0.15050167224080266,"#FFEFCE"],[0.15384615384615383,"#FFEFCD"],[0.157190635451505,"#FFEFCC"],[0.16053511705685616,"#FFEECB"],[0.16387959866220733,"#FFEECA"],[0.1672240802675585,"#FFEEC9"],[0.17056856187290967,"#FFEDC8"],[0.17391304347826084,"#FFEDC6"],[0.17725752508361201,"#FFEDC5"],[0.18060200668896317,"#FFECC4"],[0.18394648829431434,"#FFECC3"],[0.18729096989966551,"#FFECC2"],[0.19063545150501668,"#FFEBC1"],[0.19397993311036785,"#FFEBC0"],[0.19732441471571902,"#FFEBBF"],[0.20066889632107018,"#FFEABE"],[0.20401337792642135,"#FFEABD"],[0.20735785953177252,"#FFEABC"],[0.21070234113712366,"#FFE9BB"],[0.21404682274247483,"#FFE9BA"],[0.217391304347826,"#FFE9B8"],[0.22073578595317717,"#FFE8B7"],[0.22408026755852833,"#FFE8B6"],[0.2274247491638795,"#FFE8B5"],[0.23076923076923067,"#FFE7B4"],[0.23411371237458201,"#FFE7B3"],[0.23745819397993317,"#FFE7B2"],[0.24080267558528431,"#FFE6B1"],[0.24414715719063548,"#FFE6B0"],[0.24749163879598665,"#FFE6AF"],[0.25083612040133785,"#FFE5AE"],[0.25418060200668902,"#FFE5AD"],[0.25752508361204018,"#FFE5AB"],[0.26086956521739135,"#FFE4AA"],[0.26421404682274252,"#FFE4A9"],[0.26755852842809369,"#FFE4A8"],[0.27090301003344486,"#FFE3A7"],[0.27424749163879603,"#FFE3A6"],[0.27759197324414714,"#FFE2A5"],[0.28093645484949831,"#FFE2A4"],[0.28428093645484948,"#FFE2A3"],[0.28762541806020064,"#FFE1A2"],[0.29096989966555181,"#FFE1A1"],[0.29431438127090298,"#FFE1A0"],[0.29765886287625415,"#FFE09E"],[0.30100334448160532,"#FFE09D"],[0.30434782608695649,"#FFE09C"],[0.30769230769230765,"#FFDF9B"],[0.31103678929765882,"#FFDF9A"],[0.31438127090300999,"#FFDF99"],[0.31772575250836116,"#FFDE98"],[0.32107023411371233,"#FFDE97"],[0.3244147157190635,"#FFDE96"],[0.32775919732441466,"#FFDD95"],[0.33110367892976583,"#FFDD94"],[0.334448160535117,"#FFDD93"],[0.33779264214046817,"#FFDC91"],[0.3411371237458195,"#FFDC90"],[0.34448160535117067,"#FFDC8F"],[0.34782608695652184,"#FFDC8E"],[0.35117056856187301,"#FFDB8D"],[0.35451505016722418,"#FFDB8C"],[0.35785953177257535,"#FFDB8B"],[0.36120401337792651,"#FFDA8A"],[0.36454849498327768,"#FFDA89"],[0.36789297658862885,"#FFDA88"],[0.37123745819398002,"#FFD986"],[0.37458193979933119,"#FFD985"],[0.37792642140468236,"#FFD984"],[0.38127090301003347,"#FFD883"],[0.38461538461538464,"#FFD882"],[0.38795986622073581,"#FFD881"],[0.39130434782608697,"#FFD780"],[0.39464882943143814,"#FFD77F"],[0.39799331103678931,"#FFD77E"],[0.40133779264214048,"#FFD67C"],[0.40468227424749165,"#FFD67B"],[0.40802675585284282,"#FFD67A"],[0.41137123745819398,"#FFD579"],[0.41471571906354515,"#FFD578"],[0.41806020066889632,"#FFD577"],[0.42140468227424749,"#FFD476"],[0.42474916387959866,"#FFD475"],[0.42809364548494983,"#FFD474"],[0.43143812709030099,"#FFD372"],[0.43478260869565216,"#FFD371"],[0.43812709030100333,"#FFD370"],[0.4414715719063545,"#FFD26F"],[0.44481605351170567,"#FFD26E"],[0.44816053511705684,"#FFD26D"],[0.451505016722408,"#FFD16C"],[0.45484949832775917,"#FFD16A"],[0.45819397993311034,"#FFD169"],[0.46153846153846151,"#FFD068"],[0.46488294314381268,"#FFD067"],[0.46822742474916385,"#FFD066"],[0.47157190635451501,"#FFCF65"],[0.47491638795986618,"#FFCF63"],[0.47826086956521735,"#FFCF62"],[0.48160535117056852,"#FFCE61"],[0.48494983277591969,"#FFCE60"],[0.48829431438127086,"#FFCE5F"],[0.49163879598662202,"#FFCD5D"],[0.49498327759197319,"#FFCD5C"],[0.49832775919732436,"#FFCD5B"],[0.50167224080267547,"#FFCC5A"],[0.50501672240802664,"#FFCC59"],[0.50836120401337781,"#FFCC57"],[0.51170568561872898,"#FFCC56"],[0.51505016722408015,"#FFCB55"],[0.51839464882943131,"#FFCB54"],[0.52173913043478248,"#FFCB52"],[0.52508361204013365,"#FFCA51"],[0.52842809364548482,"#FFCA50"],[0.53177257525083599,"#FFCA4F"],[0.53511705685618738,"#FFC94D"],[0.53846153846153855,"#FFC94C"],[0.54180602006688972,"#FFC94B"],[0.54515050167224088,"#FFC849"],[0.54849498327759205,"#FFC848"],[0.55183946488294311,"#FFC847"],[0.55518394648829428,"#FFC745"],[0.55852842809364545,"#FFC744"],[0.56187290969899661,"#FFC743"],[0.56521739130434778,"#FFC641"],[0.56856187290969895,"#FFC640"],[0.57190635451505012,"#FFC63E"],[0.57525083612040129,"#FFC53D"],[0.57859531772575246,"#FFC53B"],[0.58193979933110362,"#FFC53A"],[0.58528428093645479,"#FFC438"],[0.58862876254180596,"#FFC437"],[0.59197324414715713,"#FFC435"],[0.5953177257525083,"#FFC434"],[0.59866220735785947,"#FFC332"],[0.60200668896321063,"#FFC330"],[0.6053511705685618,"#FFC32E"],[0.60869565217391319,"#FFC22D"],[0.61204013377926436,"#FFC22B"],[0.61538461538461553,"#FFC229"],[0.6187290969899667,"#FFC127"],[0.62207357859531787,"#FFC125"],[0.62541806020066903,"#FEC025"],[0.6287625418060202,"#FDBE24"],[0.63210702341137137,"#FCBC24"],[0.63545150501672254,"#FBBB23"],[0.63879598662207371,"#FAB923"],[0.64214046822742488,"#F9B823"],[0.64548494983277604,"#F8B622"],[0.64882943143812721,"#F7B522"],[0.65217391304347838,"#F6B321"],[0.65551839464882944,"#F5B221"],[0.65886287625418061,"#F4B020"],[0.66220735785953178,"#F3AF20"],[0.66555183946488294,"#F2AD20"],[0.66889632107023411,"#F1AC1F"],[0.67224080267558528,"#F0AA1F"],[0.67558528428093645,"#EFA91E"],[0.67892976588628762,"#EEA71E"],[0.68227424749163879,"#EDA61E"],[0.68561872909698995,"#ECA41D"],[0.68896321070234112,"#EBA31D"],[0.69230769230769229,"#EAA11C"],[0.69565217391304346,"#E9A01C"],[0.69899665551839463,"#E89E1C"],[0.7023411371237458,"#E79D1B"],[0.70568561872909696,"#E69B1B"],[0.70903010033444813,"#E59A1A"],[0.7123745819397993,"#E4981A"],[0.71571906354515047,"#E3971A"],[0.71906354515050164,"#E29519"],[0.72240802675585281,"#E19419"],[0.72575250836120397,"#E09218"],[0.72909698996655514,"#DF9118"],[0.73244147157190631,"#DE8F18"],[0.73578595317725748,"#DD8E17"],[0.73913043478260865,"#DC8C17"],[0.74247491638795982,"#DB8B17"],[0.74581939799331098,"#DA8916"],[0.74916387959866215,"#D98816"],[0.75250836120401332,"#D88615"],[0.75585284280936449,"#D78515"],[0.75919732441471566,"#D68315"],[0.76254180602006683,"#D58214"],[0.76588628762541799,"#D48014"],[0.76923076923076916,"#D37F14"],[0.77257525083612033,"#D27D13"],[0.7759197324414715,"#D17C13"],[0.77926421404682267,"#D07A12"],[0.78260869565217384,"#CF7912"],[0.78595317725752534,"#CE7712"],[0.78929765886287651,"#CD7611"],[0.79264214046822767,"#CC7411"],[0.79598662207357884,"#CB7311"],[0.79933110367893001,"#CA7110"],[0.80267558528428118,"#C97010"],[0.80602006688963235,"#C86E10"],[0.80936454849498352,"#C76D0F"],[0.81270903010033468,"#C66B0F"],[0.81605351170568585,"#C56A0E"],[0.81939799331103702,"#C4680E"],[0.82274247491638819,"#C3670E"],[0.82608695652173936,"#C2650D"],[0.82943143812709053,"#C1640D"],[0.83277591973244169,"#C0620D"],[0.83612040133779286,"#BE610C"],[0.83946488294314403,"#BD5F0C"],[0.8428093645484952,"#BC5E0C"],[0.84615384615384637,"#BB5C0B"],[0.84949832775919754,"#BA5B0B"],[0.8528428093645487,"#B9590B"],[0.85618729096989987,"#B8580A"],[0.85953177257525104,"#B7560A"],[0.8628762541806021,"#B6540A"],[0.86622073578595327,"#B55309"],[0.86956521739130443,"#B45109"],[0.8729096989966556,"#B35009"],[0.87625418060200677,"#B24E08"],[0.87959866220735794,"#B14D08"],[0.88294314381270911,"#B04B08"],[0.88628762541806028,"#AF4A08"],[0.88963210702341144,"#AE4807"],[0.89297658862876261,"#AD4607"],[0.89632107023411378,"#AC4507"],[0.89966555183946495,"#AB4307"],[0.90301003344481612,"#AA4206"],[0.90635451505016729,"#A94006"],[0.90969899665551845,"#A83E06"],[0.91304347826086962,"#A73D06"],[0.91638795986622079,"#A63B06"],[0.91973244147157196,"#A43905"],[0.92307692307692313,"#A33805"],[0.9264214046822743,"#A23605"],[0.92976588628762546,"#A13405"],[0.93311036789297663,"#A03305"],[0.9364548494983278,"#9F3105"],[0.93979933110367897,"#9E2F04"],[0.94314381270903014,"#9D2D04"],[0.94648829431438131,"#9C2B04"],[0.94983277591973247,"#9B2904"],[0.95317725752508364,"#9A2804"],[0.95652173913043481,"#992604"],[0.95986622073578598,"#982404"],[0.96321070234113715,"#972103"],[0.96655518394648832,"#961F03"],[0.96989966555183948,"#951D03"],[0.97324414715719065,"#941B03"],[0.97658862876254182,"#921802"],[0.97993311036789299,"#911602"],[0.98327759197324416,"#901302"],[0.98662207357859533,"#8F1002"],[0.98996655518394649,"#8E0C01"],[0.99331103678929766,"#8D0801"],[0.99665551839464883,"#8C0400"],[1,"#8B0000"]],"colorbar":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"thickness":23.039999999999996,"title":"Poverty Percentage","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickmode":"array","ticktext":["7.5%","10%","12.5%","15%","17.5%"],"tickvals":[0.02827356958451302,0.24123632587765492,0.4541990821707968,0.66716183846393884,0.88012459475708071],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":40.840182648401829,"r":7.3059360730593621,"b":37.260273972602747,"l":43.105022831050235},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"2023 Property Crime vs Violent Crime by State in Relation to Poverty<br />(D.C. Excluded)","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[690,3110],"tickmode":"array","ticktext":["1000","1500","2000","2500","3000"],"tickvals":[1000,1500,2000,2500,3000],"categoryorder":"array","categoryarray":["1000","1500","2000","2500","3000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Property Crime Incidents per 100k Residents","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[65,835],"tickmode":"array","ticktext":["200","400","600","800"],"tickvals":[200,400,600,800],"categoryorder":"array","categoryarray":["200","400","600","800"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Violent Crime Incidents per 100k Residents","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Poverty Percentage","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"a311248cd613":{"x":{},"y":{},"text":{},"fill":{},"type":"scatter"}},"cur_data":"a311248cd613","visdat":{"a311248cd613":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="alternative-data-visualization---using-bar-charts" class="level2">
<h2 class="anchored" data-anchor-id="alternative-data-visualization---using-bar-charts">Alternative Data Visualization - Using Bar Charts</h2>
<p>This code creates horizontal bar charts showing property and violent crime rates by U.S. state, colored by poverty percentage, first as separate plots sorted by crime rate and then displayed as a single faceted plot using long-format data to compare both crime types side-by-side.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#arrange state data by property crime rate</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>state2a <span class="ot">&lt;-</span> state <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_abbr =</span> <span class="fu">factor</span>(state_abbr, <span class="at">levels =</span> state_abbr[<span class="fu">order</span>(crime_rate_per_100k_property)]))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#plot property crime data</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state2a, <span class="fu">aes</span>(<span class="at">x=</span>crime_rate_per_100k_property,<span class="at">y=</span>state_abbr)) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="fu">aes</span>(<span class="at">fill=</span>poverty_rate_pct),<span class="at">color=</span><span class="st">'black'</span>) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Property Crime Incidents per 100k Residents"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"States"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"2023 Property Crime by State in Relation to Poverty"</span>)<span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty Percentage"</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"goldenrod1"</span>, <span class="st">"darkred"</span>),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">median</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="st">"%"</span>)) <span class="co">#used AI to help create code to add percent symbols in legend</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#arrange state data by violent crime rate</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>state2b <span class="ot">&lt;-</span> state <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_abbr =</span> <span class="fu">factor</span>(state_abbr, <span class="at">levels =</span> state_abbr[<span class="fu">order</span>(crime_rate_per_100k_violent)]))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#plot violent crime data</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state2b, <span class="fu">aes</span>(<span class="at">x=</span>crime_rate_per_100k_violent,<span class="at">y=</span>state_abbr)) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="fu">aes</span>(<span class="at">fill=</span>poverty_rate_pct),<span class="at">color=</span><span class="st">'black'</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Violent Crime Incidents per 100k Residents"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"States"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"2023 Violent Crime by State in Relation to Poverty"</span>)<span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty Percentage"</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"goldenrod1"</span>, <span class="st">"darkred"</span>),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">median</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="st">"%"</span>)) <span class="co">#used AI to help create code to add percent symbols in legend</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#convert state data to long format, so we can combine previous 2 plots into 1</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>state_long2 <span class="ot">&lt;-</span> state2a <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(crime_rate_per_100k_property, crime_rate_per_100k_violent),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"crime_type"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"crime_rate"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">crime_type =</span> <span class="fu">recode</span>(crime_type,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                             <span class="at">crime_rate_per_100k_property =</span> <span class="st">"Property Crime"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">crime_rate_per_100k_violent =</span> <span class="st">"Violent Crime"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot property crime and violent crime side by side</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">###DISPLAY THIS PLOT ON WEBSITE###</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state_long2, <span class="fu">aes</span>(<span class="at">x =</span> crime_rate, <span class="at">y =</span> state_abbr)) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="fu">aes</span>(<span class="at">fill =</span> poverty_rate_pct), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Crime Incidents per 100k Residents"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"States"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"2023 Crime by State in Relation to Poverty"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Poverty Percentage"</span>) <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty Percentage"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"goldenrod1"</span>, <span class="st">"darkred"</span>),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">median</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="st">"%"</span>))<span class="sc">+</span> <span class="co">#used AI to help create code to add percent symbols in legend</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>))<span class="sc">+</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> crime_type, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="crime-and-poverty-CODE_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="alternative-data-visualization---using-poverty-as-dependent-variable" class="level2">
<h2 class="anchored" data-anchor-id="alternative-data-visualization---using-poverty-as-dependent-variable">Alternative Data Visualization - Using Poverty as Dependent Variable</h2>
<p>This code creates a static scatterplot using faceting, then creates and displays a converted interactive scatterplot that visualizes the relationship between poverty rate and crime (property and violent) across U.S. states using plotly subplots. (Utilized assistance from ChatGPT<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> when creating “2023 Crime vs Poverty by State, Separated by Crime Type” plot using plotly.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create/load hw theme commonly used in class</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>hw <span class="ot">&lt;-</span> <span class="fu">theme_gray</span>()<span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot.subtitle=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot.caption=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="sc">-</span>.<span class="dv">5</span>),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">strip.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">strip.background=</span><span class="fu">element_rect</span>(<span class="at">fill=</span><span class="fu">rgb</span>(.<span class="dv">9</span>,.<span class="dv">95</span>,<span class="dv">1</span>),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">colour=</span><span class="fu">gray</span>(.<span class="dv">5</span>), <span class="at">linewidth =</span>.<span class="dv">2</span>),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.border=</span><span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">FALSE</span>,<span class="at">colour=</span><span class="fu">gray</span>(.<span class="dv">70</span>)),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="fl">0.10</span>,<span class="st">"cm"</span>),</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.spacing.y =</span> <span class="fu">unit</span>(<span class="fl">0.05</span>,<span class="st">"cm"</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># axis.ticks.y= element_blank()</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.ticks=</span><span class="fu">element_blank</span>(),</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">colour=</span><span class="st">"black"</span>),</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.y=</span><span class="fu">element_text</span>(<span class="at">margin=</span><span class="fu">margin</span>(<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">3</span>)),</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">margin=</span><span class="fu">margin</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>))</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#create plot with only property crime and poverty data variables</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state, <span class="fu">aes</span>(<span class="at">x=</span>crime_rate_per_100k_property,<span class="at">y=</span>poverty_rate_pct))<span class="sc">+</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">fill=</span><span class="st">"green"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">stroke =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  hw<span class="sc">+</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2023 Property Crime vs Poverty by State"</span>,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Property Crime Incidents per 100k Residents"</span>,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Poverty Percentage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create plot with only violent crime and poverty data variables</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state, <span class="fu">aes</span>(<span class="at">x=</span>crime_rate_per_100k_violent,<span class="at">y=</span>poverty_rate_pct))<span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">fill=</span><span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">stroke =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  hw<span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2023 Violent Crime vs Poverty by State"</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Violent Crime Incidents per 100k Residents"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Poverty Percentage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#convert state data to long format, so we can combine previous 2 plots into 1</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>state_long3 <span class="ot">&lt;-</span> state <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_abbr, poverty_rate_pct,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>         crime_rate_per_100k_property,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>         crime_rate_per_100k_violent) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(crime_rate_per_100k_property, crime_rate_per_100k_violent),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"crime_type"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"crime_rate"</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">crime_type =</span> <span class="fu">recode</span>(crime_type,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">crime_rate_per_100k_property =</span> <span class="st">"Property Crime"</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">crime_rate_per_100k_violent =</span> <span class="st">"Violent Crime"</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#plot property crime vs poverty and violent crime vs poverty side by side on same visualization</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state_long3, <span class="fu">aes</span>(<span class="at">x =</span> crime_rate, <span class="at">y =</span> poverty_rate_pct)) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> crime_type), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">stroke =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Property Crime"</span> <span class="ot">=</span> <span class="st">"green"</span>, <span class="st">"Violent Crime"</span> <span class="ot">=</span> <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> crime_type, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"2023 Crime vs Poverty by State, Separated by Crime Type"</span>,</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Crime Incidents per 100k Residents"</span>,</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Poverty Percentage"</span>,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Crime Type"</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  hw </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">##recreate previous plot using plotly below (used AI to help create desired conversion)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#create the Property Crime plot using plotly</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>plotly3a <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> state,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>crime_rate_per_100k_property,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>poverty_rate_pct,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"scatter"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">"markers"</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"green"</span>, <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">width =</span> <span class="fl">0.5</span>), <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="st">"State: "</span>, state_abbr,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"&lt;br&gt;Property Crime: "</span>, crime_rate_per_100k_property,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"&lt;br&gt;Poverty: "</span>, poverty_rate_pct, <span class="st">"%"</span>),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">hoverinfo =</span> <span class="st">"text"</span>,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"Property Crime"</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Property Crime vs Poverty"</span>,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Property Crime Incidents </span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="st">    per 100k Residents"</span>),</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Poverty Percentage"</span>)</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">#create the Violent Crime plot using plotly</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>plotly3b <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> state,</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>crime_rate_per_100k_violent,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>poverty_rate_pct,</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"scatter"</span>,</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">"markers"</span>,</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">width =</span> <span class="fl">0.5</span>), <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste0</span>(<span class="st">"State: "</span>, state_abbr,</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"&lt;br&gt;Violent Crime: "</span>, crime_rate_per_100k_violent,</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"&lt;br&gt;Poverty: "</span>, poverty_rate_pct, <span class="st">"%"</span>),</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">hoverinfo =</span> <span class="st">"text"</span>,</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"Violent Crime"</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Violent Crime vs Poverty"</span>,</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Violent Crime Incidents </span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a><span class="st">    per 100k Residents"</span>),</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Poverty Percentage"</span>)</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a><span class="co">#combine the two previous plots into a subplot</span></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a><span class="do">###DISPLAY THIS PLOT ON WEBSITE###</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a><span class="fu">subplot</span>(plotly3a, plotly3b, <span class="at">nrows =</span> <span class="dv">1</span>, <span class="at">shareY =</span> <span class="cn">TRUE</span>, <span class="at">titleX =</span> <span class="cn">TRUE</span>, <span class="at">titleY =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"2023 Crime vs Poverty by State, Separated by Crime Type"</span>,</span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">showlegend =</span> <span class="cn">FALSE</span></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-daf10b343b767dfe60bf" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-daf10b343b767dfe60bf">{"x":{"data":[{"x":[1906.5838021505142,1692.4252045818826,2227.2806099098616,1883.9660766612337,2326.6329002912935,2946.2315464959397,1577.7225105994289,4334.641192862151,1957.8637257847249,1076.7677251937862,1711.7972093601843,2195.1895915236023,1415.7762197989152,837.47046661977288,1626.5024575509401,1445.8193357552002,1979.2576007117043,1576.4156500198624,2436.600696715102,1140.1721284560413,2170.5422091943487,1143.5658390424455,1562.637456573063,1723.7446006084092,2134.9204248569595,986.80473111110359,1847.61460860231,2042.3716839412259,1966.6397083398178,1394.1716930881291,916.44116417769931,1474.5166772308341,2760.1589314268876,2565.732132481116,1846.8142194128357,1688.9453403569594,2183.3458976018692,2626.7327261242731,1543.0789350426176,1130.3311611169001,2242.0725199611802,1550.3884401262676,2391.0932859083905,2249.3663882476194,1643.8962189567708,1683.5255191265232,1819.7150729615855,2912.9591136687113,1237.5496006990409,1121.7064174261936,1395.4117491957122],"y":[10.365633491007287,15.5853878749139,15.656642591259171,12.447098477357219,11.996665802694432,9.3190268596383525,10.279072514332961,14.022585681774089,10.528766998139067,12.328751469096355,13.574404950452559,10.148141050758937,11.298207915282097,10.109999467441348,11.627931809697083,12.310780432687285,11.197946863245777,16.368982517827998,18.887669147340709,10.423174421698397,9.4923425251687767,10.362824271702834,13.500533970876075,9.2667659556062034,11.951723143388982,18.023916041540055,11.717214024838283,12.789660305305887,9.7796431485150617,10.462442679401757,7.1876577930694356,9.7109956734987453,17.766187528793569,11.965893782588713,14.175042081381829,13.309476977862023,15.922116558177379,12.178836631431652,11.973411758530611,10.84112220377656,13.893091102330747,11.750984730365168,14.039214988554379,13.673172628609207,9.0465566922885028,10.202009210198019,9.675833239905824,10.345671375503414,10.669765739562335,16.652371118642169,11.261969640718144],"mode":"markers","marker":{"color":"green","line":{"color":"black","width":0.5},"size":10},"text":["State: AK<br>Property Crime: 1906.58380215051<br>Poverty: 10.3656334910073%","State: AL<br>Property Crime: 1692.42520458188<br>Poverty: 15.5853878749139%","State: AR<br>Property Crime: 2227.28060990986<br>Poverty: 15.6566425912592%","State: AZ<br>Property Crime: 1883.96607666123<br>Poverty: 12.4470984773572%","State: CA<br>Property Crime: 2326.63290029129<br>Poverty: 11.9966658026944%","State: CO<br>Property Crime: 2946.23154649594<br>Poverty: 9.31902685963835%","State: CT<br>Property Crime: 1577.72251059943<br>Poverty: 10.279072514333%","State: DC<br>Property Crime: 4334.64119286215<br>Poverty: 14.0225856817741%","State: DE<br>Property Crime: 1957.86372578472<br>Poverty: 10.5287669981391%","State: FL<br>Property Crime: 1076.76772519379<br>Poverty: 12.3287514690964%","State: GA<br>Property Crime: 1711.79720936018<br>Poverty: 13.5744049504526%","State: HI<br>Property Crime: 2195.1895915236<br>Poverty: 10.1481410507589%","State: IA<br>Property Crime: 1415.77621979892<br>Poverty: 11.2982079152821%","State: ID<br>Property Crime: 837.470466619773<br>Poverty: 10.1099994674413%","State: IL<br>Property Crime: 1626.50245755094<br>Poverty: 11.6279318096971%","State: IN<br>Property Crime: 1445.8193357552<br>Poverty: 12.3107804326873%","State: KS<br>Property Crime: 1979.2576007117<br>Poverty: 11.1979468632458%","State: KY<br>Property Crime: 1576.41565001986<br>Poverty: 16.368982517828%","State: LA<br>Property Crime: 2436.6006967151<br>Poverty: 18.8876691473407%","State: MA<br>Property Crime: 1140.17212845604<br>Poverty: 10.4231744216984%","State: MD<br>Property Crime: 2170.54220919435<br>Poverty: 9.49234252516878%","State: ME<br>Property Crime: 1143.56583904245<br>Poverty: 10.3628242717028%","State: MI<br>Property Crime: 1562.63745657306<br>Poverty: 13.5005339708761%","State: MN<br>Property Crime: 1723.74460060841<br>Poverty: 9.2667659556062%","State: MO<br>Property Crime: 2134.92042485696<br>Poverty: 11.951723143389%","State: MS<br>Property Crime: 986.804731111104<br>Poverty: 18.0239160415401%","State: MT<br>Property Crime: 1847.61460860231<br>Poverty: 11.7172140248383%","State: NC<br>Property Crime: 2042.37168394123<br>Poverty: 12.7896603053059%","State: ND<br>Property Crime: 1966.63970833982<br>Poverty: 9.77964314851506%","State: NE<br>Property Crime: 1394.17169308813<br>Poverty: 10.4624426794018%","State: NH<br>Property Crime: 916.441164177699<br>Poverty: 7.18765779306944%","State: NJ<br>Property Crime: 1474.51667723083<br>Poverty: 9.71099567349875%","State: NM<br>Property Crime: 2760.15893142689<br>Poverty: 17.7661875287936%","State: NV<br>Property Crime: 2565.73213248112<br>Poverty: 11.9658937825887%","State: NY<br>Property Crime: 1846.81421941284<br>Poverty: 14.1750420813818%","State: OH<br>Property Crime: 1688.94534035696<br>Poverty: 13.309476977862%","State: OK<br>Property Crime: 2183.34589760187<br>Poverty: 15.9221165581774%","State: OR<br>Property Crime: 2626.73272612427<br>Poverty: 12.1788366314317%","State: PA<br>Property Crime: 1543.07893504262<br>Poverty: 11.9734117585306%","State: RI<br>Property Crime: 1130.3311611169<br>Poverty: 10.8411222037766%","State: SC<br>Property Crime: 2242.07251996118<br>Poverty: 13.8930911023307%","State: SD<br>Property Crime: 1550.38844012627<br>Poverty: 11.7509847303652%","State: TN<br>Property Crime: 2391.09328590839<br>Poverty: 14.0392149885544%","State: TX<br>Property Crime: 2249.36638824762<br>Poverty: 13.6731726286092%","State: UT<br>Property Crime: 1643.89621895677<br>Poverty: 9.0465566922885%","State: VA<br>Property Crime: 1683.52551912652<br>Poverty: 10.202009210198%","State: VT<br>Property Crime: 1819.71507296159<br>Poverty: 9.67583323990582%","State: WA<br>Property Crime: 2912.95911366871<br>Poverty: 10.3456713755034%","State: WI<br>Property Crime: 1237.54960069904<br>Poverty: 10.6697657395623%","State: WV<br>Property Crime: 1121.70641742619<br>Poverty: 16.6523711186422%","State: WY<br>Property Crime: 1395.41174919571<br>Poverty: 11.2619696407181%"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"name":"Property Crime","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[734.24542477154546,388.94243832005998,615.11240225678125,425.81799469920912,516.39934133009422,487.32392928418182,153.54519658429669,1155.8650430356479,396.06934847706634,227.90953284737517,330.63060539056818,243.80930614338135,266.01151729152815,240.69514018748671,291.78412309659626,325.12901476625785,414.07261982209428,231.21175284800296,542.74950374408388,324.792230809871,444.38310211572241,104.17547333924664,455.54260270804951,263.719486956499,463.86824347224314,128.78909000608908,444.20433399363702,386.11079091847341,281.53167518362704,169.88655864220152,115.33079325047396,216.79415243463967,705.55262061388464,435.2922318619888,394.72253538053025,296.02233509687608,420.41785731200957,334.15553326697153,264.76500003896098,168.61898496480717,476.76072916346811,332.74666655063862,638.29467778593357,411.24401585257937,232.9321123293972,242.42464573692203,215.14709698145381,360.4944655491957,297.38003419075261,255.24399868705831,180.2906223193969],"y":[10.365633491007287,15.5853878749139,15.656642591259171,12.447098477357219,11.996665802694432,9.3190268596383525,10.279072514332961,14.022585681774089,10.528766998139067,12.328751469096355,13.574404950452559,10.148141050758937,11.298207915282097,10.109999467441348,11.627931809697083,12.310780432687285,11.197946863245777,16.368982517827998,18.887669147340709,10.423174421698397,9.4923425251687767,10.362824271702834,13.500533970876075,9.2667659556062034,11.951723143388982,18.023916041540055,11.717214024838283,12.789660305305887,9.7796431485150617,10.462442679401757,7.1876577930694356,9.7109956734987453,17.766187528793569,11.965893782588713,14.175042081381829,13.309476977862023,15.922116558177379,12.178836631431652,11.973411758530611,10.84112220377656,13.893091102330747,11.750984730365168,14.039214988554379,13.673172628609207,9.0465566922885028,10.202009210198019,9.675833239905824,10.345671375503414,10.669765739562335,16.652371118642169,11.261969640718144],"mode":"markers","marker":{"color":"blue","line":{"color":"black","width":0.5},"size":10},"text":["State: AK<br>Violent Crime: 734.245424771545<br>Poverty: 10.3656334910073%","State: AL<br>Violent Crime: 388.94243832006<br>Poverty: 15.5853878749139%","State: AR<br>Violent Crime: 615.112402256781<br>Poverty: 15.6566425912592%","State: AZ<br>Violent Crime: 425.817994699209<br>Poverty: 12.4470984773572%","State: CA<br>Violent Crime: 516.399341330094<br>Poverty: 11.9966658026944%","State: CO<br>Violent Crime: 487.323929284182<br>Poverty: 9.31902685963835%","State: CT<br>Violent Crime: 153.545196584297<br>Poverty: 10.279072514333%","State: DC<br>Violent Crime: 1155.86504303565<br>Poverty: 14.0225856817741%","State: DE<br>Violent Crime: 396.069348477066<br>Poverty: 10.5287669981391%","State: FL<br>Violent Crime: 227.909532847375<br>Poverty: 12.3287514690964%","State: GA<br>Violent Crime: 330.630605390568<br>Poverty: 13.5744049504526%","State: HI<br>Violent Crime: 243.809306143381<br>Poverty: 10.1481410507589%","State: IA<br>Violent Crime: 266.011517291528<br>Poverty: 11.2982079152821%","State: ID<br>Violent Crime: 240.695140187487<br>Poverty: 10.1099994674413%","State: IL<br>Violent Crime: 291.784123096596<br>Poverty: 11.6279318096971%","State: IN<br>Violent Crime: 325.129014766258<br>Poverty: 12.3107804326873%","State: KS<br>Violent Crime: 414.072619822094<br>Poverty: 11.1979468632458%","State: KY<br>Violent Crime: 231.211752848003<br>Poverty: 16.368982517828%","State: LA<br>Violent Crime: 542.749503744084<br>Poverty: 18.8876691473407%","State: MA<br>Violent Crime: 324.792230809871<br>Poverty: 10.4231744216984%","State: MD<br>Violent Crime: 444.383102115722<br>Poverty: 9.49234252516878%","State: ME<br>Violent Crime: 104.175473339247<br>Poverty: 10.3628242717028%","State: MI<br>Violent Crime: 455.54260270805<br>Poverty: 13.5005339708761%","State: MN<br>Violent Crime: 263.719486956499<br>Poverty: 9.2667659556062%","State: MO<br>Violent Crime: 463.868243472243<br>Poverty: 11.951723143389%","State: MS<br>Violent Crime: 128.789090006089<br>Poverty: 18.0239160415401%","State: MT<br>Violent Crime: 444.204333993637<br>Poverty: 11.7172140248383%","State: NC<br>Violent Crime: 386.110790918473<br>Poverty: 12.7896603053059%","State: ND<br>Violent Crime: 281.531675183627<br>Poverty: 9.77964314851506%","State: NE<br>Violent Crime: 169.886558642202<br>Poverty: 10.4624426794018%","State: NH<br>Violent Crime: 115.330793250474<br>Poverty: 7.18765779306944%","State: NJ<br>Violent Crime: 216.79415243464<br>Poverty: 9.71099567349875%","State: NM<br>Violent Crime: 705.552620613885<br>Poverty: 17.7661875287936%","State: NV<br>Violent Crime: 435.292231861989<br>Poverty: 11.9658937825887%","State: NY<br>Violent Crime: 394.72253538053<br>Poverty: 14.1750420813818%","State: OH<br>Violent Crime: 296.022335096876<br>Poverty: 13.309476977862%","State: OK<br>Violent Crime: 420.41785731201<br>Poverty: 15.9221165581774%","State: OR<br>Violent Crime: 334.155533266972<br>Poverty: 12.1788366314317%","State: PA<br>Violent Crime: 264.765000038961<br>Poverty: 11.9734117585306%","State: RI<br>Violent Crime: 168.618984964807<br>Poverty: 10.8411222037766%","State: SC<br>Violent Crime: 476.760729163468<br>Poverty: 13.8930911023307%","State: SD<br>Violent Crime: 332.746666550639<br>Poverty: 11.7509847303652%","State: TN<br>Violent Crime: 638.294677785934<br>Poverty: 14.0392149885544%","State: TX<br>Violent Crime: 411.244015852579<br>Poverty: 13.6731726286092%","State: UT<br>Violent Crime: 232.932112329397<br>Poverty: 9.0465566922885%","State: VA<br>Violent Crime: 242.424645736922<br>Poverty: 10.202009210198%","State: VT<br>Violent Crime: 215.147096981454<br>Poverty: 9.67583323990582%","State: WA<br>Violent Crime: 360.494465549196<br>Poverty: 10.3456713755034%","State: WI<br>Violent Crime: 297.380034190753<br>Poverty: 10.6697657395623%","State: WV<br>Violent Crime: 255.243998687058<br>Poverty: 16.6523711186422%","State: WY<br>Violent Crime: 180.290622319397<br>Poverty: 11.2619696407181%"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"name":"Violent Crime","type":"scatter","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x2","yaxis":"y","frame":null}],"layout":{"xaxis":{"domain":[0,0.47999999999999998],"automargin":true,"title":"Property Crime Incidents <br />    per 100k Residents","anchor":"y"},"xaxis2":{"domain":[0.52000000000000002,1],"automargin":true,"title":"Violent Crime Incidents <br />    per 100k Residents","anchor":"y"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Poverty Percentage","anchor":"x"},"annotations":[],"shapes":[],"images":[],"margin":{"b":40,"l":60,"t":25,"r":10},"title":"2023 Crime vs Poverty by State, Separated by Crime Type","hovermode":"closest","showlegend":false},"attrs":{"a31117aa5a5b":{"x":{},"y":{},"mode":"markers","marker":{"color":"green","line":{"color":"black","width":0.5},"size":10},"text":{},"hoverinfo":"text","name":"Property Crime","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"a31131121880":{"x":{},"y":{},"mode":"markers","marker":{"color":"blue","line":{"color":"black","width":0.5},"size":10},"text":{},"hoverinfo":"text","name":"Violent Crime","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="comparing-crime-and-poverty-by-state-on-usa-map" class="level2">
<h2 class="anchored" data-anchor-id="comparing-crime-and-poverty-by-state-on-usa-map">Comparing Crime and Poverty by State on USA Map</h2>
<p>This code prepares and joins U.S. state-level geographic and crime/poverty data, then creates three choropleth maps (for poverty, property crime, and violent crime) using ggplot2, and finally combines them into a single vertically-faceted visualization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get USA map data and save as tibble</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>usa_tbl <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>) <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#take state data and convert all state names to lower case</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>state4 <span class="ot">&lt;-</span> state <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_name =</span> <span class="fu">str_to_lower</span>(state_name))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#join USE map data and state data</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>usa_state_data <span class="ot">&lt;-</span> usa_tbl <span class="sc">%&gt;%</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(state4, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"region"</span><span class="ot">=</span> <span class="st">"state_name"</span>))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#create USA map containing poverty data</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>dataviz4a <span class="ot">=</span> <span class="fu">ggplot</span>(usa_state_data, <span class="fu">aes</span>(long, lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">map_id =</span> region),</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">map =</span> usa_tbl,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray80"</span>, <span class="at">fill =</span> <span class="st">"gray30"</span>, <span class="at">size =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_map</span>(<span class="st">"ortho"</span>, <span class="at">orientation =</span> <span class="fu">c</span>(<span class="dv">39</span>, <span class="sc">-</span><span class="dv">98</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>( <span class="at">fill =</span> poverty_rate_pct), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty Percentage"</span>,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"darkseagreen2"</span>, <span class="st">"steelblue"</span>, <span class="st">"midnightblue"</span>),</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">median</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(state<span class="sc">$</span>poverty_rate_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>, </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="st">"%"</span>)) <span class="sc">+</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2023 Poverty Percentage by State"</span>,<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>, <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>),</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>dataviz4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create USA map containing property crime data</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>dataviz4b <span class="ot">=</span> <span class="fu">ggplot</span>(usa_state_data, <span class="fu">aes</span>(long, lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">map_id =</span> region),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">map =</span> usa_tbl,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray80"</span>, <span class="at">fill =</span> <span class="st">"gray30"</span>, <span class="at">size =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_map</span>(<span class="st">"ortho"</span>, <span class="at">orientation =</span> <span class="fu">c</span>(<span class="dv">39</span>, <span class="sc">-</span><span class="dv">98</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>( <span class="at">fill =</span> crime_rate_per_100k_property), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Property Crime Incidents per 100k Residents"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"darkseagreen2"</span>, <span class="st">"steelblue"</span>, <span class="st">"midnightblue"</span>),</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(state<span class="sc">$</span>crime_rate_per_100k_property, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>) <span class="sc">+</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2023 Property Crime Incidents per 100,000 Residents by State"</span>,<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>, <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>),</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>dataviz4b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create USA map containing violent crime data</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#DO NOT DISPLAY THIS PLOT ON WEBSITE#</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>dataviz4c <span class="ot">=</span> <span class="fu">ggplot</span>(usa_state_data, <span class="fu">aes</span>(long, lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">map_id =</span> region),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">map =</span> usa_tbl,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray80"</span>, <span class="at">fill =</span> <span class="st">"gray30"</span>, <span class="at">size =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_map</span>(<span class="st">"ortho"</span>, <span class="at">orientation =</span> <span class="fu">c</span>(<span class="dv">39</span>, <span class="sc">-</span><span class="dv">98</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>( <span class="at">fill =</span> crime_rate_per_100k_violent), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Violent Crime Incidents per 100k Residents"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">c</span>(<span class="st">"darkseagreen2"</span>, <span class="st">"steelblue"</span>, <span class="st">"midnightblue"</span>),</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(state<span class="sc">$</span>crime_rate_per_100k_violent, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))),</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"grey50"</span>) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2023 Violent Crime Incidents per 100,000 Residents by State"</span>,<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>, <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"darkblue"</span>, <span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>),</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>dataviz4c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#combine the previous 3 plots</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="do">###DISPLAY THIS PLOT ON WEBSITE###</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>dataviz4 <span class="ot">&lt;-</span> dataviz4a <span class="sc">/</span> dataviz4b <span class="sc">/</span> dataviz4c</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>dataviz4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="crime-and-poverty-CODE_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comparing-crime-and-poverty-by-u.s.-county" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="comparing-crime-and-poverty-by-u.s.-county">Comparing Crime and Poverty by U.S. County</h2>
<p>This code joins the county metrics to U.S. county polygons via FIPS (using the hlper function above), builds three choropleths (poverty rate, property crime per 100k, violent crime per 100k) with percentile-based binning (also leveraging the helper function), and stacks them vertically with a unified title and captions.</p>
<div class="cell page-columns page-full" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> county</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">derive_fips</span>(df)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Join metrics to polygons</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>map_df <span class="ot">&lt;-</span> counties_poly <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    df <span class="sc">%&gt;%</span> <span class="fu">select</span>(fips, <span class="fu">all_of</span>(county_metric_cols)),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"fips"</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Limits for each metric - 95th percentile as the upper scale limit</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>lim_pov  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fl">0.3</span>, <span class="fu">min</span>(<span class="fl">0.6</span>, <span class="fu">ceiling</span>(<span class="fu">p95</span>(map_df<span class="sc">$</span>poverty_rate) <span class="sc">*</span> <span class="dv">10</span>) <span class="sc">/</span> <span class="dv">10</span>))) </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>lim_prop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">p95</span>(map_df<span class="sc">$</span>property_crime_per_100k)) </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>lim_viol <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">p95</span>(map_df<span class="sc">$</span>violent_crime_per_100k)) </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>poverty <span class="ot">&lt;-</span> <span class="fu">build_county_map</span>(map_df) <span class="sc">+</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> poverty_rate)) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_binned_left</span>(</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> map_df<span class="sc">$</span>poverty_rate,</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">step =</span> <span class="fl">0.05</span>, </span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_cap =</span> <span class="fl">0.30</span>, <span class="at">max_cap =</span> <span class="fl">0.60</span>,</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_fmt =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>(<span class="at">accuracy =</span> <span class="dv">1</span>),</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty rate (% of residents)"</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Poverty Rate by County"</span>) <span class="sc">+</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.just =</span> <span class="st">"left"</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>property <span class="ot">&lt;-</span> <span class="fu">build_county_map</span>(map_df) <span class="sc">+</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> property_crime_per_100k)) <span class="sc">+</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_binned_left</span>(</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> map_df<span class="sc">$</span>property_crime_per_100k,</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">step =</span> <span class="dv">500</span>,  <span class="co"># Bucket width</span></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_fmt =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">","</span>),</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Property crime incidents (per 100k) residents"</span> </span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Property crime incidents per 100,000 residents"</span>) <span class="sc">+</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.just =</span> <span class="st">"left"</span></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>violent <span class="ot">&lt;-</span> <span class="fu">build_county_map</span>(map_df) <span class="sc">+</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> violent_crime_per_100k)) <span class="sc">+</span></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_binned_left</span>(</span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> map_df<span class="sc">$</span>violent_crime_per_100k,</span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">step =</span> <span class="dv">100</span>,</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_fmt =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">","</span>),</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Violent crime incidents per 100k residents"</span></span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Violent crime incidents per 100,000 residents"</span>) <span class="sc">+</span></span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.just =</span> <span class="st">"left"</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack each plot vertically</span></span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>stack_us <span class="ot">&lt;-</span></span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>  (poverty <span class="sc">/</span> property <span class="sc">/</span> violent) <span class="sc">&amp;</span></span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">10</span>)</span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>stack_us <span class="sc">+</span></span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">title   =</span> <span class="st">"Crime &amp; Poverty by U.S. County"</span>,</span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Note: Some county data are missing from the Census data</span><span class="sc">\n</span><span class="st">Source: FBI Crime Data API and data.census.gov for 2023"</span>,</span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title   =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">28</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="dv">0</span>), </span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>, </span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey30"</span>,</span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">lineheight =</span> <span class="fl">1.15</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin  =</span> <span class="fu">margin</span>(<span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">12</span>)</span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="crime-and-poverty-CODE_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img column-page" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="zooming-in-on-south-carolina" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="zooming-in-on-south-carolina">Zooming in on South Carolina</h2>
<p>This code filters the U.S. county map down to South Carolina, joins in your county metrics, builds three choropleths (poverty rate, property crime per 100k, violent crime per 100k) with binned legends, and stacks them vertically under a shared title/caption. Similar to what was done above expect filtering on SC.</p>
<div class="cell page-columns page-full" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> county</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">derive_fips</span>(df)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Build South Carolina map data only</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>sc_poly <span class="ot">&lt;-</span> counties_poly <span class="sc">%&gt;%</span> <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">"south carolina"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>sc_map <span class="ot">&lt;-</span> sc_poly <span class="sc">%&gt;%</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df <span class="sc">%&gt;%</span> <span class="fu">select</span>(fips, <span class="fu">all_of</span>(county_metric_cols)), <span class="at">by =</span> <span class="st">"fips"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>lim_pov  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fl">0.3</span>, <span class="fu">min</span>(<span class="fl">0.6</span>, <span class="fu">ceiling</span>(<span class="fu">p95</span>(sc_map<span class="sc">$</span>poverty_rate) <span class="sc">*</span> <span class="dv">10</span>) <span class="sc">/</span> <span class="dv">10</span>)))</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>lim_prop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, {x <span class="ot">&lt;-</span> <span class="fu">p95</span>(sc_map<span class="sc">$</span>property_crime_per_100k); <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.finite</span>(x)) <span class="fu">max</span>(sc_map<span class="sc">$</span>property_crime_per_100k, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="cf">else</span> x})</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>lim_viol <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, {x <span class="ot">&lt;-</span> <span class="fu">p95</span>(sc_map<span class="sc">$</span>violent_crime_per_100k);  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.finite</span>(x)) <span class="fu">max</span>(sc_map<span class="sc">$</span>violent_crime_per_100k,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="cf">else</span> x})</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>poverty_sc <span class="ot">&lt;-</span> <span class="fu">build_county_map</span>(sc_map) <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> poverty_rate)) <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_binned_left</span>(</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> sc_map<span class="sc">$</span>poverty_rate,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">step =</span> <span class="fl">0.05</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_cap =</span> <span class="fl">0.30</span>, <span class="at">max_cap =</span> <span class="fl">0.60</span>,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_fmt =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>(<span class="at">accuracy =</span> <span class="dv">1</span>),</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poverty rate (% of residents)"</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Poverty Rate by County"</span>) <span class="sc">+</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.just =</span> <span class="st">"left"</span>,</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>property_sc <span class="ot">&lt;-</span> <span class="fu">build_county_map</span>(sc_map) <span class="sc">+</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> property_crime_per_100k)) <span class="sc">+</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_binned_left</span>(</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> sc_map<span class="sc">$</span>property_crime_per_100k,</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">step =</span> <span class="dv">500</span>,</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_fmt =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">","</span>),</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Property crime incidents per 100k residents"</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Property crime incidents per 100,000 residents"</span>) <span class="sc">+</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.just =</span> <span class="st">"left"</span>,</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>violent_sc <span class="ot">&lt;-</span> <span class="fu">build_county_map</span>(sc_map) <span class="sc">+</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> violent_crime_per_100k)) <span class="sc">+</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_binned_left</span>(</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> sc_map<span class="sc">$</span>violent_crime_per_100k,</span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">step =</span> <span class="dv">200</span>,</span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">label_fmt =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">big.mark =</span> <span class="st">","</span>),</span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Violent crime incidents per 100k residents"</span></span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Violent crime incidents per 100,000 residents"</span>) <span class="sc">+</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.just =</span> <span class="st">"left"</span>,</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>, <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack the three maps</span></span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>stack_sc <span class="ot">&lt;-</span></span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>  (poverty_sc <span class="sc">/</span> property_sc <span class="sc">/</span> violent_sc) <span class="sc">&amp;</span></span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">10</span>))</span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>stack_sc <span class="sc">+</span></span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">title   =</span> <span class="st">"South Carolina by County"</span>,</span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Note: Some county data are missing from the Census data</span><span class="sc">\n</span><span class="st">Source: FBI Crime Data API and data.census.gov for 2023"</span>,</span>
<span id="cb19-76"><a href="#cb19-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb19-77"><a href="#cb19-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb19-78"><a href="#cb19-78" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title   =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">28</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb19-79"><a href="#cb19-79" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb19-80"><a href="#cb19-80" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey30"</span>,</span>
<span id="cb19-81"><a href="#cb19-81" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">lineheight =</span> <span class="fl">1.15</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>)),</span>
<span id="cb19-82"><a href="#cb19-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin  =</span> <span class="fu">margin</span>(<span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">12</span>)</span>
<span id="cb19-83"><a href="#cb19-83" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-84"><a href="#cb19-84" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="crime-and-poverty-CODE_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img column-page" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive-plot-of-south-carolina-to-look-at-individual-counties" class="level2">
<h2 class="anchored" data-anchor-id="interactive-plot-of-south-carolina-to-look-at-individual-counties">Interactive Plot of South Carolina to Look at Individual Counties</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> county</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">derive_fips</span>(df)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>sc <span class="ot">&lt;-</span> counties_poly <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">"south carolina"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(fips, poverty_rate, property_crime_per_100k, violent_crime_per_100k),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">by =</span> <span class="st">"fips"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">hover_text =</span> <span class="fu">paste0</span>(</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"County: "</span>, stringr<span class="sc">::</span><span class="fu">str_to_title</span>(subregion), <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Poverty rate: "</span>, scales<span class="sc">::</span><span class="fu">percent</span>(poverty_rate, <span class="at">accuracy =</span> <span class="fl">0.1</span>), <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Property /100k: "</span>, scales<span class="sc">::</span><span class="fu">comma</span>(property_crime_per_100k, <span class="at">accuracy =</span> <span class="dv">1</span>), <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Violent /100k: "</span>,  scales<span class="sc">::</span><span class="fu">comma</span>(violent_crime_per_100k,  <span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>step  <span class="ot">&lt;-</span> <span class="fl">0.05</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>upper <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fl">0.60</span>, <span class="fu">max</span>(<span class="fl">0.30</span>, <span class="fu">ceiling</span>(<span class="fu">p95</span>(sc<span class="sc">$</span>poverty_rate) <span class="sc">/</span> step) <span class="sc">*</span> step))</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>brks  <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, upper, <span class="at">by =</span> step)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>labs  <span class="ot">&lt;-</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">head</span>(brks, <span class="sc">-</span><span class="dv">1</span>), <span class="at">accuracy =</span> <span class="dv">1</span>), <span class="st">"–"</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>                scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">tail</span>(brks, <span class="sc">-</span><span class="dv">1</span>), <span class="at">accuracy =</span> <span class="dv">1</span>))</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>p_sc <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sc, <span class="fu">aes</span>(long, lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> poverty_rate, <span class="at">text =</span> hover_text), <span class="at">color =</span> <span class="st">"gray85"</span>, <span class="at">linewidth =</span> <span class="fl">0.1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_quickmap</span>() <span class="sc">+</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_b</span>(</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"mako"</span>, <span class="at">begin =</span> <span class="fl">0.15</span>, <span class="at">end =</span> <span class="fl">0.90</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="co"># colormap or palette</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">range</span>(brks),</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> brks,</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(labs, <span class="st">""</span>),</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">oob =</span> scales<span class="sc">::</span>squish, <span class="at">na.value =</span> <span class="st">"gray95"</span>,</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="cn">NULL</span>, <span class="at">guide =</span> <span class="st">"none"</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"South Carolina — Poverty Rate"</span>) <span class="sc">+</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a><span class="co"># --- plotly conversion + enforced title + custom colorbar ---</span></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p_sc, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> plotly<span class="sc">::</span><span class="fu">layout</span>(p, <span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"South Carolina — Poverty Rate"</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">xanchor =</span> <span class="st">"left"</span>))</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">apply_plotly_binned_colorbar</span>(</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>  p,</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">brks =</span> brks,</span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">labs =</span> labs,</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Poverty rate (% of residents)"</span>,</span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">horizontal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">thickness =</span> <span class="dv">28</span>, <span class="at">len =</span> <span class="dv">1</span>, <span class="at">show_separators =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">title_font_size =</span> <span class="dv">13</span>, <span class="at">tick_font_size =</span> <span class="dv">12</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-c8d5cdc73613278c7666" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-c8d5cdc73613278c7666">{"x":{"data":[{"x":[-81.021965026855469,-81.027687072753906,-81.044883728027344,-81.056343078613281,-81.056343078613281,-81.039146423339844,-80.941749572753906,-80.907371520996094,-80.872993469238281,-80.872993469238281,-80.884452819824219,-80.872993469238281,-80.884452819824219,-81.474601745605469,-81.463142395019531,-81.480323791503906,-81.474601745605469,-81.480323791503906,-81.497520446777344,-81.497520446777344,-81.480323791503906,-81.486053466796875,-81.474601745605469,-81.417304992675781,-81.411575317382812,-81.400108337402344,-81.365737915039062,-81.325630187988281,-81.021965026855469,-81.021965026855469],"y":[35.162418365478516,35.133773803710938,35.110855102539062,35.099395751953125,35.082202911376953,35.059284210205078,35.116584777832031,35.082202911376953,34.956153869628906,34.927509307861328,34.887401580810547,34.847293853759766,34.818645477294922,34.824375152587891,34.847293853759766,34.904590606689453,34.921775817871094,34.93896484375,34.950428009033203,34.961883544921875,34.990531921386719,35.0306396484375,35.065017700195312,35.065017700195312,35.128040313720703,35.139503479003906,35.173877716064453,35.173877716064453,35.162418365478516,35.162418365478516],"text":"County: York<br>Poverty rate: 8.9%<br>Property /100k: 1,587<br>Violent /100k: 276","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(73,193,173,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.675506591796875,-79.497894287109375,-79.4749755859375,-79.457786560058594,-79.446327209472656,-79.480705261230469,-79.52081298828125,-79.538002014160156,-79.560920715332031,-79.578109741210938,-79.601028442382812,-79.623947143554688,-79.635398864746094,-79.686973571777344,-79.727073669433594,-79.755722045898438,-79.767181396484375,-79.772911071777344,-79.824485778808594,-79.841667175292969,-79.864585876464844,-79.887504577636719,-79.893234252929688,-79.9276123046875,-79.956260681152344,-79.961990356445312,-79.956260681152344,-79.967720031738281,-80.013557434082031,-80.047935485839844,-80.042198181152344,-80.070854187011719,-80.116691589355469,-80.168251037597656,-80.317222595214844,-80.311492919921875,-80.305763244628906,-80.305763244628906,-80.33441162109375,-80.345870971679688,-80.368789672851562,-80.357330322265625,-80.33441162109375,-80.322959899902344,-80.294303894042969,-80.28857421875,-80.28857421875,-80.259925842285156,-80.254196166992188,-80.242744445800781,-80.219818115234375,-80.214088439941406,-80.214088439941406,-80.168251037597656,-80.151069641113281,-80.139610290527344,-80.139610290527344,-80.133872985839844,-80.133872985839844,-80.122413635253906,-80.093772888183594,-80.06512451171875,-80.025016784667969,-79.996360778808594,-79.979179382324219,-79.950531005859375,-79.898963928222656,-79.864585876464844,-79.858856201171875,-79.864585876464844,-79.858856201171875,-79.818748474121094,-79.778648376464844,-79.755722045898438,-79.744270324707031,-79.715614318847656,-79.675506591796875,-79.675506591796875],"y":[33.328956604003906,33.248741149902344,33.248741149902344,33.243011474609375,33.225822448730469,33.191444396972656,33.157066345214844,33.157066345214844,33.157066345214844,33.157066345214844,33.134147644042969,33.134147644042969,33.116962432861328,33.059665679931641,33.031017303466797,32.990909576416016,32.962261199951172,32.945072174072266,32.927883148193359,32.887779235839844,32.882045745849609,32.870590209960938,32.847671508789062,32.841941833496094,32.859127044677734,32.870590209960938,32.899234771728516,32.910697937011719,32.904964447021484,32.962261199951172,32.973720550537109,32.996639251708984,32.990909576416016,33.025287628173828,33.157066345214844,33.17425537109375,33.191444396972656,33.197174072265625,33.2200927734375,33.231552124023438,33.260200500488281,33.271659851074219,33.277389526367188,33.277389526367188,33.271659851074219,33.277389526367188,33.288845062255859,33.311763763427734,33.340415954589844,33.391979217529297,33.397708892822266,33.426357269287109,33.443546295166016,33.460735321044922,33.460735321044922,33.460735321044922,33.483654022216797,33.495109558105469,33.506572723388672,33.506572723388672,33.506572723388672,33.512302398681641,33.506572723388672,33.506572723388672,33.500843048095703,33.500843048095703,33.460735321044922,33.460735321044922,33.449275970458984,33.437816619873047,33.426357269287109,33.403438568115234,33.386253356933594,33.369064331054688,33.346145629882812,33.340415954589844,33.328956604003906,33.328956604003906],"text":"County: Berkeley<br>Poverty rate: 10.3%<br>Property /100k: 2,735<br>Violent /100k: 511","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.8328857421875,-80.792778015136719,-80.7412109375,-80.712562561035156,-80.689651489257812,-80.672454833984375,-80.672454833984375,-80.660995483398438,-80.655265808105469,-80.643814086914062,-80.632347106933594,-80.615158081054688,-80.580780029296875,-80.575050354003906,-80.5635986328125,-80.540672302246094,-80.523490905761719,-80.540672302246094,-80.546409606933594,-80.546409606933594,-80.529220581054688,-80.494834899902344,-80.477653503417969,-80.477653503417969,-80.483383178710938,-80.512031555175781,-80.534942626953125,-80.5635986328125,-80.592247009277344,-80.615158081054688,-80.632347106933594,-80.655265808105469,-80.678184509277344,-80.7412109375,-80.764129638671875,-80.792778015136719,-80.804237365722656,-80.821426391601562,-80.827156066894531,-80.8328857421875,-80.821426391601562,-80.78704833984375,-80.775596618652344,-80.775596618652344,-80.78704833984375,-80.792778015136719,-80.781318664550781,-80.758399963378906,-80.735488891601562,-80.712562561035156,-80.689651489257812,-80.672454833984375,-80.672454833984375,-80.701103210449219,-80.735488891601562,-80.769859313964844,-80.792778015136719,-80.821426391601562,-80.8328857421875,-80.844345092773438,-80.850074768066406,-80.867263793945312,-80.884452819824219,-80.890182495117188,-80.924560546875,-80.964668273925781,-80.999046325683594,-81.050613403320312,-81.021965026855469,-81.021965026855469,-81.021965026855469,-81.050613403320312,-81.073524475097656,-81.102180480957031,-81.067794799804688,-81.056343078613281,-81.004776000976562,-81.004776000976562,-80.976127624511719,-80.953208923339844,-80.941749572753906,-80.930290222167969,-80.907371520996094,-80.901634216308594,-80.872993469238281,-80.861534118652344,-80.850074768066406,-80.850074768066406,-80.8328857421875,-80.821426391601562,-80.838615417480469,-80.827156066894531,-80.8328857421875,-80.855804443359375,-80.872993469238281,-80.8328857421875,-80.8328857421875],"y":[32.710163116455078,32.698699951171875,32.687244415283203,32.681510925292969,32.681510925292969,32.670055389404297,32.635673522949219,32.629947662353516,32.618488311767578,32.607028961181641,32.595569610595703,32.595569610595703,32.595569610595703,32.578380584716797,32.566921234130859,32.561191558837891,32.509624481201172,32.503898620605469,32.492435455322266,32.475246429443359,32.469516754150391,32.458061218261719,32.446598052978516,32.435142517089844,32.417953491210938,32.406490325927734,32.389305114746094,32.343467712402344,32.326278686523438,32.309089660644531,32.303359985351562,32.309089660644531,32.309089660644531,32.366386413574219,32.395034790039062,32.446598052978516,32.452327728271484,32.446598052978516,32.423683166503906,32.389305114746094,32.366386413574219,32.332008361816406,32.303359985351562,32.280441284179688,32.251792907714844,32.240333557128906,32.228874206542969,32.240333557128906,32.263252258300781,32.26898193359375,32.251792907714844,32.246063232421875,32.22314453125,32.188770294189453,32.154392242431641,32.131473541259766,32.125743865966797,32.142932891845703,32.142932891845703,32.131473541259766,32.108554840087891,32.097095489501953,32.074180603027344,32.039798736572266,32.051261901855469,32.068447113037109,32.085636138916016,32.091365814208984,32.154392242431641,32.171581268310547,32.194499969482422,32.205955505371094,32.22314453125,32.251792907714844,32.291900634765625,32.320549011230469,32.303359985351562,32.286170959472656,32.280441284179688,32.280441284179688,32.320549011230469,32.337738037109375,32.366386413574219,32.366386413574219,32.36065673828125,32.366386413574219,32.406490325927734,32.423683166503906,32.452327728271484,32.475246429443359,32.532543182373047,32.595569610595703,32.607028961181641,32.647136688232422,32.664325714111328,32.710163116455078,32.710163116455078],"text":"County: Beaufort<br>Poverty rate: 10.5%<br>Property /100k: 1,556<br>Violent /100k: 358","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-82.219436645507812,-82.225173950195312,-82.219436645507812,-82.213714599609375,-82.173606872558594,-82.167877197265625,-82.14495849609375,-82.23663330078125,-82.23663330078125,-82.32830810546875,-82.362686157226562,-82.414253234863281,-82.425704956054688,-82.431434631347656,-82.448623657226562,-82.460090637207031,-82.454360961914062,-82.465812683105469,-82.460090637207031,-82.465812683105469,-82.465812683105469,-82.465812683105469,-82.460090637207031,-82.465812683105469,-82.483001708984375,-82.488731384277344,-82.488731384277344,-82.500198364257812,-82.505928039550781,-82.511650085449219,-82.540298461914062,-82.540298461914062,-82.557487487792969,-82.563217163085938,-82.591865539550781,-82.59759521484375,-82.591865539550781,-82.603324890136719,-82.59759521484375,-82.586135864257812,-82.586135864257812,-82.59759521484375,-82.631973266601562,-82.672073364257812,-82.706459045410156,-82.729377746582031,-82.769485473632812,-82.752296447753906,-82.700729370117188,-82.700729370117188,-82.694999694824219,-82.672073364257812,-82.6434326171875,-82.591865539550781,-82.500198364257812,-82.477272033691406,-82.442893981933594,-82.408523559570312,-82.402786254882812,-82.379875183105469,-82.362686157226562,-82.316848754882812,-82.276741027832031,-82.219436645507812,-82.219436645507812],"y":[35.196796417236328,34.921775817871094,34.881671905517578,34.858753204345703,34.812915802001953,34.801456451416016,34.784267425537109,34.595191955566406,34.549354553222656,34.486328125,34.520709991455078,34.555084228515625,34.560813903808594,34.606647491455078,34.618110656738281,34.629566192626953,34.652484893798828,34.669673919677734,34.698322296142578,34.715511322021484,34.732700347900391,34.761348724365234,34.772808074951172,34.784267425537109,34.807186126708984,34.824375152587891,34.847293853759766,34.864482879638672,34.887401580810547,34.916046142578125,34.961883544921875,35.001991271972656,35.019180297851562,35.024909973144531,35.019180297851562,35.024909973144531,35.047828674316406,35.059284210205078,35.070747375488281,35.07647705078125,35.082202911376953,35.087936401367188,35.07647705078125,35.070747375488281,35.070747375488281,35.059284210205078,35.070747375488281,35.07647705078125,35.099395751953125,35.116584777832031,35.133773803710938,35.128040313720703,35.128040313720703,35.139503479003906,35.173877716064453,35.185337066650391,35.173877716064453,35.208255767822266,35.208255767822266,35.196796417236328,35.196796417236328,35.191066741943359,35.196796417236328,35.196796417236328,35.196796417236328],"text":"County: Greenville<br>Poverty rate: 11.0%<br>Property /100k: 2,278<br>Violent /100k: 433","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.577728271484375,-81.474601745605469,-81.400108337402344,-81.445945739746094,-81.417304992675781,-81.388656616210938,-81.365737915039062,-81.354270935058594,-81.337089538574219,-81.302711486816406,-81.279792785644531,-81.233955383300781,-81.182395935058594,-81.136558532714844,-81.113632202148438,-81.096450805664062,-81.067794799804688,-81.044883728027344,-81.027687072753906,-81.010505676269531,-81.021965026855469,-81.039146423339844,-81.050613403320312,-81.056343078613281,-81.06207275390625,-81.044883728027344,-81.039146423339844,-81.027687072753906,-81.010505676269531,-80.941749572753906,-80.924560546875,-80.924560546875,-80.947471618652344,-81.039146423339844,-81.19384765625,-81.222496032714844,-81.245414733886719,-81.342819213867188,-81.348548889160156,-81.405845642089844,-81.428764343261719,-81.451683044433594,-81.4688720703125,-81.51470947265625,-81.537620544433594,-81.577728271484375,-81.577728271484375],"y":[33.878993988037109,34.085258483886719,34.085258483886719,34.1253662109375,34.182662963867188,34.182662963867188,34.188392639160156,34.205581665039062,34.199848175048828,34.1253662109375,34.108177185058594,34.108177185058594,34.096717834472656,34.07952880859375,34.050880432128906,34.016502380371094,33.999317169189453,33.970664978027344,33.924831390380859,33.913372039794922,33.884723663330078,33.878993988037109,33.793052673339844,33.781593322753906,33.752944946289062,33.752944946289062,33.764400482177734,33.764400482177734,33.781593322753906,33.775863647460938,33.770133972167969,33.752944946289062,33.747215270996094,33.712837219238281,33.655540466308594,33.6727294921875,33.678459167480469,33.712837219238281,33.724296569824219,33.735755920410156,33.752944946289062,33.787319183349609,33.804508209228516,33.821701049804688,33.844615936279297,33.878993988037109,33.878993988037109],"text":"County: Lexington<br>Poverty rate: 11.4%<br>Property /100k: 2,864<br>Violent /100k: 507","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.775596618652344,-80.500572204589844,-80.483383178710938,-80.448997497558594,-80.420356750488281,-80.385978698730469,-80.368789672851562,-80.345870971679688,-80.33441162109375,-80.305763244628906,-80.305763244628906,-80.311492919921875,-80.317222595214844,-80.168251037597656,-80.179710388183594,-80.082305908203125,-80.099502563476562,-80.128143310546875,-80.15679931640625,-80.168251037597656,-80.15679931640625,-80.145339965820312,-80.254196166992188,-80.397438049316406,-80.397438049316406,-80.408897399902344,-80.408897399902344,-80.420356750488281,-80.420356750488281,-80.414627075195312,-80.408897399902344,-80.42608642578125,-80.443275451660156,-80.471923828125,-80.500572204589844,-80.523490905761719,-80.580780029296875,-80.60943603515625,-80.638084411621094,-80.666725158691406,-80.689651489257812,-80.712562561035156,-80.735488891601562,-80.775596618652344,-80.775596618652344],"y":[33.17425537109375,33.328956604003906,33.300308227539062,33.277389526367188,33.26593017578125,33.26593017578125,33.260200500488281,33.231552124023438,33.2200927734375,33.197174072265625,33.191444396972656,33.17425537109375,33.157066345214844,33.025287628173828,33.013828277587891,32.933616638183594,32.893508911132812,32.904964447021484,32.893508911132812,32.864860534667969,32.853401184082031,32.819023132324219,32.836208343505859,32.853401184082031,32.904964447021484,32.927883148193359,32.945072174072266,32.973720550537109,32.990909576416016,33.019557952880859,33.042472839355469,33.053936004638672,33.059665679931641,33.059665679931641,33.059665679931641,33.071125030517578,33.059665679931641,33.071125030517578,33.094043731689453,33.116962432861328,33.151336669921875,33.162799835205078,33.17425537109375,33.17425537109375,33.17425537109375],"text":"County: Dorchester<br>Poverty rate: 11.5%<br>Property /100k: 3,118<br>Violent /100k: 557","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.368789672851562,-80.3802490234375,-80.397438049316406,-80.408897399902344,-80.408897399902344,-80.397438049316406,-80.385978698730469,-80.397438049316406,-80.420356750488281,-80.42608642578125,-80.420356750488281,-80.403167724609375,-80.397438049316406,-80.414627075195312,-80.42608642578125,-80.443275451660156,-80.443275451660156,-80.443275451660156,-80.431816101074219,-80.408897399902344,-80.397438049316406,-80.254196166992188,-80.145339965820312,-80.15679931640625,-80.168251037597656,-80.15679931640625,-80.128143310546875,-80.099502563476562,-80.082305908203125,-80.179710388183594,-80.168251037597656,-80.116691589355469,-80.070854187011719,-80.042198181152344,-80.047935485839844,-80.013557434082031,-79.967720031738281,-79.956260681152344,-79.961990356445312,-79.956260681152344,-79.9276123046875,-79.893234252929688,-79.887504577636719,-79.864585876464844,-79.841667175292969,-79.824485778808594,-79.772911071777344,-79.767181396484375,-79.755722045898438,-79.727073669433594,-79.686973571777344,-79.635398864746094,-79.623947143554688,-79.601028442382812,-79.578109741210938,-79.560920715332031,-79.538002014160156,-79.52081298828125,-79.480705261230469,-79.446327209472656,-79.406219482421875,-79.389030456542969,-79.343193054199219,-79.320274353027344,-79.280174255371094,-79.268707275390625,-79.280174255371094,-79.314544677734375,-79.343193054199219,-79.360382080078125,-79.371849060058594,-79.38330078125,-79.406219482421875,-79.42913818359375,-79.452056884765625,-79.4749755859375,-79.497894287109375,-79.515083312988281,-79.538002014160156,-79.589561462402344,-79.641136169433594,-79.652595520019531,-79.652595520019531,-79.635398864746094,-79.635398864746094,-79.675506591796875,-79.709884643554688,-79.744270324707031,-79.795829772949219,-79.824485778808594,-79.853126525878906,-79.864585876464844,-79.893234252929688,-79.910423278808594,-79.921882629394531,-79.921882629394531,-79.933341979980469,-79.944801330566406,-79.933341979980469,-79.904693603515625,-79.898963928222656,-79.904693603515625,-79.939071655273438,-79.967720031738281,-79.984909057617188,-80.019287109375,-80.076583862304688,-80.122413635253906,-80.145339965820312,-80.179710388183594,-80.185447692871094,-80.214088439941406,-80.219818115234375,-80.214088439941406,-80.214088439941406,-80.219818115234375,-80.259925842285156,-80.282852172851562,-80.305763244628906,-80.345870971679688,-80.368789672851562,-80.368789672851562],"y":[32.515354156494141,32.538272857666016,32.538272857666016,32.549732208251953,32.561191558837891,32.566921234130859,32.578380584716797,32.618488311767578,32.612754821777344,32.618488311767578,32.629947662353516,32.641407012939453,32.652862548828125,32.670055389404297,32.72161865234375,32.744537353515625,32.7674560546875,32.796104431152344,32.81329345703125,32.824752807617188,32.853401184082031,32.836208343505859,32.819023132324219,32.853401184082031,32.864860534667969,32.893508911132812,32.904964447021484,32.893508911132812,32.933616638183594,33.013828277587891,33.025287628173828,32.990909576416016,32.996639251708984,32.973720550537109,32.962261199951172,32.904964447021484,32.910697937011719,32.899234771728516,32.870590209960938,32.859127044677734,32.841941833496094,32.847671508789062,32.870590209960938,32.882045745849609,32.887779235839844,32.927883148193359,32.945072174072266,32.962261199951172,32.990909576416016,33.031017303466797,33.059665679931641,33.116962432861328,33.134147644042969,33.134147644042969,33.157066345214844,33.157066345214844,33.157066345214844,33.157066345214844,33.191444396972656,33.225822448730469,33.202903747558594,33.185718536376953,33.157066345214844,33.145606994628906,33.145606994628906,33.12841796875,33.116962432861328,33.099773406982422,33.099773406982422,33.094043731689453,33.071125030517578,33.059665679931641,33.059665679931641,33.053936004638672,33.025287628173828,33.019557952880859,33.025287628173828,33.031017303466797,33.025287628173828,32.979454040527344,32.945072174072266,32.933616638183594,32.916427612304688,32.899234771728516,32.893508911132812,32.876319885253906,32.859127044677734,32.836208343505859,32.784645080566406,32.7674560546875,32.7674560546875,32.7674560546875,32.824752807617188,32.824752807617188,32.819023132324219,32.790374755859375,32.778915405273438,32.761726379394531,32.750267028808594,32.744537353515625,32.733081817626953,32.72161865234375,32.704429626464844,32.647136688232422,32.641407012939453,32.641407012939453,32.624217987060547,32.624217987060547,32.595569610595703,32.595569610595703,32.595569610595703,32.607028961181641,32.595569610595703,32.578380584716797,32.566921234130859,32.555461883544922,32.532543182373047,32.521083831787109,32.503898620605469,32.492435455322266,32.515354156494141,32.515354156494141],"text":"County: Charleston<br>Poverty rate: 11.6%<br>Property /100k: 1,949<br>Violent /100k: 344","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.861534118652344,-80.775596618652344,-80.781318664550781,-80.540672302246094,-80.471923828125,-80.460464477539062,-80.42608642578125,-80.420356750488281,-80.408897399902344,-80.649543762207031,-80.672454833984375,-80.712562561035156,-80.729759216308594,-80.87872314453125,-80.884452819824219,-80.87872314453125,-80.872993469238281,-80.872993469238281,-80.87872314453125,-80.87872314453125,-80.861534118652344,-80.861534118652344,-80.87872314453125,-80.87872314453125,-80.884452819824219,-80.872993469238281,-80.884452819824219,-80.872993469238281,-80.872993469238281,-80.907371520996094,-80.861534118652344,-80.861534118652344],"y":[35.024909973144531,34.927509307861328,34.818645477294922,34.812915802001953,34.721240997314453,34.692592620849609,34.663948059082031,34.646759033203125,34.618110656738281,34.537895202636719,34.583732604980469,34.560813903808594,34.555084228515625,34.469139099121094,34.480602264404297,34.520709991455078,34.543628692626953,34.589462280273438,34.641029357910156,34.646759033203125,34.704055786132812,34.721240997314453,34.761348724365234,34.784267425537109,34.818645477294922,34.847293853759766,34.887401580810547,34.927509307861328,34.956153869628906,35.082202911376953,35.024909973144531,35.024909973144531],"text":"County: Lancaster<br>Poverty rate: 12.3%<br>Property /100k: 1,613<br>Violent /100k: 331","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.188499450683594,-79.245796203613281,-79.245796203613281,-79.25152587890625,-79.25152587890625,-79.257247924804688,-79.280174255371094,-79.320274353027344,-79.314544677734375,-79.291633605957031,-79.280174255371094,-79.245796203613281,-79.228599548339844,-79.228599548339844,-79.199958801269531,-79.171310424804688,-79.125473022460938,-79.114013671875,-79.091087341308594,-79.056716918945312,-78.638450622558594,-78.558242797851562,-78.592620849609375,-78.644187927246094,-78.712944030761719,-78.775962829589844,-78.850448608398438,-78.907745361328125,-78.970771789550781,-78.999420166015625,-79.108283996582031,-79.108283996582031,-79.108283996582031,-79.125473022460938,-79.125473022460938,-79.119743347167969,-79.119743347167969,-79.136924743652344,-79.188499450683594,-79.188499450683594],"y":[33.71856689453125,33.798782348632812,33.821701049804688,33.844615936279297,33.867534637451172,33.890453338623047,33.907642364501953,33.964939117431641,33.982128143310547,34.010772705078125,34.03369140625,34.039421081542969,34.068073272705078,34.090991973876953,34.119636535644531,34.165473937988281,34.211311340332031,34.245685577392578,34.268604278564453,34.302982330322266,33.947746276855469,33.867534637451172,33.850345611572266,33.827426910400391,33.798782348632812,33.752944946289062,33.712837219238281,33.666999816894531,33.609703063964844,33.575328826904297,33.575328826904297,33.598243713378906,33.603973388671875,33.609703063964844,33.621162414550781,33.644081115722656,33.655540466308594,33.661270141601562,33.71856689453125,33.71856689453125],"text":"County: Horry<br>Poverty rate: 12.8%<br>Property /100k: 2,341<br>Violent /100k: 398","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.382926940917969,-81.761077880859375,-81.78399658203125,-81.812637329101562,-81.847023010253906,-81.852745056152344,-81.847023010253906,-81.869941711425781,-81.932960510253906,-81.944419860839844,-81.938690185546875,-81.944419860839844,-81.932960510253906,-81.927238464355469,-81.927238464355469,-81.984527587890625,-82.001724243164062,-82.041824340820312,-81.669403076171875,-81.577728271484375,-81.537620544433594,-81.51470947265625,-81.4688720703125,-81.451683044433594,-81.428764343261719,-81.405845642089844,-81.348548889160156,-81.342819213867188,-81.245414733886719,-81.222496032714844,-81.19384765625,-81.382926940917969,-81.382926940917969],"y":[33.489383697509766,33.202903747558594,33.2200927734375,33.214363098144531,33.231552124023438,33.248741149902344,33.271659851074219,33.317497253417969,33.340415954589844,33.363334655761719,33.386253356933594,33.403438568115234,33.432090759277344,33.449275970458984,33.460735321044922,33.495109558105469,33.518028259277344,33.546680450439453,33.821701049804688,33.878993988037109,33.844615936279297,33.821701049804688,33.804508209228516,33.787319183349609,33.752944946289062,33.735755920410156,33.724296569824219,33.712837219238281,33.678459167480469,33.6727294921875,33.655540466308594,33.489383697509766,33.489383697509766],"text":"County: Aiken<br>Poverty rate: 13.9%<br>Property /100k: 2,236<br>Violent /100k: 269","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.471923828125,-80.575050354003906,-80.626617431640625,-80.729759216308594,-80.861534118652344,-80.827156066894531,-80.781318664550781,-80.775596618652344,-80.775596618652344,-80.781318664550781,-80.827156066894531,-80.855804443359375,-80.87872314453125,-80.729759216308594,-80.712562561035156,-80.672454833984375,-80.649543762207031,-80.408897399902344,-80.385978698730469,-80.374519348144531,-80.363059997558594,-80.357330322265625,-80.345870971679688,-80.322959899902344,-80.317222595214844,-80.311492919921875,-80.317222595214844,-80.305763244628906,-80.294303894042969,-80.282852172851562,-80.317222595214844,-80.33441162109375,-80.345870971679688,-80.345870971679688,-80.351600646972656,-80.363059997558594,-80.374519348144531,-80.3802490234375,-80.420356750488281,-80.42608642578125,-80.431816101074219,-80.443275451660156,-80.443275451660156,-80.471923828125,-80.471923828125],"y":[34.165473937988281,34.108177185058594,34.096717834472656,34.085258483886719,34.194122314453125,34.268604278564453,34.360279083251953,34.377468109130859,34.417575836181641,34.423301696777344,34.429035186767578,34.446220397949219,34.469139099121094,34.555084228515625,34.560813903808594,34.583732604980469,34.537895202636719,34.618110656738281,34.600921630859375,34.595191955566406,34.5780029296875,34.543628692626953,34.53216552734375,34.503517150878906,34.497791290283203,34.480602264404297,34.457683563232422,34.423301696777344,34.411846160888672,34.360279083251953,34.343090057373047,34.348819732666016,34.348819732666016,34.308712005615234,34.291522979736328,34.291522979736328,34.291522979736328,34.297252655029297,34.285793304443359,34.268604278564453,34.257144927978516,34.228500366210938,34.182662963867188,34.165473937988281,34.165473937988281],"text":"County: Kershaw<br>Poverty rate: 14.1%<br>Property /100k: 2,059<br>Violent /100k: 411","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-82.248092651367188,-82.316848754882812,-82.311111450195312,-82.311111450195312,-82.282470703125,-82.259552001953125,-82.248092651367188,-82.23663330078125,-82.242362976074219,-82.276741027832031,-82.305381774902344,-82.32830810546875,-82.351219177246094,-82.368415832519531,-82.414253234863281,-82.448623657226562,-82.465812683105469,-82.477272033691406,-82.488731384277344,-82.511650085449219,-82.528839111328125,-82.591865539550781,-82.603324890136719,-82.620513916015625,-82.637702941894531,-82.666351318359375,-82.68927001953125,-82.723648071289062,-82.735107421875,-82.740837097167969,-82.32830810546875,-82.311111450195312,-82.276741027832031,-82.248092651367188,-82.248092651367188],"y":[34.417575836181641,34.354549407958984,34.331630706787109,34.291522979736328,34.268604278564453,34.251419067382812,34.211311340332031,34.182662963867188,34.154010772705078,34.108177185058594,34.085258483886719,34.073799133300781,34.068073272705078,34.062339782714844,34.062339782714844,34.073799133300781,34.085258483886719,34.085258483886719,34.085258483886719,34.07952880859375,34.07952880859375,34.022235870361328,34.050880432128906,34.062339782714844,34.07952880859375,34.119636535644531,34.136825561523438,34.165473937988281,34.188392639160156,34.211311340332031,34.486328125,34.463409423828125,34.446220397949219,34.417575836181641,34.417575836181641],"text":"County: Abbeville<br>Poverty rate: 14.1%<br>Property /100k: 1,562<br>Violent /100k: 232","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-82.855422973632812,-82.798126220703125,-82.488731384277344,-82.483001708984375,-82.465812683105469,-82.460090637207031,-82.465812683105469,-82.465812683105469,-82.465812683105469,-82.460090637207031,-82.465812683105469,-82.454360961914062,-82.460090637207031,-82.448623657226562,-82.431434631347656,-82.425704956054688,-82.414253234863281,-82.362686157226562,-82.32830810546875,-82.740837097167969,-82.752296447753906,-82.786674499511719,-82.821052551269531,-82.838233947753906,-82.855422973632812,-82.87261962890625,-82.901260375976562,-82.958564758300781,-83.00439453125,-82.855422973632812,-82.855422973632812],"y":[34.618110656738281,34.663948059082031,34.824375152587891,34.807186126708984,34.784267425537109,34.772808074951172,34.761348724365234,34.732700347900391,34.715511322021484,34.698322296142578,34.669673919677734,34.652484893798828,34.629566192626953,34.618110656738281,34.606647491455078,34.560813903808594,34.555084228515625,34.520709991455078,34.486328125,34.211311340332031,34.257144927978516,34.302982330322266,34.348819732666016,34.371738433837891,34.434764862060547,34.463409423828125,34.474872589111328,34.480602264404297,34.486328125,34.618110656738281,34.618110656738281],"text":"County: Anderson<br>Poverty rate: 14.4%<br>Property /100k: 2,914<br>Violent /100k: 438","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.446327209472656,-79.457786560058594,-79.4749755859375,-79.497894287109375,-79.675506591796875,-79.61248779296875,-79.578109741210938,-79.52081298828125,-79.486434936523438,-79.469245910644531,-79.42913818359375,-79.423408508300781,-79.38330078125,-79.331741333007812,-79.314544677734375,-79.308815002441406,-79.285903930664062,-79.274436950683594,-79.25152587890625,-79.234336853027344,-79.217140197753906,-79.188499450683594,-79.136924743652344,-79.119743347167969,-79.119743347167969,-79.125473022460938,-79.125473022460938,-79.108283996582031,-79.108283996582031,-79.108283996582031,-78.999420166015625,-79.016609191894531,-79.056716918945312,-79.114013671875,-79.131202697753906,-79.142662048339844,-79.177032470703125,-79.222869873046875,-79.240066528320312,-79.245796203613281,-79.240066528320312,-79.25152587890625,-79.257247924804688,-79.280174255371094,-79.285903930664062,-79.280174255371094,-79.268707275390625,-79.25152587890625,-79.217140197753906,-79.194229125976562,-79.188499450683594,-79.199958801269531,-79.211418151855469,-79.228599548339844,-79.245796203613281,-79.25152587890625,-79.245796203613281,-79.245796203613281,-79.268707275390625,-79.280174255371094,-79.320274353027344,-79.343193054199219,-79.389030456542969,-79.406219482421875,-79.446327209472656,-79.446327209472656],"y":[33.225822448730469,33.243011474609375,33.248741149902344,33.248741149902344,33.328956604003906,33.397708892822266,33.455005645751953,33.500843048095703,33.518028259277344,33.546680450439453,33.575328826904297,33.621162414550781,33.707107543945312,33.752944946289062,33.770133972167969,33.770133972167969,33.752944946289062,33.724296569824219,33.712837219238281,33.695648193359375,33.695648193359375,33.71856689453125,33.661270141601562,33.655540466308594,33.644081115722656,33.621162414550781,33.609703063964844,33.603973388671875,33.598243713378906,33.575328826904297,33.575328826904297,33.552410125732422,33.506572723388672,33.443546295166016,33.403438568115234,33.374790191650391,33.334682464599609,33.317497253417969,33.311763763427734,33.323226928710938,33.369064331054688,33.380519866943359,33.380519866943359,33.369064331054688,33.334682464599609,33.311763763427734,33.277389526367188,33.26593017578125,33.248741149902344,33.231552124023438,33.214363098144531,33.17425537109375,33.162799835205078,33.168525695800781,33.168525695800781,33.162799835205078,33.145606994628906,33.134147644042969,33.12841796875,33.145606994628906,33.145606994628906,33.157066345214844,33.185718536376953,33.202903747558594,33.225822448730469,33.225822448730469],"text":"County: Georgetown<br>Poverty rate: 14.4%<br>Property /100k: 1,605<br>Violent /100k: 477","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.984527587890625,-81.869941711425781,-81.818374633789062,-81.812637329101562,-81.795455932617188,-81.749618530273438,-81.7381591796875,-81.715240478515625,-81.78399658203125,-81.806915283203125,-81.812637329101562,-81.829833984375,-81.835563659667969,-81.927238464355469,-81.944419860839844,-81.961616516113281,-81.995986938476562,-82.018905639648438,-82.064743041992188,-82.110580444335938,-82.14495849609375,-82.167877197265625,-82.173606872558594,-82.213714599609375,-82.219436645507812,-82.225173950195312,-82.219436645507812,-81.984527587890625,-81.984527587890625],"y":[35.196796417236328,35.191066741943359,35.07647705078125,35.053558349609375,35.053558349609375,34.933238983154297,34.933238983154297,34.916046142578125,34.847293853759766,34.686866760253906,34.675403594970703,34.663948059082031,34.606647491455078,34.635299682617188,34.658218383789062,34.669673919677734,34.675403594970703,34.686866760253906,34.709781646728516,34.755619049072266,34.784267425537109,34.801456451416016,34.812915802001953,34.858753204345703,34.881671905517578,34.921775817871094,35.196796417236328,35.196796417236328,35.196796417236328],"text":"County: Spartanburg<br>Poverty rate: 14.5%<br>Property /100k: 2,378<br>Violent /100k: 604","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(52,151,169,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.474601745605469,-81.497520446777344,-81.554817199707031,-81.703781127929688,-81.720970153808594,-81.743888854980469,-81.772537231445312,-81.789726257324219,-81.824104309082031,-81.852745056152344,-81.864212036132812,-81.881401062011719,-81.887130737304688,-81.898582458496094,-81.927238464355469,-81.892852783203125,-81.881401062011719,-81.881401062011719,-81.795455932617188,-81.749618530273438,-81.743888854980469,-81.715240478515625,-81.69232177734375,-81.657943725585938,-81.549087524414062,-81.480323791503906,-81.428764343261719,-81.42303466796875,-81.42303466796875,-81.371467590332031,-81.365737915039062,-81.337089538574219,-81.325630187988281,-81.314170837402344,-81.33135986328125,-81.314170837402344,-81.337089538574219,-81.354270935058594,-81.365737915039062,-81.388656616210938,-81.417304992675781,-81.445945739746094,-81.400108337402344,-81.474601745605469,-81.474601745605469],"y":[34.085258483886719,34.085258483886719,34.090991973876953,34.176929473876953,34.182662963867188,34.182662963867188,34.165473937988281,34.17120361328125,34.17120361328125,34.17120361328125,34.142555236816406,34.148284912109375,34.17120361328125,34.194122314453125,34.211311340332031,34.280063629150391,34.308712005615234,34.320171356201172,34.360279083251953,34.429035186767578,34.446220397949219,34.457683563232422,34.480602264404297,34.537895202636719,34.463409423828125,34.503517150878906,34.497791290283203,34.463409423828125,34.446220397949219,34.348819732666016,34.325901031494141,34.268604278564453,34.251419067382812,34.245685577392578,34.211311340332031,34.211311340332031,34.199848175048828,34.205581665039062,34.188392639160156,34.182662963867188,34.182662963867188,34.1253662109375,34.085258483886719,34.085258483886719,34.085258483886719],"text":"County: Newberry<br>Poverty rate: 16.0%<br>Property /100k: 1,411<br>Violent /100k: 352","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.626617431640625,-80.620887756347656,-80.592247009277344,-80.575050354003906,-80.557868957519531,-80.557868957519531,-80.546409606933594,-80.529220581054688,-80.534942626953125,-80.51776123046875,-80.506301879882812,-80.512031555175781,-80.512031555175781,-80.500572204589844,-80.512031555175781,-80.546409606933594,-80.597976684570312,-80.603706359863281,-80.592247009277344,-80.603706359863281,-80.615158081054688,-80.620887756347656,-80.603706359863281,-80.615158081054688,-80.643814086914062,-80.666725158691406,-80.689651489257812,-80.689651489257812,-80.792778015136719,-80.87872314453125,-80.924560546875,-80.941749572753906,-80.964668273925781,-81.039146423339844,-80.947471618652344,-80.924560546875,-80.924560546875,-80.941749572753906,-81.010505676269531,-81.027687072753906,-81.039146423339844,-81.044883728027344,-81.06207275390625,-81.056343078613281,-81.050613403320312,-81.039146423339844,-81.021965026855469,-80.999046325683594,-80.936019897460938,-80.918830871582031,-80.907371520996094,-80.890182495117188,-80.872993469238281,-80.861534118652344,-80.78704833984375,-80.758399963378906,-80.7412109375,-80.729759216308594,-80.701103210449219,-80.660995483398438,-80.649543762207031,-80.626617431640625,-80.626617431640625],"y":[33.747215270996094,33.741485595703125,33.695648193359375,33.695648193359375,33.695648193359375,33.6727294921875,33.666999816894531,33.655540466308594,33.632621765136719,33.615436553955078,33.609703063964844,33.592517852783203,33.575328826904297,33.569599151611328,33.552410125732422,33.575328826904297,33.575328826904297,33.569599151611328,33.558135986328125,33.540946960449219,33.518028259277344,33.495109558105469,33.477924346923828,33.472194671630859,33.483654022216797,33.483654022216797,33.529491424560547,33.540946960449219,33.615436553955078,33.62689208984375,33.621162414550781,33.638355255126953,33.649810791015625,33.712837219238281,33.747215270996094,33.752944946289062,33.770133972167969,33.775863647460938,33.781593322753906,33.764400482177734,33.764400482177734,33.752944946289062,33.752944946289062,33.781593322753906,33.793052673339844,33.878993988037109,33.884723663330078,33.878993988037109,33.833156585693359,33.833156585693359,33.821701049804688,33.810237884521484,33.810237884521484,33.810237884521484,33.775863647460938,33.770133972167969,33.781593322753906,33.775863647460938,33.781593322753906,33.775863647460938,33.764400482177734,33.747215270996094,33.747215270996094],"text":"County: Calhoun<br>Poverty rate: 16.3%<br>Property /100k: 1,491<br>Violent /100k: 276","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.626617431640625,-80.575050354003906,-80.471923828125,-80.471923828125,-80.460464477539062,-80.408897399902344,-80.33441162109375,-80.294303894042969,-80.254196166992188,-80.237014770507812,-80.179710388183594,-80.173980712890625,-80.059394836425781,-80.025016784667969,-80.002098083496094,-79.979179382324219,-79.944801330566406,-79.904693603515625,-79.887504577636719,-79.979179382324219,-80.254196166992188,-80.271385192871094,-80.385978698730469,-80.391708374023438,-80.448997497558594,-80.460464477539062,-80.51776123046875,-80.534942626953125,-80.529220581054688,-80.546409606933594,-80.557868957519531,-80.557868957519531,-80.575050354003906,-80.592247009277344,-80.620887756347656,-80.626617431640625,-80.615158081054688,-80.603706359863281,-80.592247009277344,-80.586509704589844,-80.603706359863281,-80.60943603515625,-80.603706359863281,-80.603706359863281,-80.603706359863281,-80.592247009277344,-80.597976684570312,-80.586509704589844,-80.615158081054688,-80.632347106933594,-80.632347106933594,-80.60943603515625,-80.626617431640625,-80.626617431640625],"y":[34.096717834472656,34.108177185058594,34.165473937988281,34.131095886230469,34.113906860351562,34.085258483886719,34.056610107421875,34.050880432128906,34.039421081542969,34.010772705078125,34.010772705078125,33.953479766845703,34.016502380371094,34.016502380371094,34.056610107421875,34.039421081542969,34.022235870361328,34.005046844482422,33.982128143310547,33.942020416259766,33.821701049804688,33.793052673339844,33.781593322753906,33.695648193359375,33.695648193359375,33.655540466308594,33.615436553955078,33.632621765136719,33.655540466308594,33.666999816894531,33.6727294921875,33.695648193359375,33.695648193359375,33.695648193359375,33.741485595703125,33.747215270996094,33.775863647460938,33.787319183349609,33.798782348632812,33.821701049804688,33.861804962158203,33.867534637451172,33.901912689208984,33.913372039794922,33.924831390380859,33.942020416259766,33.959209442138672,33.970664978027344,33.982128143310547,33.982128143310547,34.03369140625,34.068073272705078,34.096717834472656,34.096717834472656],"text":"County: Sumter<br>Poverty rate: 16.4%<br>Property /100k: 2,863<br>Violent /100k: 731","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-83.107528686523438,-83.00439453125,-82.970016479492188,-82.941368103027344,-82.918449401855469,-82.918449401855469,-82.906997680664062,-82.906997680664062,-82.912727355957031,-82.889801025390625,-82.889801025390625,-82.866889953613281,-82.855422973632812,-82.861160278320312,-82.849693298339844,-82.855422973632812,-82.866889953613281,-82.861160278320312,-82.849693298339844,-82.832511901855469,-82.838233947753906,-82.849693298339844,-82.855422973632812,-82.855422973632812,-83.00439453125,-83.061691284179688,-83.107528686523438,-83.159095764160156,-83.182014465332031,-83.204933166503906,-83.245040893554688,-83.273689270019531,-83.313796997070312,-83.348167419433594,-83.365364074707031,-83.365364074707031,-83.353897094726562,-83.32525634765625,-83.308059692382812,-83.182014465332031,-83.14190673828125,-83.130447387695312,-83.107528686523438,-83.107528686523438],"y":[34.990531921386719,35.019180297851562,34.98480224609375,34.979072570800781,34.956153869628906,34.927509307861328,34.904590606689453,34.887401580810547,34.847293853759766,34.772808074951172,34.744159698486328,34.732700347900391,34.726974487304688,34.709781646728516,34.692592620849609,34.675403594970703,34.669673919677734,34.658218383789062,34.658218383789062,34.669673919677734,34.652484893798828,34.646759033203125,34.635299682617188,34.618110656738281,34.486328125,34.497791290283203,34.526435852050781,34.583732604980469,34.600921630859375,34.612380981445312,34.618110656738281,34.618110656738281,34.663948059082031,34.675403594970703,34.704055786132812,34.726974487304688,34.744159698486328,34.789997100830078,34.812915802001953,34.916046142578125,34.93896484375,34.961883544921875,34.990531921386719,34.990531921386719],"text":"County: Oconee<br>Poverty rate: 16.4%<br>Property /100k: 1,889<br>Violent /100k: 308","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.669403076171875,-82.041824340820312,-82.093399047851562,-82.116310119628906,-82.156417846679688,-82.173606872558594,-82.133499145507812,-82.139228820800781,-82.173606872558594,-82.173606872558594,-82.167877197265625,-82.167877197265625,-82.173606872558594,-82.127769470214844,-82.122039794921875,-82.133499145507812,-82.150688171386719,-82.156417846679688,-82.047561645507812,-82.007453918457031,-81.904312133789062,-81.881401062011719,-81.87567138671875,-81.864212036132812,-81.829833984375,-81.669403076171875,-81.669403076171875],"y":[33.821701049804688,33.546680450439453,33.586784362792969,33.592517852783203,33.598243713378906,33.615436553955078,33.655540466308594,33.666999816894531,33.712837219238281,33.735755920410156,33.747215270996094,33.752944946289062,33.775863647460938,33.833156585693359,33.856075286865234,33.861804962158203,33.867534637451172,33.936290740966797,33.959209442138672,33.964939117431641,33.982128143310547,33.959209442138672,33.919101715087891,33.896183013916016,33.878993988037109,33.821701049804688,33.821701049804688],"text":"County: Edgefield<br>Poverty rate: 16.4%<br>Property /100k: 1,609<br>Violent /100k: 132","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.827156066894531,-80.861534118652344,-80.729759216308594,-80.626617431640625,-80.60943603515625,-80.632347106933594,-80.632347106933594,-80.615158081054688,-80.586509704589844,-80.597976684570312,-80.592247009277344,-80.603706359863281,-80.603706359863281,-80.603706359863281,-80.60943603515625,-80.603706359863281,-80.586509704589844,-80.592247009277344,-80.603706359863281,-80.615158081054688,-80.626617431640625,-80.649543762207031,-80.660995483398438,-80.701103210449219,-80.729759216308594,-80.7412109375,-80.758399963378906,-80.78704833984375,-80.861534118652344,-80.872993469238281,-80.890182495117188,-80.907371520996094,-80.918830871582031,-80.936019897460938,-80.999046325683594,-81.021965026855469,-81.010505676269531,-81.027687072753906,-81.044883728027344,-81.067794799804688,-81.096450805664062,-81.113632202148438,-81.136558532714844,-81.182395935058594,-81.233955383300781,-81.279792785644531,-81.302711486816406,-81.337089538574219,-81.314170837402344,-81.33135986328125,-81.314170837402344,-81.274063110351562,-81.251144409179688,-81.228233337402344,-81.211036682128906,-81.199577331542969,-81.188125610351562,-81.182395935058594,-81.170928955078125,-81.170928955078125,-81.182395935058594,-81.170928955078125,-81.090721130371094,-81.084983825683594,-81.067794799804688,-81.056343078613281,-80.827156066894531,-80.827156066894531],"y":[34.268604278564453,34.194122314453125,34.085258483886719,34.096717834472656,34.068073272705078,34.03369140625,33.982128143310547,33.982128143310547,33.970664978027344,33.959209442138672,33.942020416259766,33.924831390380859,33.913372039794922,33.901912689208984,33.867534637451172,33.861804962158203,33.821701049804688,33.798782348632812,33.787319183349609,33.775863647460938,33.747215270996094,33.764400482177734,33.775863647460938,33.781593322753906,33.775863647460938,33.781593322753906,33.770133972167969,33.775863647460938,33.810237884521484,33.810237884521484,33.810237884521484,33.821701049804688,33.833156585693359,33.833156585693359,33.878993988037109,33.884723663330078,33.913372039794922,33.924831390380859,33.970664978027344,33.999317169189453,34.016502380371094,34.050880432128906,34.07952880859375,34.096717834472656,34.108177185058594,34.108177185058594,34.1253662109375,34.199848175048828,34.211311340332031,34.211311340332031,34.245685577392578,34.234230041503906,34.205581665039062,34.199848175048828,34.188392639160156,34.17120361328125,34.17120361328125,34.194122314453125,34.199848175048828,34.211311340332031,34.222766876220703,34.222766876220703,34.211311340332031,34.222766876220703,34.228500366210938,34.245685577392578,34.268604278564453,34.268604278564453],"text":"County: Richland<br>Poverty rate: 16.9%<br>Property /100k: 2,415<br>Violent /100k: 638","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.42303466796875,-80.872993469238281,-80.87872314453125,-80.884452819824219,-80.87872314453125,-80.855804443359375,-80.827156066894531,-80.781318664550781,-80.775596618652344,-80.775596618652344,-80.781318664550781,-80.827156066894531,-81.056343078613281,-81.067794799804688,-81.084983825683594,-81.090721130371094,-81.170928955078125,-81.182395935058594,-81.170928955078125,-81.170928955078125,-81.182395935058594,-81.188125610351562,-81.199577331542969,-81.211036682128906,-81.228233337402344,-81.251144409179688,-81.274063110351562,-81.314170837402344,-81.325630187988281,-81.337089538574219,-81.365737915039062,-81.371467590332031,-81.42303466796875,-81.42303466796875,-81.428764343261719,-81.42303466796875,-81.42303466796875,-81.42303466796875],"y":[34.5780029296875,34.543628692626953,34.520709991455078,34.480602264404297,34.469139099121094,34.446220397949219,34.429035186767578,34.423301696777344,34.417575836181641,34.377468109130859,34.360279083251953,34.268604278564453,34.245685577392578,34.228500366210938,34.222766876220703,34.211311340332031,34.222766876220703,34.222766876220703,34.211311340332031,34.199848175048828,34.194122314453125,34.17120361328125,34.17120361328125,34.188392639160156,34.199848175048828,34.205581665039062,34.234230041503906,34.245685577392578,34.251419067382812,34.268604278564453,34.325901031494141,34.348819732666016,34.446220397949219,34.463409423828125,34.497791290283203,34.549354553222656,34.5780029296875,34.5780029296875],"text":"County: Fairfield<br>Poverty rate: 16.9%<br>Property /100k: 1,639<br>Violent /100k: 728","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-82.32830810546875,-82.305381774902344,-82.276741027832031,-82.242362976074219,-82.23663330078125,-82.248092651367188,-82.259552001953125,-82.282470703125,-82.311111450195312,-82.311111450195312,-82.316848754882812,-82.248092651367188,-82.230903625488281,-82.207984924316406,-82.196525573730469,-82.179336547851562,-82.133499145507812,-82.116310119628906,-82.076202392578125,-82.059013366699219,-82.059013366699219,-82.018905639648438,-81.990257263183594,-81.978797912597656,-81.944419860839844,-81.927238464355469,-81.898582458496094,-81.887130737304688,-81.881401062011719,-81.864212036132812,-81.915779113769531,-81.973068237304688,-82.007453918457031,-82.047561645507812,-82.053291320800781,-82.093399047851562,-82.104850769042969,-82.139228820800781,-82.156417846679688,-82.173606872558594,-82.196525573730469,-82.242362976074219,-82.248092651367188,-82.259552001953125,-82.288200378417969,-82.305381774902344,-82.311111450195312,-82.316848754882812,-82.32830810546875,-82.32830810546875],"y":[34.073799133300781,34.085258483886719,34.108177185058594,34.154010772705078,34.182662963867188,34.211311340332031,34.251419067382812,34.268604278564453,34.291522979736328,34.331630706787109,34.354549407958984,34.417575836181641,34.388927459716797,34.383197784423828,34.371738433837891,34.354549407958984,34.320171356201172,34.314441680908203,34.308712005615234,34.302982330322266,34.280063629150391,34.268604278564453,34.257144927978516,34.251419067382812,34.228500366210938,34.211311340332031,34.194122314453125,34.17120361328125,34.148284912109375,34.142555236816406,34.073799133300781,34.010772705078125,33.964939117431641,33.959209442138672,34.005046844482422,34.005046844482422,33.993583679199219,33.982128143310547,33.982128143310547,33.976398468017578,33.976398468017578,34.010772705078125,34.016502380371094,34.016502380371094,33.993583679199219,33.982128143310547,33.993583679199219,34.039421081542969,34.073799133300781,34.073799133300781],"text":"County: Greenwood<br>Poverty rate: 17.1%<br>Property /100k: 2,322<br>Violent /100k: 420","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-82.987205505371094,-82.866889953613281,-82.803855895996094,-82.786674499511719,-82.769485473632812,-82.729377746582031,-82.706459045410156,-82.672073364257812,-82.631973266601562,-82.59759521484375,-82.586135864257812,-82.586135864257812,-82.59759521484375,-82.603324890136719,-82.591865539550781,-82.59759521484375,-82.591865539550781,-82.563217163085938,-82.557487487792969,-82.540298461914062,-82.540298461914062,-82.511650085449219,-82.505928039550781,-82.500198364257812,-82.488731384277344,-82.488731384277344,-82.798126220703125,-82.855422973632812,-82.855422973632812,-82.849693298339844,-82.838233947753906,-82.832511901855469,-82.849693298339844,-82.861160278320312,-82.866889953613281,-82.855422973632812,-82.849693298339844,-82.861160278320312,-82.855422973632812,-82.866889953613281,-82.889801025390625,-82.889801025390625,-82.912727355957031,-82.906997680664062,-82.906997680664062,-82.918449401855469,-82.918449401855469,-82.941368103027344,-82.970016479492188,-83.00439453125,-82.987205505371094,-82.987205505371094],"y":[35.024909973144531,35.065017700195312,35.082202911376953,35.082202911376953,35.070747375488281,35.059284210205078,35.070747375488281,35.070747375488281,35.07647705078125,35.087936401367188,35.082202911376953,35.07647705078125,35.070747375488281,35.059284210205078,35.047828674316406,35.024909973144531,35.019180297851562,35.024909973144531,35.019180297851562,35.001991271972656,34.961883544921875,34.916046142578125,34.887401580810547,34.864482879638672,34.847293853759766,34.824375152587891,34.663948059082031,34.618110656738281,34.635299682617188,34.646759033203125,34.652484893798828,34.669673919677734,34.658218383789062,34.658218383789062,34.669673919677734,34.675403594970703,34.692592620849609,34.709781646728516,34.726974487304688,34.732700347900391,34.744159698486328,34.772808074951172,34.847293853759766,34.887401580810547,34.904590606689453,34.927509307861328,34.956153869628906,34.979072570800781,34.98480224609375,35.019180297851562,35.024909973144531,35.024909973144531],"text":"County: Pickens<br>Poverty rate: 17.2%<br>Property /100k: 1,310<br>Violent /100k: 184","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-82.32830810546875,-82.23663330078125,-82.23663330078125,-82.14495849609375,-82.110580444335938,-82.064743041992188,-82.018905639648438,-81.995986938476562,-81.961616516113281,-81.944419860839844,-81.927238464355469,-81.835563659667969,-81.801185607910156,-81.761077880859375,-81.720970153808594,-81.680870056152344,-81.657943725585938,-81.69232177734375,-81.715240478515625,-81.743888854980469,-81.749618530273438,-81.795455932617188,-81.881401062011719,-81.881401062011719,-81.892852783203125,-81.927238464355469,-81.944419860839844,-81.978797912597656,-81.990257263183594,-82.018905639648438,-82.059013366699219,-82.059013366699219,-82.076202392578125,-82.116310119628906,-82.133499145507812,-82.179336547851562,-82.196525573730469,-82.207984924316406,-82.230903625488281,-82.248092651367188,-82.276741027832031,-82.311111450195312,-82.32830810546875,-82.32830810546875],"y":[34.486328125,34.549354553222656,34.595191955566406,34.784267425537109,34.755619049072266,34.709781646728516,34.686866760253906,34.675403594970703,34.669673919677734,34.658218383789062,34.635299682617188,34.606647491455078,34.589462280273438,34.583732604980469,34.560813903808594,34.555084228515625,34.537895202636719,34.480602264404297,34.457683563232422,34.446220397949219,34.429035186767578,34.360279083251953,34.320171356201172,34.308712005615234,34.280063629150391,34.211311340332031,34.228500366210938,34.251419067382812,34.257144927978516,34.268604278564453,34.280063629150391,34.302982330322266,34.308712005615234,34.314441680908203,34.320171356201172,34.354549407958984,34.371738433837891,34.383197784423828,34.388927459716797,34.417575836181641,34.446220397949219,34.463409423828125,34.486328125,34.486328125],"text":"County: Laurens<br>Poverty rate: 17.6%<br>Property /100k: 2,013<br>Violent /100k: 503","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-82.563217163085938,-82.591865539550781,-82.528839111328125,-82.511650085449219,-82.488731384277344,-82.477272033691406,-82.465812683105469,-82.448623657226562,-82.414253234863281,-82.368415832519531,-82.351219177246094,-82.32830810546875,-82.316848754882812,-82.311111450195312,-82.305381774902344,-82.288200378417969,-82.259552001953125,-82.248092651367188,-82.242362976074219,-82.196525573730469,-82.173606872558594,-82.156417846679688,-82.139228820800781,-82.104850769042969,-82.093399047851562,-82.053291320800781,-82.047561645507812,-82.156417846679688,-82.150688171386719,-82.133499145507812,-82.122039794921875,-82.127769470214844,-82.173606872558594,-82.167877197265625,-82.167877197265625,-82.173606872558594,-82.173606872558594,-82.139228820800781,-82.133499145507812,-82.173606872558594,-82.202255249023438,-82.219436645507812,-82.248092651367188,-82.265274047851562,-82.288200378417969,-82.305381774902344,-82.368415832519531,-82.414253234863281,-82.465812683105469,-82.488731384277344,-82.505928039550781,-82.5517578125,-82.563217163085938,-82.563217163085938],"y":[33.959209442138672,34.022235870361328,34.07952880859375,34.07952880859375,34.085258483886719,34.085258483886719,34.085258483886719,34.073799133300781,34.062339782714844,34.062339782714844,34.068073272705078,34.073799133300781,34.039421081542969,33.993583679199219,33.982128143310547,33.993583679199219,34.016502380371094,34.016502380371094,34.010772705078125,33.976398468017578,33.976398468017578,33.982128143310547,33.982128143310547,33.993583679199219,34.005046844482422,34.005046844482422,33.959209442138672,33.936290740966797,33.867534637451172,33.861804962158203,33.856075286865234,33.833156585693359,33.775863647460938,33.752944946289062,33.747215270996094,33.735755920410156,33.712837219238281,33.666999816894531,33.655540466308594,33.615436553955078,33.649810791015625,33.689918518066406,33.730026245117188,33.752944946289062,33.775863647460938,33.787319183349609,33.833156585693359,33.861804962158203,33.878993988037109,33.890453338623047,33.913372039794922,33.947746276855469,33.959209442138672,33.959209442138672],"text":"County: Mccormick<br>Poverty rate: 18.0%<br>Property /100k: 1,051<br>Violent /100k: 113","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.059394836425781,-79.755722045898438,-79.738540649414062,-79.727073669433594,-79.686973571777344,-79.6583251953125,-79.61248779296875,-79.589561462402344,-79.543724060058594,-79.526542663574219,-79.538002014160156,-79.555191040039062,-79.560920715332031,-79.526542663574219,-79.503623962402344,-79.497894287109375,-79.509353637695312,-79.52081298828125,-79.52081298828125,-79.497894287109375,-79.492164611816406,-79.497894287109375,-79.480705261230469,-79.469245910644531,-79.469245910644531,-79.463516235351562,-79.440597534179688,-79.417686462402344,-79.400489807128906,-79.366111755371094,-79.354652404785156,-79.331741333007812,-79.303085327148438,-79.303085327148438,-79.314544677734375,-79.331741333007812,-79.343193054199219,-79.423408508300781,-79.434867858886719,-79.469245910644531,-79.486434936523438,-79.509353637695312,-79.61248779296875,-79.629669189453125,-79.652595520019531,-79.675506591796875,-79.698432922363281,-79.721343994140625,-79.778648376464844,-79.818748474121094,-79.8359375,-79.847396850585938,-79.864585876464844,-79.870323181152344,-79.933341979980469,-79.944801330566406,-79.979179382324219,-79.887504577636719,-79.904693603515625,-79.944801330566406,-79.979179382324219,-80.002098083496094,-80.007827758789062,-80.036476135253906,-80.059394836425781,-80.059394836425781],"y":[34.096717834472656,34.268604278564453,34.280063629150391,34.291522979736328,34.291522979736328,34.308712005615234,34.297252655029297,34.280063629150391,34.239955902099609,34.228500366210938,34.211311340332031,34.188392639160156,34.165473937988281,34.154010772705078,34.131095886230469,34.113906860351562,34.096717834472656,34.096717834472656,34.090991973876953,34.039421081542969,34.016502380371094,33.999317169189453,33.982128143310547,33.976398468017578,33.959209442138672,33.947746276855469,33.942020416259766,33.919101715087891,33.907642364501953,33.867534637451172,33.850345611572266,33.844615936279297,33.821701049804688,33.810237884521484,33.793052673339844,33.804508209228516,33.804508209228516,33.798782348632812,33.787319183349609,33.787319183349609,33.775863647460938,33.775863647460938,33.804508209228516,33.821701049804688,33.821701049804688,33.810237884521484,33.810237884521484,33.838886260986328,33.838886260986328,33.878993988037109,33.878993988037109,33.890453338623047,33.884723663330078,33.884723663330078,33.890453338623047,33.890453338623047,33.942020416259766,33.982128143310547,34.005046844482422,34.022235870361328,34.039421081542969,34.056610107421875,34.068073272705078,34.07952880859375,34.096717834472656,34.096717834472656],"text":"County: Florence<br>Poverty rate: 18.3%<br>Property /100k: 3,154<br>Violent /100k: 868","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.291252136230469,-81.0162353515625,-80.953208923339844,-80.947471618652344,-80.953208923339844,-80.953208923339844,-80.953208923339844,-80.930290222167969,-80.918830871582031,-80.907371520996094,-80.872993469238281,-80.855804443359375,-80.8328857421875,-80.827156066894531,-80.838615417480469,-80.821426391601562,-80.8328857421875,-80.850074768066406,-80.850074768066406,-80.861534118652344,-80.872993469238281,-80.901634216308594,-80.907371520996094,-80.930290222167969,-80.941749572753906,-80.953208923339844,-80.976127624511719,-81.004776000976562,-81.004776000976562,-81.056343078613281,-81.067794799804688,-81.102180480957031,-81.073524475097656,-81.050613403320312,-81.021965026855469,-81.021965026855469,-81.021965026855469,-81.050613403320312,-81.090721130371094,-81.125091552734375,-81.136558532714844,-81.153739929199219,-81.159469604492188,-81.142288208007812,-81.130821228027344,-81.125091552734375,-81.136558532714844,-81.159469604492188,-81.182395935058594,-81.19384765625,-81.199577331542969,-81.291252136230469,-81.291252136230469],"y":[32.555461883544922,32.755996704101562,32.698699951171875,32.687244415283203,32.670055389404297,32.664325714111328,32.647136688232422,32.641407012939453,32.641407012939453,32.629947662353516,32.664325714111328,32.647136688232422,32.607028961181641,32.595569610595703,32.532543182373047,32.475246429443359,32.452327728271484,32.423683166503906,32.406490325927734,32.366386413574219,32.36065673828125,32.366386413574219,32.366386413574219,32.337738037109375,32.320549011230469,32.280441284179688,32.280441284179688,32.286170959472656,32.303359985351562,32.320549011230469,32.291900634765625,32.251792907714844,32.22314453125,32.205955505371094,32.194499969482422,32.171581268310547,32.154392242431641,32.091365814208984,32.097095489501953,32.114284515380859,32.131473541259766,32.160118103027344,32.183036804199219,32.228874206542969,32.297630310058594,32.320549011230469,32.343467712402344,32.377845764160156,32.423683166503906,32.463790893554688,32.480979919433594,32.555461883544922,32.555461883544922],"text":"County: Jasper<br>Poverty rate: 18.3%<br>Property /100k: 2,293<br>Violent /100k: 716","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.772537231445312,-81.365737915039062,-81.400108337402344,-81.411575317382812,-81.417304992675781,-81.474601745605469,-81.486053466796875,-81.480323791503906,-81.497520446777344,-81.497520446777344,-81.480323791503906,-81.474601745605469,-81.480323791503906,-81.463142395019531,-81.480323791503906,-81.526161193847656,-81.543357849121094,-81.566268920898438,-81.583457946777344,-81.612106323242188,-81.623565673828125,-81.640762329101562,-81.652214050292969,-81.669403076171875,-81.69232177734375,-81.715240478515625,-81.7381591796875,-81.749618530273438,-81.795455932617188,-81.812637329101562,-81.818374633789062,-81.869941711425781,-81.772537231445312,-81.772537231445312],"y":[35.191066741943359,35.173877716064453,35.139503479003906,35.128040313720703,35.065017700195312,35.065017700195312,35.0306396484375,34.990531921386719,34.961883544921875,34.950428009033203,34.93896484375,34.921775817871094,34.904590606689453,34.847293853759766,34.858753204345703,34.887401580810547,34.887401580810547,34.887401580810547,34.887401580810547,34.893131256103516,34.887401580810547,34.887401580810547,34.898857116699219,34.904590606689453,34.904590606689453,34.916046142578125,34.933238983154297,34.933238983154297,35.053558349609375,35.053558349609375,35.07647705078125,35.191066741943359,35.191066741943359,35.191066741943359],"text":"County: Cherokee<br>Poverty rate: 18.5%<br>Property /100k: 2,076<br>Violent /100k: 269","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.979179382324219,-79.944801330566406,-79.933341979980469,-79.870323181152344,-79.939071655273438,-79.950531005859375,-79.961990356445312,-79.996360778808594,-79.979179382324219,-79.979179382324219,-80.093772888183594,-80.122413635253906,-80.133872985839844,-80.133872985839844,-80.139610290527344,-80.139610290527344,-80.151069641113281,-80.168251037597656,-80.214088439941406,-80.242744445800781,-80.259925842285156,-80.282852172851562,-80.305763244628906,-80.317222595214844,-80.328681945800781,-80.357330322265625,-80.391708374023438,-80.437545776367188,-80.437545776367188,-80.466194152832031,-80.448997497558594,-80.471923828125,-80.483383178710938,-80.500572204589844,-80.512031555175781,-80.512031555175781,-80.506301879882812,-80.51776123046875,-80.460464477539062,-80.448997497558594,-80.391708374023438,-80.385978698730469,-80.271385192871094,-80.254196166992188,-79.979179382324219,-79.979179382324219],"y":[33.942020416259766,33.890453338623047,33.890453338623047,33.884723663330078,33.787319183349609,33.793052673339844,33.793052673339844,33.747215270996094,33.71856689453125,33.707107543945312,33.506572723388672,33.506572723388672,33.506572723388672,33.495109558105469,33.483654022216797,33.460735321044922,33.460735321044922,33.460735321044922,33.443546295166016,33.455005645751953,33.449275970458984,33.455005645751953,33.449275970458984,33.443546295166016,33.449275970458984,33.449275970458984,33.460735321044922,33.500843048095703,33.518028259277344,33.529491424560547,33.558135986328125,33.563865661621094,33.575328826904297,33.569599151611328,33.575328826904297,33.592517852783203,33.609703063964844,33.615436553955078,33.655540466308594,33.695648193359375,33.695648193359375,33.781593322753906,33.793052673339844,33.821701049804688,33.942020416259766,33.942020416259766],"text":"County: Clarendon<br>Poverty rate: 18.5%<br>Property /100k: 2,706<br>Violent /100k: 641","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.397438049316406,-80.408897399902344,-80.431816101074219,-80.443275451660156,-80.443275451660156,-80.443275451660156,-80.42608642578125,-80.414627075195312,-80.397438049316406,-80.403167724609375,-80.420356750488281,-80.42608642578125,-80.420356750488281,-80.397438049316406,-80.385978698730469,-80.397438049316406,-80.408897399902344,-80.408897399902344,-80.397438049316406,-80.3802490234375,-80.368789672851562,-80.391708374023438,-80.42608642578125,-80.448997497558594,-80.443275451660156,-80.523490905761719,-80.540672302246094,-80.5635986328125,-80.575050354003906,-80.580780029296875,-80.615158081054688,-80.632347106933594,-80.643814086914062,-80.655265808105469,-80.660995483398438,-80.672454833984375,-80.672454833984375,-80.689651489257812,-80.712562561035156,-80.7412109375,-80.792778015136719,-80.8328857421875,-80.850074768066406,-80.861534118652344,-80.87872314453125,-80.924560546875,-80.947471618652344,-80.976127624511719,-80.999046325683594,-81.010505676269531,-81.0162353515625,-81.044883728027344,-81.073524475097656,-80.924560546875,-80.895912170410156,-80.884452819824219,-80.872993469238281,-80.872993469238281,-80.872993469238281,-80.775596618652344,-80.735488891601562,-80.712562561035156,-80.689651489257812,-80.666725158691406,-80.638084411621094,-80.60943603515625,-80.580780029296875,-80.523490905761719,-80.500572204589844,-80.471923828125,-80.443275451660156,-80.42608642578125,-80.408897399902344,-80.414627075195312,-80.420356750488281,-80.420356750488281,-80.408897399902344,-80.408897399902344,-80.397438049316406,-80.397438049316406,-80.397438049316406],"y":[32.853401184082031,32.824752807617188,32.81329345703125,32.796104431152344,32.7674560546875,32.744537353515625,32.72161865234375,32.670055389404297,32.652862548828125,32.641407012939453,32.629947662353516,32.618488311767578,32.612754821777344,32.618488311767578,32.578380584716797,32.566921234130859,32.561191558837891,32.549732208251953,32.538272857666016,32.538272857666016,32.515354156494141,32.521083831787109,32.509624481201172,32.498165130615234,32.503898620605469,32.509624481201172,32.561191558837891,32.566921234130859,32.578380584716797,32.595569610595703,32.595569610595703,32.595569610595703,32.607028961181641,32.618488311767578,32.629947662353516,32.635673522949219,32.670055389404297,32.681510925292969,32.681510925292969,32.687244415283203,32.698699951171875,32.710163116455078,32.750267028808594,32.7674560546875,32.784645080566406,32.859127044677734,32.870590209960938,32.893508911132812,32.922153472900391,32.939342498779297,32.962261199951172,32.990909576416016,33.031017303466797,33.099773406982422,33.059665679931641,33.059665679931641,33.071125030517578,33.088310241699219,33.12841796875,33.17425537109375,33.17425537109375,33.162799835205078,33.151336669921875,33.116962432861328,33.094043731689453,33.071125030517578,33.059665679931641,33.071125030517578,33.059665679931641,33.059665679931641,33.059665679931641,33.053936004638672,33.042472839355469,33.019557952880859,32.990909576416016,32.973720550537109,32.945072174072266,32.927883148193359,32.904964447021484,32.853401184082031,32.853401184082031],"text":"County: Colleton<br>Poverty rate: 18.7%<br>Property /100k: 2,561<br>Violent /100k: 725","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.474601745605469,-80.884452819824219,-80.87872314453125,-80.87872314453125,-80.861534118652344,-80.861534118652344,-80.87872314453125,-80.87872314453125,-80.872993469238281,-80.872993469238281,-81.42303466796875,-81.42303466796875,-81.428764343261719,-81.451683044433594,-81.451683044433594,-81.457412719726562,-81.4688720703125,-81.480323791503906,-81.4688720703125,-81.457412719726562,-81.463142395019531,-81.474601745605469,-81.474601745605469],"y":[34.824375152587891,34.818645477294922,34.784267425537109,34.761348724365234,34.721240997314453,34.704055786132812,34.646759033203125,34.641029357910156,34.589462280273438,34.543628692626953,34.5780029296875,34.618110656738281,34.641029357910156,34.663948059082031,34.692592620849609,34.715511322021484,34.726974487304688,34.732700347900391,34.755619049072266,34.767078399658203,34.784267425537109,34.824375152587891,34.824375152587891],"text":"County: Chester<br>Poverty rate: 19.3%<br>Property /100k: 1,703<br>Violent /100k: 590","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.474601745605469,-81.577728271484375,-81.669403076171875,-81.829833984375,-81.864212036132812,-81.87567138671875,-81.881401062011719,-81.904312133789062,-82.007453918457031,-81.973068237304688,-81.915779113769531,-81.864212036132812,-81.852745056152344,-81.824104309082031,-81.789726257324219,-81.772537231445312,-81.743888854980469,-81.720970153808594,-81.703781127929688,-81.554817199707031,-81.497520446777344,-81.474601745605469,-81.474601745605469],"y":[34.085258483886719,33.878993988037109,33.821701049804688,33.878993988037109,33.896183013916016,33.919101715087891,33.959209442138672,33.982128143310547,33.964939117431641,34.010772705078125,34.073799133300781,34.142555236816406,34.17120361328125,34.17120361328125,34.17120361328125,34.165473937988281,34.182662963867188,34.182662963867188,34.176929473876953,34.090991973876953,34.085258483886719,34.085258483886719,34.085258483886719],"text":"County: Saluda<br>Poverty rate: 19.4%<br>Property /100k: 931<br>Violent /100k: 340","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(54,108,160,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.291252136230469,-81.337089538574219,-81.360008239746094,-81.394386291503906,-81.411575317382812,-81.405845642089844,-81.405845642089844,-81.42303466796875,-81.42303466796875,-81.411575317382812,-81.360008239746094,-81.348548889160156,-81.337089538574219,-81.337089538574219,-81.251144409179688,-81.251144409179688,-81.256874084472656,-81.251144409179688,-81.251144409179688,-81.073524475097656,-81.044883728027344,-81.0162353515625,-81.010505676269531,-80.999046325683594,-80.976127624511719,-80.947471618652344,-80.924560546875,-80.87872314453125,-80.861534118652344,-80.850074768066406,-80.8328857421875,-80.872993469238281,-80.907371520996094,-80.918830871582031,-80.930290222167969,-80.953208923339844,-80.953208923339844,-80.953208923339844,-80.947471618652344,-80.953208923339844,-81.0162353515625,-81.291252136230469,-81.291252136230469],"y":[32.555461883544922,32.572650909423828,32.578380584716797,32.607028961181641,32.635673522949219,32.652862548828125,32.67578125,32.704429626464844,32.72161865234375,32.738807678222656,32.755996704101562,32.761726379394531,32.7674560546875,32.796104431152344,32.853401184082031,32.859127044677734,32.904964447021484,32.916427612304688,32.933616638183594,33.031017303466797,32.990909576416016,32.962261199951172,32.939342498779297,32.922153472900391,32.893508911132812,32.870590209960938,32.859127044677734,32.784645080566406,32.7674560546875,32.750267028808594,32.710163116455078,32.664325714111328,32.629947662353516,32.641407012939453,32.641407012939453,32.647136688232422,32.664325714111328,32.670055389404297,32.687244415283203,32.698699951171875,32.755996704101562,32.555461883544922,32.555461883544922],"text":"County: Hampton<br>Poverty rate: 20.0%<br>Property /100k: 2,358<br>Violent /100k: 738","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.322959899902344,-79.910423278808594,-79.910423278808594,-79.864585876464844,-79.847396850585938,-79.818748474121094,-79.795829772949219,-79.778648376464844,-79.772911071777344,-79.772911071777344,-79.790107727050781,-79.807289123535156,-79.818748474121094,-79.8359375,-79.853126525878906,-79.858856201171875,-79.864585876464844,-79.910423278808594,-79.9276123046875,-79.950531005859375,-79.979179382324219,-80.019287109375,-80.030746459960938,-80.047935485839844,-80.282852172851562,-80.294303894042969,-80.305763244628906,-80.317222595214844,-80.311492919921875,-80.317222595214844,-80.322959899902344,-80.345870971679688,-80.357330322265625,-80.363059997558594,-80.374519348144531,-80.385978698730469,-80.408897399902344,-80.420356750488281,-80.42608642578125,-80.460464477539062,-80.471923828125,-80.540672302246094,-80.322959899902344,-80.322959899902344],"y":[34.812915802001953,34.807186126708984,34.778537750244141,34.732700347900391,34.669673919677734,34.658218383789062,34.658218383789062,34.646759033203125,34.629566192626953,34.612380981445312,34.600921630859375,34.560813903808594,34.520709991455078,34.520709991455078,34.503517150878906,34.497791290283203,34.486328125,34.486328125,34.486328125,34.486328125,34.492057800292969,34.480602264404297,34.474872589111328,34.480602264404297,34.360279083251953,34.411846160888672,34.423301696777344,34.457683563232422,34.480602264404297,34.497791290283203,34.503517150878906,34.53216552734375,34.543628692626953,34.5780029296875,34.595191955566406,34.600921630859375,34.618110656738281,34.646759033203125,34.663948059082031,34.692592620849609,34.721240997314453,34.812915802001953,34.812915802001953,34.812915802001953],"text":"County: Chesterfield<br>Poverty rate: 20.2%<br>Property /100k: 2,361<br>Violent /100k: 675","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.818748474121094,-79.813018798828125,-79.801559448242188,-79.790107727050781,-79.767181396484375,-79.749992370605469,-79.732810974121094,-79.721343994140625,-79.715614318847656,-79.732810974121094,-79.744270324707031,-79.749992370605469,-79.744270324707031,-79.715614318847656,-79.715614318847656,-79.709884643554688,-79.692703247070312,-79.681236267089844,-79.686973571777344,-79.669776916503906,-79.686973571777344,-79.692703247070312,-79.681236267089844,-79.664054870605469,-79.6583251953125,-79.686973571777344,-79.727073669433594,-79.738540649414062,-79.755722045898438,-80.059394836425781,-80.1109619140625,-80.139610290527344,-80.151069641113281,-80.099502563476562,-80.1109619140625,-80.1109619140625,-80.1109619140625,-80.116691589355469,-80.162521362304688,-80.168251037597656,-80.168251037597656,-80.168251037597656,-80.179710388183594,-80.179710388183594,-80.202629089355469,-80.219818115234375,-80.242744445800781,-80.254196166992188,-80.282852172851562,-80.047935485839844,-80.030746459960938,-80.019287109375,-79.979179382324219,-79.950531005859375,-79.9276123046875,-79.910423278808594,-79.864585876464844,-79.858856201171875,-79.853126525878906,-79.8359375,-79.818748474121094,-79.818748474121094],"y":[34.520709991455078,34.514976501464844,34.503517150878906,34.497791290283203,34.503517150878906,34.520709991455078,34.514976501464844,34.497791290283203,34.474872589111328,34.469139099121094,34.457683563232422,34.446220397949219,34.434764862060547,34.417575836181641,34.406116485595703,34.406116485595703,34.406116485595703,34.400382995605469,34.388927459716797,34.377468109130859,34.354549407958984,34.343090057373047,34.337360382080078,34.331630706787109,34.308712005615234,34.291522979736328,34.291522979736328,34.280063629150391,34.268604278564453,34.096717834472656,34.131095886230469,34.148284912109375,34.165473937988281,34.205581665039062,34.222766876220703,34.239955902099609,34.245685577392578,34.280063629150391,34.320171356201172,34.331630706787109,34.360279083251953,34.366008758544922,34.360279083251953,34.348819732666016,34.337360382080078,34.325901031494141,34.331630706787109,34.343090057373047,34.360279083251953,34.480602264404297,34.474872589111328,34.480602264404297,34.492057800292969,34.486328125,34.486328125,34.486328125,34.486328125,34.497791290283203,34.503517150878906,34.520709991455078,34.520709991455078,34.520709991455078],"text":"County: Darlington<br>Poverty rate: 20.3%<br>Property /100k: 3,563<br>Violent /100k: 994","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.199577331542969,-81.228233337402344,-81.216766357421875,-80.987579345703125,-80.844345092773438,-80.821426391601562,-80.792778015136719,-80.775596618652344,-80.872993469238281,-80.872993469238281,-80.872993469238281,-80.884452819824219,-80.895912170410156,-80.924560546875,-81.073524475097656,-81.119361877441406,-81.142288208007812,-81.176658630371094,-81.199577331542969,-81.199577331542969],"y":[33.12841796875,33.162799835205078,33.432090759277344,33.328956604003906,33.254470825195312,33.208633422851562,33.191444396972656,33.17425537109375,33.12841796875,33.088310241699219,33.071125030517578,33.059665679931641,33.059665679931641,33.099773406982422,33.031017303466797,33.071125030517578,33.088310241699219,33.111228942871094,33.12841796875,33.12841796875],"text":"County: Bamberg<br>Poverty rate: 21.6%<br>Property /100k: 2,545<br>Violent /100k: 653","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.474601745605469,-81.463142395019531,-81.457412719726562,-81.4688720703125,-81.480323791503906,-81.4688720703125,-81.457412719726562,-81.451683044433594,-81.451683044433594,-81.428764343261719,-81.42303466796875,-81.42303466796875,-81.42303466796875,-81.428764343261719,-81.480323791503906,-81.549087524414062,-81.657943725585938,-81.680870056152344,-81.720970153808594,-81.761077880859375,-81.801185607910156,-81.835563659667969,-81.829833984375,-81.812637329101562,-81.806915283203125,-81.78399658203125,-81.715240478515625,-81.69232177734375,-81.669403076171875,-81.652214050292969,-81.640762329101562,-81.623565673828125,-81.612106323242188,-81.583457946777344,-81.566268920898438,-81.543357849121094,-81.526161193847656,-81.480323791503906,-81.463142395019531,-81.474601745605469,-81.474601745605469],"y":[34.824375152587891,34.784267425537109,34.767078399658203,34.755619049072266,34.732700347900391,34.726974487304688,34.715511322021484,34.692592620849609,34.663948059082031,34.641029357910156,34.618110656738281,34.5780029296875,34.549354553222656,34.497791290283203,34.503517150878906,34.463409423828125,34.537895202636719,34.555084228515625,34.560813903808594,34.583732604980469,34.589462280273438,34.606647491455078,34.663948059082031,34.675403594970703,34.686866760253906,34.847293853759766,34.916046142578125,34.904590606689453,34.904590606689453,34.898857116699219,34.887401580810547,34.887401580810547,34.893131256103516,34.887401580810547,34.887401580810547,34.887401580810547,34.887401580810547,34.858753204345703,34.847293853759766,34.824375152587891,34.824375152587891],"text":"County: Union<br>Poverty rate: 22.7%<br>Property /100k: 3,335<br>Violent /100k: 463","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-80.002098083496094,-80.025016784667969,-80.059394836425781,-80.173980712890625,-80.179710388183594,-80.237014770507812,-80.254196166992188,-80.294303894042969,-80.33441162109375,-80.408897399902344,-80.460464477539062,-80.471923828125,-80.471923828125,-80.443275451660156,-80.443275451660156,-80.431816101074219,-80.42608642578125,-80.420356750488281,-80.3802490234375,-80.374519348144531,-80.363059997558594,-80.351600646972656,-80.345870971679688,-80.345870971679688,-80.33441162109375,-80.317222595214844,-80.282852172851562,-80.254196166992188,-80.242744445800781,-80.219818115234375,-80.202629089355469,-80.179710388183594,-80.179710388183594,-80.168251037597656,-80.168251037597656,-80.168251037597656,-80.162521362304688,-80.116691589355469,-80.1109619140625,-80.1109619140625,-80.1109619140625,-80.099502563476562,-80.151069641113281,-80.139610290527344,-80.1109619140625,-80.059394836425781,-80.036476135253906,-80.007827758789062,-80.002098083496094,-80.002098083496094],"y":[34.056610107421875,34.016502380371094,34.016502380371094,33.953479766845703,34.010772705078125,34.010772705078125,34.039421081542969,34.050880432128906,34.056610107421875,34.085258483886719,34.113906860351562,34.131095886230469,34.165473937988281,34.182662963867188,34.228500366210938,34.257144927978516,34.268604278564453,34.285793304443359,34.297252655029297,34.291522979736328,34.291522979736328,34.291522979736328,34.308712005615234,34.348819732666016,34.348819732666016,34.343090057373047,34.360279083251953,34.343090057373047,34.331630706787109,34.325901031494141,34.337360382080078,34.348819732666016,34.360279083251953,34.366008758544922,34.360279083251953,34.331630706787109,34.320171356201172,34.280063629150391,34.245685577392578,34.239955902099609,34.222766876220703,34.205581665039062,34.165473937988281,34.148284912109375,34.131095886230469,34.096717834472656,34.07952880859375,34.068073272705078,34.056610107421875,34.056610107421875],"text":"County: Lee<br>Poverty rate: 23.3%<br>Property /100k: 2,547<br>Violent /100k: 551","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.870323181152344,-79.864585876464844,-79.847396850585938,-79.8359375,-79.818748474121094,-79.778648376464844,-79.721343994140625,-79.698432922363281,-79.675506591796875,-79.652595520019531,-79.629669189453125,-79.61248779296875,-79.509353637695312,-79.486434936523438,-79.469245910644531,-79.434867858886719,-79.423408508300781,-79.343193054199219,-79.331741333007812,-79.314544677734375,-79.308815002441406,-79.314544677734375,-79.331741333007812,-79.38330078125,-79.423408508300781,-79.42913818359375,-79.469245910644531,-79.486434936523438,-79.52081298828125,-79.578109741210938,-79.61248779296875,-79.675506591796875,-79.715614318847656,-79.744270324707031,-79.755722045898438,-79.778648376464844,-79.818748474121094,-79.858856201171875,-79.864585876464844,-79.858856201171875,-79.864585876464844,-79.898963928222656,-79.950531005859375,-79.979179382324219,-79.996360778808594,-80.025016784667969,-80.06512451171875,-80.093772888183594,-79.979179382324219,-79.979179382324219,-79.996360778808594,-79.961990356445312,-79.950531005859375,-79.939071655273438,-79.870323181152344,-79.870323181152344],"y":[33.884723663330078,33.884723663330078,33.890453338623047,33.878993988037109,33.878993988037109,33.838886260986328,33.838886260986328,33.810237884521484,33.810237884521484,33.821701049804688,33.821701049804688,33.804508209228516,33.775863647460938,33.775863647460938,33.787319183349609,33.787319183349609,33.798782348632812,33.804508209228516,33.804508209228516,33.793052673339844,33.770133972167969,33.770133972167969,33.752944946289062,33.707107543945312,33.621162414550781,33.575328826904297,33.546680450439453,33.518028259277344,33.500843048095703,33.455005645751953,33.397708892822266,33.328956604003906,33.340415954589844,33.346145629882812,33.369064331054688,33.386253356933594,33.403438568115234,33.426357269287109,33.437816619873047,33.449275970458984,33.460735321044922,33.460735321044922,33.500843048095703,33.500843048095703,33.506572723388672,33.506572723388672,33.512302398681641,33.506572723388672,33.707107543945312,33.71856689453125,33.747215270996094,33.793052673339844,33.793052673339844,33.787319183349609,33.884723663330078,33.884723663330078],"text":"County: Williamsburg<br>Poverty rate: 23.6%<br>Property /100k: 2,472<br>Violent /100k: 742","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.216766357421875,-81.251144409179688,-81.319900512695312,-81.342819213867188,-81.360008239746094,-81.382926940917969,-81.19384765625,-81.039146423339844,-80.964668273925781,-80.941749572753906,-80.924560546875,-80.87872314453125,-80.792778015136719,-80.689651489257812,-80.689651489257812,-80.666725158691406,-80.643814086914062,-80.615158081054688,-80.603706359863281,-80.620887756347656,-80.615158081054688,-80.603706359863281,-80.592247009277344,-80.603706359863281,-80.597976684570312,-80.546409606933594,-80.512031555175781,-80.500572204589844,-80.483383178710938,-80.471923828125,-80.448997497558594,-80.466194152832031,-80.437545776367188,-80.437545776367188,-80.391708374023438,-80.357330322265625,-80.328681945800781,-80.317222595214844,-80.305763244628906,-80.282852172851562,-80.259925842285156,-80.242744445800781,-80.214088439941406,-80.214088439941406,-80.219818115234375,-80.242744445800781,-80.254196166992188,-80.259925842285156,-80.28857421875,-80.28857421875,-80.294303894042969,-80.322959899902344,-80.33441162109375,-80.357330322265625,-80.368789672851562,-80.385978698730469,-80.420356750488281,-80.448997497558594,-80.483383178710938,-80.500572204589844,-80.775596618652344,-80.792778015136719,-80.821426391601562,-80.844345092773438,-80.987579345703125,-81.216766357421875,-81.216766357421875],"y":[33.432090759277344,33.443546295166016,33.472194671630859,33.483654022216797,33.483654022216797,33.489383697509766,33.655540466308594,33.712837219238281,33.649810791015625,33.638355255126953,33.621162414550781,33.62689208984375,33.615436553955078,33.540946960449219,33.529491424560547,33.483654022216797,33.483654022216797,33.472194671630859,33.477924346923828,33.495109558105469,33.518028259277344,33.540946960449219,33.558135986328125,33.569599151611328,33.575328826904297,33.575328826904297,33.552410125732422,33.569599151611328,33.575328826904297,33.563865661621094,33.558135986328125,33.529491424560547,33.518028259277344,33.500843048095703,33.460735321044922,33.449275970458984,33.449275970458984,33.443546295166016,33.449275970458984,33.455005645751953,33.449275970458984,33.455005645751953,33.443546295166016,33.426357269287109,33.397708892822266,33.391979217529297,33.340415954589844,33.311763763427734,33.288845062255859,33.277389526367188,33.271659851074219,33.277389526367188,33.277389526367188,33.271659851074219,33.260200500488281,33.26593017578125,33.26593017578125,33.277389526367188,33.300308227539062,33.328956604003906,33.17425537109375,33.191444396972656,33.208633422851562,33.254470825195312,33.328956604003906,33.432090759277344,33.432090759277344],"text":"County: Orangeburg<br>Poverty rate: 23.9%<br>Property /100k: 3,431<br>Violent /100k: 1,408","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,64,129,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.6583251953125,-79.664054870605469,-79.681236267089844,-79.692703247070312,-79.686973571777344,-79.669776916503906,-79.686973571777344,-79.681236267089844,-79.692703247070312,-79.709884643554688,-79.715614318847656,-79.715614318847656,-79.744270324707031,-79.749992370605469,-79.744270324707031,-79.732810974121094,-79.715614318847656,-79.721343994140625,-79.732810974121094,-79.749992370605469,-79.767181396484375,-79.790107727050781,-79.801559448242188,-79.813018798828125,-79.818748474121094,-79.807289123535156,-79.790107727050781,-79.772911071777344,-79.772911071777344,-79.778648376464844,-79.795829772949219,-79.818748474121094,-79.847396850585938,-79.864585876464844,-79.910423278808594,-79.910423278808594,-79.692703247070312,-79.675506591796875,-79.446327209472656,-79.446327209472656,-79.61248779296875,-79.6583251953125,-79.6583251953125],"y":[34.308712005615234,34.331630706787109,34.337360382080078,34.343090057373047,34.354549407958984,34.377468109130859,34.388927459716797,34.400382995605469,34.406116485595703,34.406116485595703,34.406116485595703,34.417575836181641,34.434764862060547,34.446220397949219,34.457683563232422,34.469139099121094,34.474872589111328,34.497791290283203,34.514976501464844,34.520709991455078,34.503517150878906,34.497791290283203,34.503517150878906,34.514976501464844,34.520709991455078,34.560813903808594,34.600921630859375,34.612380981445312,34.629566192626953,34.646759033203125,34.658218383789062,34.658218383789062,34.669673919677734,34.732700347900391,34.778537750244141,34.807186126708984,34.807186126708984,34.801456451416016,34.618110656738281,34.612380981445312,34.297252655029297,34.308712005615234,34.308712005615234],"text":"County: Marlboro<br>Poverty rate: 26.2%<br>Property /100k: 3,055<br>Violent /100k: 898","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(48,32,62,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.411575317382812,-81.417304992675781,-81.42303466796875,-81.451683044433594,-81.457412719726562,-81.474601745605469,-81.497520446777344,-81.486053466796875,-81.508979797363281,-81.554817199707031,-81.629295349121094,-81.549087524414062,-81.526161193847656,-81.474601745605469,-81.382926940917969,-81.348548889160156,-81.274063110351562,-81.199577331542969,-81.176658630371094,-81.142288208007812,-81.119361877441406,-81.073524475097656,-81.251144409179688,-81.251144409179688,-81.256874084472656,-81.251144409179688,-81.251144409179688,-81.337089538574219,-81.337089538574219,-81.348548889160156,-81.360008239746094,-81.411575317382812,-81.411575317382812],"y":[32.738807678222656,32.778915405273438,32.841941833496094,32.853401184082031,32.887779235839844,32.916427612304688,32.933616638183594,32.996639251708984,33.019557952880859,33.042472839355469,33.088310241699219,33.162799835205078,33.162799835205078,33.145606994628906,33.116962432861328,33.116962432861328,33.111228942871094,33.12841796875,33.111228942871094,33.088310241699219,33.071125030517578,33.031017303466797,32.933616638183594,32.916427612304688,32.904964447021484,32.859127044677734,32.853401184082031,32.796104431152344,32.7674560546875,32.761726379394531,32.755996704101562,32.738807678222656,32.738807678222656],"text":"County: Allendale<br>Poverty rate: 26.5%<br>Property /100k: 1,628<br>Violent /100k: 1,176","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(48,32,62,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.308815002441406,-79.314544677734375,-79.303085327148438,-79.303085327148438,-79.331741333007812,-79.354652404785156,-79.366111755371094,-79.400489807128906,-79.417686462402344,-79.440597534179688,-79.463516235351562,-79.469245910644531,-79.469245910644531,-79.480705261230469,-79.497894287109375,-79.492164611816406,-79.497894287109375,-79.52081298828125,-79.52081298828125,-79.509353637695312,-79.497894287109375,-79.503623962402344,-79.526542663574219,-79.560920715332031,-79.555191040039062,-79.538002014160156,-79.526542663574219,-79.543724060058594,-79.503623962402344,-79.486434936523438,-79.463516235351562,-79.440597534179688,-79.400489807128906,-79.360382080078125,-79.331741333007812,-79.291633605957031,-79.285903930664062,-79.268707275390625,-79.222869873046875,-79.2056884765625,-79.171310424804688,-79.165580749511719,-79.114013671875,-79.125473022460938,-79.171310424804688,-79.199958801269531,-79.228599548339844,-79.228599548339844,-79.245796203613281,-79.280174255371094,-79.291633605957031,-79.314544677734375,-79.320274353027344,-79.280174255371094,-79.257247924804688,-79.25152587890625,-79.25152587890625,-79.245796203613281,-79.245796203613281,-79.188499450683594,-79.217140197753906,-79.234336853027344,-79.25152587890625,-79.274436950683594,-79.285903930664062,-79.308815002441406,-79.308815002441406],"y":[33.770133972167969,33.793052673339844,33.810237884521484,33.821701049804688,33.844615936279297,33.850345611572266,33.867534637451172,33.907642364501953,33.919101715087891,33.942020416259766,33.947746276855469,33.959209442138672,33.976398468017578,33.982128143310547,33.999317169189453,34.016502380371094,34.039421081542969,34.090991973876953,34.096717834472656,34.096717834472656,34.113906860351562,34.131095886230469,34.154010772705078,34.165473937988281,34.188392639160156,34.211311340332031,34.228500366210938,34.239955902099609,34.262874603271484,34.268604278564453,34.297252655029297,34.291522979736328,34.302982330322266,34.302982330322266,34.285793304443359,34.268604278564453,34.280063629150391,34.280063629150391,34.257144927978516,34.257144927978516,34.262874603271484,34.268604278564453,34.245685577392578,34.211311340332031,34.165473937988281,34.119636535644531,34.090991973876953,34.068073272705078,34.039421081542969,34.03369140625,34.010772705078125,33.982128143310547,33.964939117431641,33.907642364501953,33.890453338623047,33.867534637451172,33.844615936279297,33.821701049804688,33.798782348632812,33.71856689453125,33.695648193359375,33.695648193359375,33.712837219238281,33.724296569824219,33.752944946289062,33.770133972167969,33.770133972167969],"text":"County: Marion<br>Poverty rate: 27.3%<br>Property /100k: 3,183<br>Violent /100k: 803","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(48,32,62,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-81.761077880859375,-81.382926940917969,-81.360008239746094,-81.342819213867188,-81.319900512695312,-81.251144409179688,-81.216766357421875,-81.228233337402344,-81.199577331542969,-81.274063110351562,-81.348548889160156,-81.382926940917969,-81.474601745605469,-81.526161193847656,-81.549087524414062,-81.629295349121094,-81.680870056152344,-81.7381591796875,-81.761077880859375,-81.772537231445312,-81.761077880859375,-81.761077880859375],"y":[33.202903747558594,33.489383697509766,33.483654022216797,33.483654022216797,33.472194671630859,33.443546295166016,33.432090759277344,33.162799835205078,33.12841796875,33.111228942871094,33.116962432861328,33.116962432861328,33.145606994628906,33.162799835205078,33.162799835205078,33.088310241699219,33.105499267578125,33.12841796875,33.157066345214844,33.17425537109375,33.202903747558594,33.202903747558594],"text":"County: Barnwell<br>Poverty rate: 28.5%<br>Property /100k: 2,942<br>Violent /100k: 579","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(48,32,62,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-79.543724060058594,-79.589561462402344,-79.61248779296875,-79.446327209472656,-79.056716918945312,-79.091087341308594,-79.114013671875,-79.165580749511719,-79.171310424804688,-79.2056884765625,-79.222869873046875,-79.268707275390625,-79.285903930664062,-79.291633605957031,-79.331741333007812,-79.360382080078125,-79.400489807128906,-79.440597534179688,-79.463516235351562,-79.486434936523438,-79.503623962402344,-79.543724060058594,-79.543724060058594],"y":[34.239955902099609,34.280063629150391,34.297252655029297,34.612380981445312,34.302982330322266,34.268604278564453,34.245685577392578,34.268604278564453,34.262874603271484,34.257144927978516,34.257144927978516,34.280063629150391,34.280063629150391,34.268604278564453,34.285793304443359,34.302982330322266,34.302982330322266,34.291522979736328,34.297252655029297,34.268604278564453,34.262874603271484,34.239955902099609,34.239955902099609],"text":"County: Dillon<br>Poverty rate: 29.2%<br>Property /100k: 2,940<br>Violent /100k: 1,134","type":"scatter","mode":"lines","line":{"width":0.37795275590551186,"color":"rgba(217,217,217,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(48,32,62,1)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","colorbar":{"title":{"text":"Poverty rate (% of residents)","side":"top","font":{"size":13}},"tickmode":"array","tickvals":[0,0.050000000000000003,0.10000000000000001,0.15000000000000002,0.20000000000000001,0.25,0.30000000000000004],"ticktext":["0%–5%","5%–10%","10%–15%","15%–20%","20%–25%","25%–30%",""],"ticks":"outside","tickcolor":"white","tickwidth":2,"tickfont":{"size":12},"len":1,"thickness":28,"orientation":"h","x":0.5,"xanchor":"center","y":-0.22},"frame":null},{"colorbar":{"title":"","ticklen":2},"colorscale":[["0","rgba(168,225,188,1)"],["0.0416666666666667","rgba(151,218,185,1)"],["0.0833333333333333","rgba(133,212,182,1)"],["0.125","rgba(114,205,179,1)"],["0.166666666666667","rgba(93,198,176,1)"],["0.208333333333333","rgba(72,191,173,1)"],["0.25","rgba(69,182,172,1)"],["0.291666666666667","rgba(65,174,171,1)"],["0.333333333333333","rgba(60,165,170,1)"],["0.375","rgba(55,156,170,1)"],["0.416666666666667","rgba(53,147,168,1)"],["0.458333333333333","rgba(54,138,166,1)"],["0.5","rgba(55,129,165,1)"],["0.541666666666667","rgba(55,120,163,1)"],["0.583333333333333","rgba(54,112,161,1)"],["0.625","rgba(57,102,156,1)"],["0.666666666666667","rgba(60,93,150,1)"],["0.708333333333333","rgba(62,84,143,1)"],["0.75","rgba(64,75,137,1)"],["0.791666666666667","rgba(65,66,130,1)"],["0.833333333333333","rgba(63,58,117,1)"],["0.875","rgba(60,52,103,1)"],["0.916666666666667","rgba(56,45,89,1)"],["0.958333333333333","rgba(52,38,75,1)"],["1","rgba(48,32,62,1)"]],"showscale":true,"x":{},"y":{},"fill":{},"text":{},"type":"heatmap","z":[[0,0.30000000000000004]],"hoverinfo":"skip","opacity":0,"xaxis":"x2","yaxis":"y2","frame":null}],"layout":{"margin":{"t":35.128268991282695,"r":0,"b":0,"l":0},"paper_bgcolor":"rgba(0,0,0,0)","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241},"title":{"text":"South Carolina — Poverty Rate","font":{"color":"rgba(0,0,0,1)","family":"","size":19.128268991282692},"x":0,"xref":"paper","xanchor":"left"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-83.605720138549799,-78.317886734008795],"tickmode":"array","ticktext":["-83","-82","-81","-80","-79"],"tickvals":[-83,-82,-81,-80,-79],"categoryorder":"array","categoryarray":["-83","-82","-81","-80","-79"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":0,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":null,"family":null,"size":0}},"scaleanchor":"y","scaleratio":1,"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[31.881375885009767,35.366678619384764],"tickmode":"array","ticktext":["32","33","34","35"],"tickvals":[32,33,34,35],"categoryorder":"array","categoryarray":["32","33","34","35"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":0,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":null,"family":null,"size":0}},"scaleanchor":"x","scaleratio":1,"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":12.7521793275218},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241}}},"hovermode":"closest","barmode":"relative","xaxis2":{"visible":false,"domain":[0,0.001],"anchor":"y2","overlaying":"x"},"yaxis2":{"visible":false,"domain":[0,0.001],"anchor":"x2","overlaying":"y"},"scene":{"zaxis":{"title":[]}}},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"a3112ae5108c":{"x":{},"y":{},"fill":{},"text":{},"type":"scatter"},"a3112ae5108c.1":{"x":{},"y":{},"fill":{},"text":{},"type":"heatmap","z":[[0,0.30000000000000004]],"showscale":true,"colors":["#A8E1BCFF","#49C1ADFF","#3497A9FF","#366CA0FF","#414081FF","#30203EFF"],"hoverinfo":"skip","opacity":0,"xaxis":"x2","yaxis":"y2","inherit":true}},"cur_data":"a3112ae5108c","visdat":{"a3112ae5108c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>(https://r-graph-gallery.com/choropleth-map.html)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>OpenAI. (2025, September 27). Response to a question about adding percent symbols to a ggplot2 legend in R [Large language model]. ChatGPT. https://chat.openai.com/<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>OpenAI. (2025, October 1). Response to a question about converting faceted ggplot to plotly in R [Large language model]. ChatGPT. https://chat.openai.com/<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/jonathanwilsonami\.github\.io\/stat-515\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 © 2025 Jonathan Wilson
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jonathanwilsonami/">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>